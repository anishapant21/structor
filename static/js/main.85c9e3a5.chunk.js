(this.webpackJsonpformbuilder=this.webpackJsonpformbuilder||[]).push([[0],{301:function(e,t,n){},313:function(e,t,n){},314:function(e,t,n){},433:function(e){e.exports=JSON.parse('{"Title":"Tittel","Preview":"Forh\xe5ndsvisning","Calculation formula":"Kalkuleringsformel","Display":"Beskjed","Code":"Code","Remove Code":"Fjern Code","Add Code":"Legg til Code","Enrichment":"Beriking","No enrichment":"Ingen Beriking","Custom":"Egendefinert","Enter custom enrichment":"Legg inn egendefinert beriking","Redirect user":"Send bruker videre","Relative redirect url":"M\xe5l","For example /infopage":"F.eks. /infoside","Parameter name must be 1-255 characters and can only contain numbers, _ and normal and capital letters a-z":"Parameternavn m\xe5 v\xe6re fra 1-255 tegn og kan kun inneholde tall, _ og sm\xe5 eller store bokstaver fra a-z","After completing the form":"Etter fullf\xf8rt skjema","Choose what should happen after the user has completed the form":"Velg hva som skal skje etter bruker har fullf\xf8rt skjemaet","Send as parameter":"Send som parameter","Parameter name":"Parameternavn","For example hn_frontend_parametername":"F.eks. hn_frontend_parameternavn","Initial value":"Initiell verdi","Read-only":"Skrivebeskyttet","Hidden field":"Gjemt felt","Repetition":"Gjentagelse","Choose whether the question group can be repeated":"Velg om sp\xf8rsm\xe5lsgruppen kan repeteres","Repeatable":"Kan gjentas","Repeat button text":"Kan gjentas knappetekst","Default is set to \\"Add\\"":"Default er satt til \\"Legg til\\"","Enter the minimum number of times the question group can be repeated":"Skriv inn minste antall ganger sp\xf8rsm\xe5lsgruppen kan gjentas","Enter the maximum number of times the question group can be repeated":"Skriv inn max antall ganger sp\xf8rsm\xe5lsgruppen kan gjentas","Prefix":"Prefiks","Min answers":"Min antall svar","Max answers":"Max antall svar","Placeholder text":"Skyggetekst","Links":"Lenker","Choose whether the links in the components should be opened in an external window":"Velg om lenkene som ligger i komponentene skal \xe5pnes i et eksternt vindu","LinkId":"LinkId","LinkId is already in use":"LinkId er allerede i bruk","Reset to original value":"Sett tilbake til opprinnelig verdi","Help":"Hjelp","Select whether you want to give the user a help text":"Velg om du \xf8nsker \xe5 gi bruker en hjelpetekst","Help icon":"Hjelpeikon","Enter a helping text":"Skriv en hjelpende tekst","Mark group in PDF":"Marker gruppe i PDF","Put in PDF first":"Legg f\xf8rst i PDF","Here you will find a summary of questionnaire elements. Drag a component here to start building this Questionnaire":"Her vil du finne en oversikt over elementene i skjemaet. Dra komponenter hit for \xe5 bygge skjema","Create element":"Opprett element","Add top-level element":"Legg til element p\xe5 toppniv\xe5","Enter a title..":"Legg inn tittel..","Enter a value..":"Legg inn verdi..","Enter a scoring value..":"Legg inn en sk\xe5ring verdi..","Remove element":"Fjern element","Today":"I dag","Time":"Klokkeslett","dd.mm.yyyy":"dd.mm.\xe5\xe5\xe5\xe5","dd.mm.yyyy 00:00":"dd.mm.\xe5\xe5\xe5\xe5 00:00","Close (Esc)":"Lukk (Esc)","At least one condition must be fulfilled":"Minst en betingelse m\xe5 v\xe6re oppfylt","All conditions must be fulfilled":"Alle betingelser m\xe5 v\xe6re oppfylt","Set condition for display of element":"Sett betingelser for visning av elementet","Select earlier question:":"Velg tidligere sp\xf8rsm\xe5l:","Choose question:":"Velg sp\xf8rsm\xe5l:","Show if answer is:":"Vis hvis svaret:","The form builder does not support enableWhen of type:":"Skjemabyggeren st\xf8tter ikke betinget visning av typen:","This condition cannot be edited in the form builder:":"Denne betingelsen kan ikke editeres i skjemabyggeren:","Remove condition":"Fjern betingelse","Add a condition":"Legg til betingelse","Choose an option..":"Velg et alternativ..","True":"Sant","Not true":"Usant","exists":"eksisterer","is equal to":"er lik","is not equal":"ikke er lik","is greater than":"er st\xf8rre enn","is less than":"er mindre enn","is greater than or equal":"er st\xf8rre enn eller lik","is less than or equal":"er mindre enn eller lik","<not set>":"<ikke satt>","<operator>":"<operator>","Error in enableWhen: item with linkId {0} does not exist":"Feil i betinget visning: item med linkId {0} finnes ikke","and":"og","or":"eller","Element will be shown if:":"Elementet vil vises dersom:","Select an operator":"Velg en operator","Remember to save...":"Husk \xe5 lagre...","You have made changes which are not saved. Do you with to upload a new questionnaire? (Changes will be lost)":"Du har gjort endringer som ikke er lagret. \xd8nsker du allikevel \xe5 laste opp et nytt skjema? (Endringene vil g\xe5 tapt)","System":"System","Enter uri..":"Legg inn uri..","Uri must start with http://, https:// or urn:uuid:":"Uri m\xe5 begynne med http://, https:// eller urn:uuid:","Close":"Lukk","There was en error with status:":"Det skjedde en feil med status:","This resource does not support the FHIR protocol":"Ressursen st\xf8tter ikke FHIR protokollen.","Found no ValueSet at the endpoint":"Finner ingen Value Set p\xe5 endepunktet.","Import ValueSet":"Importer Value Set","Enter a url which finds the resource":"Skriv inn en url som finner ressursen","Only url":"Kun url","search":"s\xf8k","Add ({0} ValueSet) in predefined valuesets":"Legg til ({0} ValueSet) i predefinerte valg","Import":"Importer","Back":"Tilbake","JSON structure":"JSON struktur","Predefined valuesets":"Predefinerte valg","Sublabel":"Instruks","Error message for validation error":"Feilmelding for valideringsfeil","Questionnaire details":"Skjemadetaljer","Questionnaire settings":"Skjemainnstillinger","Enter translation..":"Legg inn oversettelse..","Sidebar":"Sidebar","Help text":"Hjelpetekst","Element":"Element","Translate questionnaire":"Oversett skjema","Elements":"Elementer","Main language":"Hovedspr\xe5k:","Description":"Beskrivelse","Description of questionnaire":"Beskrivelse av skjema","Id":"Id","Id must be unique across languages":"Id m\xe5 v\xe6re unik p\xe5 tvers av spr\xe5k","Id must be 1-64 characters and only letters a-z, numbers, - and .":"Id m\xe5 v\xe6re fra 1-64 tegn og kan kun inneholde bokstaver fra a-z, tall, - og .","Technical name":"Teknisk navn:","Technical name must start with a captital letter, 1-255 characters and can only contain numbers and characters a-z":"Teknisk navn m\xe5 ha stor forbokstav, fra 1-255 tegn og kan kun inneholde tall og bokstaver fra a-z","Version":"Versjon:","Version number":"Versjonsnummer","Helsenorge endpoint":"Helsenorge endpoint","For example Endpoint/35":"F.eks Endpoint/35","Button bar display":"Visning av knapperad","Describes if user must be logged in to answer questionnaire":"Beskriver om innlogging kreves for \xe5 besvare skjemaet","Save capabilities":"Lagring og mellomlagring","Date":"Dato","Status":"Status","Publisher":"Utsteder","Contact (URL to contact address)":"Kontakt (URL til kontaktadresse)","Purpose":"Form\xe5l","Copyright":"Copyright","Generate PDF on submit":"Generer PDF ved besvarelse","Here you choose whether you want to generate a PDF and whether you want to hide some texts when the PDF is generated":"Her velger du om du \xf8nsker \xe5 generere en PDF og om du eventuelt \xf8nsker \xe5 skjule noen tekster n\xe5r PDF\'en genereres","Hide help texts in PDF":"Skjul hjelpetekster i PDF","Hide sidebar texts in PDF":"Skjul sidebartekster i PDF","Hide sublabels in PDF":"Skjul instrukser i PDF","Navigator":"Navigator","Choose whether to use the navigator":"Velg om navigatoren skal brukes","Navigation":"Navigasjon","Definition":"Definisjon","Yes":"Ja","No":"Nei","Questionnaire":"Skjema","New questionnaire":"Nytt skjema","Upload questionnaire":"Last opp skjema","Save":"Lagre","You are logged in as {0}":"Du er logget inn som {0}","Validate":"Valider","JSON":"JSON","Import choices":"Importer valg","Choices":"Valg","Log in":"Logg inn","Log out":"Logg ut","Change to English":"Bytt til engelsk","Change to French":"Bytt til fransk","Change to norwegian":"Bytt til norsk","Predefined values":"Predefinerte verdier","+ New option":"+ Nytt valg","Save >":"Lagre >","Enter a url..":"Skriv inn en url..","Only capital letters and numbers":"Kun store bokstaver og tall","Checkbox (Allow selection of multiple values)":"Avkrysningsbokser (Flere valg mulig)","Dropdown":"Nedtrekksmeny","Radio buttons":"Radioknapper","Autocomplete":"Autokompletter","+ Add option":"+ Legg til alternativ","Date type":"Datotype","Time, day, month and year":"Tidspunkt, dag, m\xe5ned og \xe5r","Day, month and year":"Dag, m\xe5ned og \xe5r","Month and year":"M\xe5ned og \xe5r","Year":"\xc5r","Expanded text":"Utvidet tekst","+ Add recipient":"+ Legg til mottaker","Select recipient..":"Angi mottaker..","Select endpoint..":"Angi endpoint..","Select answer valueset":"Velg sp\xf8rsm\xe5lsett","Select unit":"Velg enhet","is":"er","<no validation>":"<uten validering>","a set date":"fast dato","today":"dagens dato","today plus":"dagens dato pluss","today minus":"dagens dato minus","number":"tall","Unit":"Enhet","days":"dager","weeks":"uker","months":"m\xe5neder","year":"\xe5r","Max file size in MB":"Maksimal filst\xf8rrelse i MB","Enter custom error message":"Legg til egendefinert feilmelding:","Min date":"Min dato","Max date":"Max dato","Allow decimals":"Tillat desimaltall","Max number of decimals":"Max antall desimaler","Min value":"Min verdi","Max value":"Max verdi","error message":"feilmelding","Answer should be:":"Svaret skal v\xe6re:","No character validation":"Uten tegn-validering","Custom regular expression":"Egendefinert regul\xe6rt uttrykk","Enter custom regular expression":"Legg inn egendefinert regul\xe6rt uttrykk","Minimum characters":"Minimum antall tegn","Email":"Epost","URL":"URL","National identity number":"F\xf8dselsnummer","Mobile phone number":"Mobiltelefonnummer","Only norwegian characters":"Kun norske bokstaver","Only norwegian characters + hyphen and space (used for names)":"Kun norske bokstaver + bindestrek og mellomrom (benyttes ved navn)","Only norwegian characters with line breaks":"Kun norske bokstaver med linjeskift","Zip code":"Postnummer","Text answer":"Tekstsvar","Select type":"Velg type","Mandatory":"Obligatorisk","Highlight":"Highlight","Text formatting":"Tekstformatering","Text":"Tekst","Add validation":"Legg til validering","Enable when":"Betinget visning","Advanced settings":"Avanserte innstillinger","Previous (left arrow)":"Forrige (Pil venstre)","Next (right arrow)":"Neste (Pil h\xf8yre)","Validation errors:":"Valideringsfeil:","Sidebar heading":"Sidebar overskrift","select sidebar heading:":"Velg sidebar overskrift","Options regarding completion (SOT-1)":"Alternativer for utfylling (SOT-1)","Guidance and person responsible (SOT-2)":"Veiledning og ansvarlig (SOT-2)","Processing by the recipient (SOT-3)":"Behandling hos mottaker (SOT-3)","Content":"Innhold","- Remove element":"- Fjern element","+ Add element":"+ Legg til element","Found {0} errors. Questions with errors are marked with a red border.":"Fant {0} feil. Sp\xf8rsm\xe5l med feil er markert med r\xf8d ramme.","Found no validation errors!":"Fant ingen valideringsfeil!","Found {0} missing translations.":"Fant {0} manglende oversettelser.","Found no translations errors!":"Fant ingen manglende oversettelser!","It looks like you have previously worked with a questionnaire:":"Det ser ut til at du har jobbet med et skjema tidligere:","Do you wish to open this questionnaire?":"\xd8nsker du \xe5 fortsette med dette skjemaet?","Restore questionnaire...":"Gjenopprett skjema...","You have unsaved changes. Do you wish to start a new questionnaire? (Changes to existing questionnaire will be lost)":"Du har gjort endringer som ikke er lagret. \xd8nsker du allikevel \xe5 begynne p\xe5 et nytt skjema? (Endringene vil g\xe5 tapt)","Loading questionnaire...":"Leser inn skjema...","Question is required, but cannot be required":"Sp\xf8rsm\xe5let er satt som required, men kan ikke v\xe6re required","Error in FHIRpath date validation":"Feil i datovalidering med FhirPath","Code does not have \\"code\\" property":"Code har ikke \\"code\\" property","Code does not have \\"system\\" property":"Code har ikke \\"system\\" property","Code does not have a valid system":"Code har ikke gyldig system","answerOption does not have a valid system":"answerOption har ikke gyldig system","quantity extension does not have a valid system":"quantity extension har ikke gyldig system","quantity extension does not have code":"quantity extension har ikke code","Extension has no \\"url\\" property":"Extension har ikke \\"url\\" property","Extension does not have value[x], or has more than one value[x]":"Extension mangler value[x], eller har mer enn en value[x]","Initial value is not a possible value":"Initiell verdi er ikke en mulig verdi","ValueSet of initial value does not exist":"Verdisettet den initielle verdien kommer fra finnes ikke","This enableWhen refers to a question with linkId which does not exist":"LinkId p\xe5 sp\xf8rsm\xe5let denne enableWhen referer til eksisterer ikke","enableWhen is not configured correctly. There are too many answer[x]-properties":"Feil i betinget visning, for eksempel p\xe5 grunn av endret sp\xf8rsm\xe5lstype. Pr\xf8v \xe5 fjerne betingelsen og legg den til p\xe5 nytt. (Det finnes for mange answer[x]-properties)","Quantity does not match system and code":"Quantity samsvarer ikke med system og code","Recipient set in this enableWhen does not exist":"Mottakeren definert i denne enableWhen finnes ikke","Coding expected in this enableWhen does not exist":"Coding denne enableWhen forventer eksisterer ikke","Operator used in this enableWhen is not supported":"Operator brukt i denne enableWhen er ikke st\xf8ttet","The ValueSet referenced in this enableWhen does not exist":"Verdisettet denne enableWhen refererer til finnes ikke","Items with code \\"SS\\" (section score) must be inside a group":"Elementer med kode \\"SS\\" (seksjon sk\xe5ring) m\xe5 v\xe6re inni en gruppe","Active":"Aktiv","Draft":"Skisse","Retired":"Avsluttet","Unknown":"Ukjent","Floating at the bottom of the screen (standard setting)":"Flytende nederst p\xe5 skjermen (standardinnstilling)","No button bar":"Ingen knapperad","Static (at the bottom of the questionnaire)":"Fast (kun nederst i skjema)","Questionnaire can be answered by a representative (standard setting)":"Kan ogs\xe5 utfylles av andre p\xe5 vegne av pasienten (standardinnstilling)","Can only be answered by logged in patient":"M\xe5 fylles ut av pasienten selv","Required (standard setting)":"P\xe5krevd (standardinnstilling)","Anonymous":"Anonym","Optional":"Valgfritt","Not set":"Ikke satt","Save submitted questionnaire and intermediate save (standard setting)":"Lagring av endelig versjon og mellomlagring (standardinnstilling)","Only submitted questionnaire is saved":"Kun lagring av endelig versjon","No saving":"Ingen lagring","Translations":"Spr\xe5k","Add support for additional language":"Legg til st\xf8tte for tilleggsspr\xe5k","Select a language..":"Velg et spr\xe5k..","+ Add new language":"+ Legg til nytt spr\xe5k","Additional languages":"Tilleggsspr\xe5k:","Delete":"Slett","Translate":"Oversett","Validation":"Validering","Follow-up question":"Oppf\xf8lgingssp\xf8rsm\xe5l","Create follow-up question":"Opprett oppf\xf8lgingssp\xf8rsm\xe5l","Duplicate":"Dupliser","Group":"Gruppe","Multi-line textfield":"Tekstfelt med flere linjer","Choice":"Alternativer","Open choice":"Alternativer med \xe5pent svar","Recipient list":"Mottakerliste","Recipient component":"Mottakerkomponent","Recipient component EndpointId":"Mottakerkomponent EndepunktId","Date and time":"Dato og klokkeslett","Confirmation":"Bekreftelse","Number":"Tall","Quantity":"Antall med enhet","Attachment":"Vedlegg","Information text":"Informasjonstekst","No unit":"Ingen enhet","centimeter":"centimeter","kilo":"kilo","month":"m\xe5ned","day":"dag","is answered":"er besvart","is not answered":"ikke er besvart","is later than":"er etter","is earlier than":"er f\xf8r","is later than or equal":"er etter eller lik","is earlier than or equal":"er f\xf8r eller lik","Patient":"Pasient","Full name":"Fullt navn","First name":"Fornavn","Surname":"Etternavn","Birth date":"F\xf8dselsdato","Age":"Alder","Address":"Adresse","Postal address":"Poststed","Temporary c/o":"Midlertidig c/o","Temporary address":"Midlertidig adresse","Temporary postal code":"Midlertidig postnummer","Temporary postal address":"Midlertidig poststed","On behalf of citizen":"P\xe5 vegne av innbygger","Is questionnaire answered on behalf of someone else? (true/false)":"Fylles skjema ut p\xe5 vegne av noen andre? (true/false)","On behalf of citizen (national identity number)":"P\xe5 vegne av innbygger (F\xf8dselsnummer)","On behalf of citizen (name)":"P\xe5 vegne av innbygger (Navn)","On behalf of citizen (birth date)":"P\xe5 vegne av innbygger (F\xf8dseslsdato)","On behalf of citizen (age)":"P\xe5 vegne av innbygger (Alder)","On behalf of citizen (gender)":"P\xe5 vegne av innbygger (Kj\xf8nn)","On behalf of citizen (phone number)":"P\xe5 vegne av innbygger (Mobiltelefonnummer)","On behalf of citizen (address)":"P\xe5 vegne av innbygger (Adresse)","On behalf of citizen (postal code)":"P\xe5 vegne av innbygger (Postnummer)","On behalf of citizen (postal address)":"P\xe5 vegne av innbygger (Poststed)","On behalf of citizen (temporary c/o)":"P\xe5 vegne av innbygger (Midlertidig c/o)","On behalf of citizen (temporary address)":"P\xe5 vegne av innbygger (Midlertidig adresse)","On behalf of citizen (temporary postal code)":"P\xe5 vegne av innbygger (Midlertidig postnummer)","On behalf of citizen (temporary postal address)":"P\xe5 vegne av innbygger (Midlertidig poststed)","General Practitioner":"Fastlege","General Practitioner (full name)":"Fastlege (Fullt navn)","General Practitioner (first name)":"Fastlege (Fornavn)","General Practitioner (surname)":"Fastlege (Etternavn)","General Practitioner (business name)":"Fastlege (Legekontorets navn)","General Practitioner (business phone number)":"Fastlege (Legekontorets telefonnummer)","General Practitioner (address 1)":"Fastlege (Adresselinje 1)","General Practitioner (address 2)":"Fastlege (Adresselinje 2)","General Practitioner (address 3)":"Fastlege (Adresselinje 3)","General Practitioner (postal code)":"Fastlege (Postnummer)","General Practitioner (postal address)":"Fastlege (Poststed)","General Practitioner (country)":"Fastlege (Land)","Miscellaneous":"Diverse","Todays date":"Dagens dato","Gender":"Kj\xf8nn","Male":"Mann","Female":"Kvinne","Display type":"Visningstype","Select service area":"Velg tjenesteomr\xe5de","Which service area the bruker needs to have to have access to form":"Hvilket tjenesteomr\xe5de m\xe5 innbyggeren ha for \xe5 f\xe5 ttilgang til skjema","Who fills out the form is controlled by a standard access service. If the form is to have access control other than standard, this must be selected here. Choose which representation conditions should be able to fill in the form.":"Hvem som kan fylle ut skjemaet styres av en standard tilgangstjeneste. Dersom skjemaet skal ha annen tilgangsstyring enn standard, m\xe5 dette velges her. Velg hvilke representasjonsforhold som skal kunne fylle ut skjemaet.","Helsetjeneste (Full) (standard setting)":"Helsetjeneste (Full) (standardinnstilling)","Journalinnsyn (Basis +)":"Journalinnsyn (Basis +)","Registerinnsyn (Basis)":"Registerinnsyn (Basis)","Recipient component is configured in Helsenorge admin":"Mottakerkomponenten konfigureres i Helsenorge admin","Form builder":"Skjemabygger","What would you like to do?":"Hva vil du gj\xf8re?","You can start a new questionnaire, or upload an existing one.":"Velg om du vil opprette et skjema fra bunnen av eller endre et skjema ved \xe5 laste opp en skjemafil.","Allow free-text answer":"Legg til tekstfelt for \xe5pent svar","Use predefined valueset":"Bruk predefinerte alternativer","Components":"Komponenter","Uploaded file is not a questionnaire":"Opplastet fil er ikke et skjema","Technical name of uploaded questionnaire is not equal to questionnaire technical name":"Teknisk navn p\xe5 opplastet skjema er ikke lik teknisk navn p\xe5 skjema","Questionnaire with the same language as uploaded questionnaire already exists":"Skjema med samme spr\xe5k som opplastet skjema finnes allerede","Could not read uploaded file":"Kunne ikke lese opplasted fil","Upload questionnaire in additional language":"Last opp skjema med tilleggsspr\xe5k","Export translations":"Eksporter oversettelser","Representative relation":"Representert relasjon","Represented by power of attorney? (true/false)":"Representert ved tildelt ordin\xe6r fullmakt? (true/false)","Represented by power of attorney for non-consent competent? (true/false)":"Representert ved fullmakt for ikke samtykkekompetente? (true/false)","Represented by parent? (true/false)":"Representert ved forelder? (true/false)","Represented by guardianship? (true/false)":"Representert ved vergem\xe5lsvedtak? (true/false)","Upload ValueSets as json files. Accepts a Bundle or ValueSet in a single file. It is possible to upload several files at once":"Last opp verdisett som json-filer. H\xe5ndterer Bundle eller verdisett i en egen fil. Det er mulig \xe5 laste opp flere filer samtidig.","Upload ValueSet(s)":"Last opp verdisett","Connect to print version (binary)":"Koble til PDF-skjema (binary)","For example Binary/35":"F.eks Binary/35","Print version":"Utskriftsversjon","Dynamic":"Dynamisk","Open item links in same tab":"\xc5pne lenker i samme vindu","Open all links in same tab":"\xc5pne alle lenker i samme vindu","Update":"Oppdater","View":"Visning","Choose if/where the component should be displayed":"Velg om/hvor komponenten skal vises","Display in form filler and PDF":"Vises i skjemautfyller og PDF","Display only in PDF":"Vises kun i PDF","Display only in form filler":"Vises kun i skjemautfyller","Hide in form filler and PDF":"Skjules i skjemautfyller og PDF","Retrieve input data from field":"Hent inputdata fra felt","data receiver does not have an earlier question":"datamottaker har ikke et tidligere sp\xf8rsm\xe5l","Progress indicator":"Fremdriftsindikator","Choose whether you want to hide the progress indicator. The progress indicator is only available if the form is using a step-view":"Velg om du vil skjule fremdriftsindikatoren. Fremdriftsindikatoren er bare tilgjengelig dersom skjemaet benytter stegvisning.","Hide progress indicator":"Skjul fremdriftsindikator","Step-view":"Stegvisning","Select whether the group should be a step in step-view":"Velg om denne gruppen skal v\xe6re et steg i stegvising","Step in step-view":"Steg i stegvisning","Change":"Endre","Workflow request":"Arbeidsflyt foresp\xf8rsel","Should the form be included in a workflow at Helsenorge? This field is only used by Norsk helsenett.":"Skal skjema inng\xe5 i en arbeidsflyt p\xe5 Helsenorge? Dette feltet brukes kun av Norsk helsenett.","Workflow":"Arbeidsflyt","Request":"Henvendelse","Show only answered options":"Viser kun besvarte alternativer","Full display":"Full vising","Compact display":"Kompakt vising","Choose whether all answer options should be displayed in PDF":"Velg om alle svaralternativer skal vises i PDF","Scoring":"Sk\xe5ring","Select whether the field should be a scoring field":"Velg om feltet skal v\xe6re et sk\xe5ring felt","Scoring field":"Sk\xe5ring felt","Summation field":"Summeringsfelt","Select whether the field should be a summation field for section score or total score":"Velg om feltet skal v\xe6re et summeringsfelt for seksjon sk\xe5ring eller total sk\xe5ring","Section score":"Seksjon sk\xe5ring","Total score":"Total sk\xe5ring","A section score summation field must be inside a group":"Et seksjon sk\xe5ring felt m\xe5 v\xe6re inni en gruppe","A summation field requires that a scoring field exists in the questionnaire":"Et summeringsfelt krever at et sk\xe5ring felt finnes i skjemaet","A summation field cannot have a calculation formula":"Et summeringsfelt kan ikke ha en kalkuleringsformel","A scoring field requires that a summation field exists in the questionnaire":"Et sk\xe5ring felt krever at et summeringsfelt finnes i skjemaet","A scoring field must have a scoring value in all answer options":"Et sk\xe5ring felt m\xe5 ha en sk\xe5ring verdi i alle svaralternativer"}')},434:function(e){e.exports=JSON.parse('{"Title":"Titre","Preview":"Aper\xe7u","Calculation formula":"Formule de calcul","Display":"Affichage","Code":"Code","Remove Code":"Enlever le Code","Add Code":"Ajouter le Code","Enrichment":"Enrichissement","No enrichment":"Pas d\'enrichissement","Custom":"Personnalis\xe9","Enter custom enrichment":"Entrez un enrichissement personnalis\xe9","Redirect user":"Rediriger l\'utilisateur","Relative redirect url":"url relative de redirection","For example /infopage":"ex: /infoside","Parameter name must be 1-255 characters and can only contain numbers, _ and normal and capital letters a-z":"le param\xe8tre doit \xeatre compris entre 1 et 255 caract\xe8res et contenir des chiffres, des lettres (a-z, majuscules et minuscules) ou le caract\xe8re sp\xe9cial _","After completing the form":"Apr\xe8s avoir rempli le formulaire","Choose what should happen after the user has completed the form":"Choisissez ce qui doit se passer une fois que l\'utilisateur a rempli le formulaire","Send as parameter":"Envoyer en param\xe8tre","Parameter name":"Nom du param\xe8tre","For example hn_frontend_parametername":"ex: hn_frontend_nomparametre","Initial value":"Valeur initiale","Read-only":"Lecture seule","Hidden field":"Champ cach\xe9","Repetition":"R\xe9p\xe9tition","Choose whether the question group can be repeated":"Choisissez si le groupe de questions peut \xeatre r\xe9p\xe9t\xe9","Repeatable":"R\xe9p\xe9table","Repeat button text":"Texte du bouton r\xe9p\xe9ter","Default is set to \\"Add\\"":"La valeur par d\xe9faut est d\xe9finie sur \\"ajouter\\"","Enter the minimum number of times the question group can be repeated":"Entrez le nombre minimum de fois que le groupe de questions peut \xeatre r\xe9p\xe9t\xe9","Enter the maximum number of times the question group can be repeated":"Entrez le nombre maximum de fois que le groupe de questions peut \xeatre r\xe9p\xe9t\xe9","Prefix":"Prefix","Min answers":"Nombre minimum de r\xe9ponses","Max answers":"Nombre maximum de r\xe9ponses","Placeholder text":"Texte de remplissage","Links":"Liens","Choose whether the links in the components should be opened in an external window":"Choisir si les liens dans les composants doivent \xeatre ouverts dans une fen\xeatre externe","LinkId":"LinkId","LinkId is already in use":"LinkId d\xe9ja utilis\xe9","Reset to original value":"R\xe9initialiser \xe0 la valeur originale","Help":"Aider","Select whether you want to give the user a help text":"Indiquez si vous souhaitez donner \xe0 l\'utilisateur un texte d\'aide","Help icon":"Ic\xf4ne d\'aide","Enter a helping text":"Etrez le texte d\'aide","Mark group in PDF":"Marquer le groupe dans le PDF","Put in PDF first":"Mettre d\'abord en PDF","Here you will find a summary of questionnaire elements. Drag a component here to start building this Questionnaire":"Ici vous trouverez un r\xe9sum\xe9 des \xe9lements du questionnaire. Faites glisser un composant ici pour commencer \xe0 construire ce Questionnaire","Create element":"Cr\xe9er \xe9l\xe9ment","Add top-level element":"Ajouter un \xe9l\xe9ment de haut niveau","Enter a title..":"Entrez un titre..","Enter a value..":"Entrez une valeur..","Enter a scoring value..":"Saisissez une valeur de score..","Remove element":"Supprimer l\'element","Today":"Aujourd\'hui","Time":"Heure","dd.mm.yyyy":"jj.mm.aaaa","dd.mm.yyyy 00:00":"jj.mm.aaaa 00:00","Close (Esc)":"Fermer (Esc)","At least one condition must be fulfilled":"Au moins une condition doit \xeatre remplie","All conditions must be fulfilled":"Toutes les conditions doivent \xeatre remplies","Set condition for display of element":"Ajouter un condition d\'affichage de l\'\xe9l\xe9ment","Select earlier question:":"Choisir une question pr\xe9c\xe9dente:","Choose question:":"Choisir une question:","Show if answer is:":"Afficher si la r\xe9ponse est:","The form builder does not support enableWhen of type:":"Le form builder ne supporte pas le enableWhen de type:","This condition cannot be edited in the form builder:":"Cette condition ne peut pas \xeatre \xe9dit\xe9e dans le form builder:","Remove condition":"Supprimer la condition","Add a condition":"Ajouter une condition","Choose an option..":"Choisir une option..","True":"Vrai","Not true":"Faux","exists":"existe","is equal to":"est \xe9gal \xe0","is not equal":"n\'est pas \xe9gal","is greater than":"est plus grand \xe0","is less than":"est plus petit \xe0","is greater than or equal":"est plus grand ou \xe9gal \xe0","is less than or equal":"est plus petit ou \xe9gal \xe0","<not set>":"<non renseign\xe9>","<operator>":"<operateur>","Error in enableWhen: item with linkId {0} does not exist":"Erreur dans le enableWhen: l\'item avec le linkId {0} n\'existe pas","and":"et","or":"ou","Element will be shown if:":"L\'\xe9l\xe9ment sera affich\xe9 si:","Select an operator":"S\xe9lectionez un op\xe9rateur","Remember to save...":"Pensez \xe0 sauvegarder...","You have made changes which are not saved. Do you with to upload a new questionnaire? (Changes will be lost)":"Vous avez des modifications non sauvegard\xe9es. Voulez vous charger un nouveau questionnaire ? (Vos modifications seront perdues)","System":"Syst\xe8me","Enter uri..":"Entrez l\'uri..","Uri must start with http://, https:// or urn:uuid:":"Une uri doit commencer par http://, https:// ou urn:uuid:","Close":"Fermer","There was en error with status:":"Une erreur s\'est produite avec le statut:","This resource does not support the FHIR protocol":"Cette ressource ne supporte pas le protocol fhir.","Found no ValueSet at the endpoint":"Aucun ValueSet trouv\xe9 sur ce endpoint.","Import ValueSet":"Importer Value Set","Enter a url which finds the resource":"Entrez une url qui trouve la ressource","Only url":"Seul l\'url","search":"chercher","Add ({0} ValueSet) in predefined valuesets":"Ajouter ({0} ValueSet) dans la liste des valuesets pr\xe9d\xe9finis","Import":"Importer","Back":"Retour","JSON structure":"structure JSON","Predefined valuesets":"Valuesets pr\xe9d\xe9finis","Sublabel":"Sous-label","Error message for validation error":"Message d\'erreur de l\'erreur de validation","Questionnaire details":"D\xe9tails du questionnaire","Questionnaire settings":"Configuration du questionnaire","Enter translation..":"Entrer la traduction..","Sidebar":"Barre lat\xe9rale","Help text":"Texte d\'aide","Element":"Element","Translate questionnaire":"Traduire le questionnaire","Elements":"Elements","Main language":"Langue principale:","Description":"Description","Description of questionnaire":"Description du questionnaire","Id":"Id","Id must be unique across languages":"L\'id doit \xeatre unique \xe0 travers toutes les langues","Id must be 1-64 characters and only letters a-z, numbers, - and .":"L\'id doit faire 1-64 caract\xe8res et contenir seulement les lettres a-z, des chiffres ou les caract\xe8res sp\xe9ciaux - et .","Technical name":"Nom technique:","Technical name must start with a captital letter, 1-255 characters and can only contain numbers and characters a-z":"Le nom technique doit faire 1-255 caract\xe8res, commencer par une majuscule et contenir seulement les lettres a-z","Version":"Version:","Version number":"Num\xe9ro de version","Helsenorge endpoint":"Endpoint Helsenorge","For example Endpoint/35":"ex: Endpoint/35","Button bar display":"Affichage en barre des boutons","Describes if user must be logged in to answer questionnaire":"D\xe9crit si l\'utilisateur doit \xeatre connect\xe9 pour r\xe9pondre au questionnaire","Save capabilities":"Capacit\xe9s de sauvegarde","Date":"Date","Status":"Status","Publisher":"Editeur","Contact (URL to contact address)":"Url de contact de l\'editeur","Purpose":"Objectif","Copyright":"Copyright","Generate PDF on submit":"G\xe9n\xe9rer un pdf \xe0 la validation","Here you choose whether you want to generate a PDF and whether you want to hide some texts when the PDF is generated":"Ici, vous choisissez si vous souhaitez g\xe9n\xe9rer un PDF et si vous souhaitez masquer certains textes lors de la g\xe9n\xe9ration du PDF","Hide help texts in PDF":"Masquer les textes d\'aide en PDF","Hide sidebar texts in PDF":"Masquer les textes de la barre lat\xe9rale dans le PDF","Hide sublabels in PDF":"Masquer les sous-\xe9tiquettes en PDF","Navigator":"Navigateur","Choose whether to use the navigator":"Choisissez d\'utiliser ou non le navigateur","Navigation":"Navigation","Definition":"D\xe9finition","Yes":"Oui","No":"Non","Questionnaire":"Questionnaire","New questionnaire":"Nouveau questionnaire","Upload questionnaire":"Charger un questionnaire","Save":"Sauvegarder","You are logged in as {0}":"Vous \xeates connect\xe9 en tant que {0}","Validate":"Valider","JSON":"JSON","Import choices":"Importer des choix","Choices":"Choix","Log in":"Connexion","Log out":"D\xe9connexion","Change to English":"Passer en Anglais","Change to French":"Passer en Fran\xe7ais","Change to norwegian":"Passer en Norv\xe9gien","Predefined values":"Valeurs pr\xe9d\xe9finies","+ New option":"+ Nouvelle option","Save >":"Sauvegarder >","Enter a url..":"Entrer une url..","Only capital letters and numbers":"Seulement des lettres capitales et des chiffres","Checkbox (Allow selection of multiple values)":"Case \xe0 cocher (Autorise les choix multiples)","Dropdown":"Menu d\xe9roulant","Radio buttons":"Boutons radio","Autocomplete":"Autocompletion","+ Add option":"+ Ajouter une option","Date type":"Type de date","Time, day, month and year":"Heure, jour, mois et ann\xe9e","Day, month and year":"Jour, mois et ann\xe9e","Month and year":"Mois et ann\xe9e","Year":"Ann\xe9e","Expanded text":"Texte \xe9tendu","+ Add recipient":"+ Ajouter un destinataire","Select recipient..":"S\xe9lectionner un destinataire..","Select endpoint..":"S\xe9lectionner un endpoint..","Select answer valueset":"S\xe9lectionner un valueset de r\xe9ponse","Select unit":"S\xe9lectionner une unit\xe9","is":"est","<no validation>":"<pas de validation>","a set date":"une date fixe","today":"aujourd\'hui","today plus":"aujourd\'hui plus","today minus":"aujourd\'hui moins","number":"chiffre","Unit":"Unit\xe9","days":"jours","weeks":"semaines","months":"mois","year":"ann\xe9e","Max file size in MB":"Taille maximum du fichier en MB","Enter custom error message":"Entrez un message d\'erreur personnalis\xe9:","Min date":"Date minimum","Max date":"Date maximum","Allow decimals":"Autoriser les d\xe9cimales","Max number of decimals":"Nombre de d\xe9cimales autoris\xe9es","Min value":"Valeur minimum","Max value":"Valeur maximum","error message":"Message d\'erreur","Answer should be:":"La r\xe9ponse devrait \xeatre:","No character validation":"Pas de validation des caract\xe8res","Custom regular expression":"Expression r\xe9guli\xe8re personnalis\xe9e","Enter custom regular expression":"Entrez une expression r\xe9guli\xe8re personnalis\xe9e","Minimum characters":"Nombre minimum de caract\xe8res","Email":"Email","URL":"URL","National identity number":"Num\xe9ro de s\xe9curit\xe9 sociale","Mobile phone number":"Num\xe9ro de t\xe9l\xe9phone mobile","Only norwegian characters":"Seulement des caract\xe8res norv\xe9giens","Only norwegian characters + hyphen and space (used for names)":"Seulement des caract\xe8res norv\xe9giens + hyphen et espace (utilis\xe9s pour les noms)","Only norwegian characters with line breaks":"Seulement des caract\xe8res norv\xe9giens avec des sauts de ligne","Zip code":"Code postal","Text answer":"R\xe9ponse texte","Select type":"S\xe9lectionnez un type","Mandatory":"Obligatoire","Highlight":"Surligner","Text formatting":"Formattage de texte","Text":"Texte","Add validation":"Ajouter la validation","Enable when":"Autoris\xe9 quand","Advanced settings":"Options avanc\xe9es","Previous (left arrow)":"Pr\xe9c\xe9dent (fl\xe8che de gauche)","Next (right arrow)":"Suivant (fl\xe8che de droite)","Validation errors:":"Erreurs de validation:","Sidebar heading":"Titre de la barre lat\xe9rale","select sidebar heading:":"Selectionner le titre de barre lat\xe9rale","Options regarding completion (SOT-1)":"Options concernant la compl\xe9tion (SOT-1)","Guidance and person responsible (SOT-2)":"Accompagnement et personne responsable (SOT-2)","Processing by the recipient (SOT-3)":"Traitement par le destinataire (SOT-3)","Content":"Contenu","- Remove element":"- Enlever \xe9l\xe9ment","+ Add element":"+ Ajouter \xe9l\xe9ment","Found {0} errors. Questions with errors are marked with a red border.":"Trouv\xe9 {0} erreurs. Les questions en erreur sont encadr\xe9es de rouge.","Found no validation errors!":"Aucune erreur de validation trouv\xe9e!","Found {0} missing translations.":"Trouv\xe9 {0} traductions manquantes","Found no translations errors!":"Aucune erreur de traduction trouv\xe9e!","It looks like you have previously worked with a questionnaire:":"Il semble que vous avez d\xe9ja travaill\xe9 sur un questionnaire:","Do you wish to open this questionnaire?":"Voulez vous ouvrir ce questionnaire?","Restore questionnaire...":"R\xe9cup\xe9rer questionnaire...","You have unsaved changes. Do you wish to start a new questionnaire? (Changes to existing questionnaire will be lost)":"Vous avez des modifications non sauvegard\xe9es. Voulez vous commencer un nouveau questionnaire ? (Vos modifications seront perdues)","Loading questionnaire...":"Chargement du questionnaire...","Question is required, but cannot be required":"La question est obligatoire mais ne peut pas l\'\xeatre","Error in FHIRpath date validation":"Erreur dans la validation FHIRpath de la date","Code does not have \\"code\\" property":"Le code n\'a pas de propri\xe9t\xe9 \\"code\\"","Code does not have \\"system\\" property":"Le code n\'a pas de propri\xe9t\xe9 \\"system\\"","Code does not have a valid system":"Le code n\'a pas de syst\xe8me valide","answerOption does not have a valid system":"answerOption n\'a pas de syst\xe8me valide","quantity extension does not have a valid system":"quantity extension n\'a pas de syst\xe8me valide","quantity extension does not have code":"quantity extension n\'a pas de code","Extension has no \\"url\\" property":"L\'extension\' n\'a pas de propri\xe9t\xe9 \\"url\\"","Extension does not have value[x], or has more than one value[x]":"L\'extension\' n\'a pas de value[x], ou a plus d\'une value[x]","Initial value is not a possible value":"La valeur initiale n\'est pas permise","ValueSet of initial value does not exist":"Le valueset de la valeur initiale n\'existe pas","This enableWhen refers to a question with linkId which does not exist":"Le LinkId r\xe9f\xe9renc\xe9 dans l\'enableWhen n\'existe pas","enableWhen is not configured correctly. There are too many answer[x]-properties":"l\'enableWhen n\'est pas configur\xe9 correctement. Il y a trop de propri\xe9t\xe9s answer[x]","Quantity does not match system and code":"La Quantity n\'est pas conforme au syst\xe8me et au code","Recipient set in this enableWhen does not exist":"La destinataire de l\'enableWhen n\'existe pas","Coding expected in this enableWhen does not exist":"Le Coding attendu dans l\'enableWhen n\'existe pas","Operator used in this enableWhen is not supported":"L\'operateurr utilis\xe9 dans l\'enableWhen n\'est pas support\xe9","The ValueSet referenced in this enableWhen does not exist":"Le ValueSet r\xe9f\xe9renc\xe9 dans l\'enableWhen n\'existe pas","Items with code \\"SS\\" (section score) must be inside a group":"Les \xe9l\xe9ments avec le code \\"SS\\" (score de section) doivent \xeatre \xe0 l\'int\xe9rieur d\'un groupe","Active":"Actif","Draft":"Brouillon","Retired":"Retir\xe9","Unknown":"Unconnu","Floating at the bottom of the screen (standard setting)":"Flottant en bas de l\'\xe9cran (option par d\xe9faut)","No button bar":"Pas de barre de boutons","Static (at the bottom of the questionnaire)":"Statique (en bas du questionnaire)","Questionnaire can be answered by a representative (standard setting)":"Questionnaire peut \xeatre rempli par un repr\xe9sentant (option par d\xe9faut)","Can only be answered by logged in patient":"Ne peut \xeatre rempli que par un patient connect\xe9","Required (standard setting)":"Requis (option par d\xe9faut)","Anonymous":"Anonyme","Optional":"Optionnel","Not set":"Pas encore d\xe9fini","Save submitted questionnaire and intermediate save (standard setting)":"Sauvegarder \xe0 la soumission et de fa\xe7on interm\xe9diaire (option par d\xe9faut)","Only submitted questionnaire is saved":"Ne sauvegarder qu\'\xe0 la soumission","No saving":"Pas de sauvegarde","Translations":"Traductions","Add support for additional language":"Ajouter du support pour un language suppl\xe9mentaire","Select a language..":"S\xe9lectionner un language..","+ Add new language":"+ Ajouter un nouveau language","Additional languages":"Languages additionnels:","Delete":"Supprimer","Translate":"Traduire","Validation":"Valider","Follow-up question":"Question de suivi","Create follow-up question":"Cr\xe9er une question de suivi","Duplicate":"Dupliquer","Group":"Groupe","Multi-line textfield":"Champ de texte multi-ligne","Choice":"Choix","Open choice":"Choix ouvert","Recipient list":"Liste des destinataires","Recipient component":"Composant destinataire","Recipient component EndpointId":"Composant destinataire EndpointId","Date and time":"Date et heure","Confirmation":"Confirmation","Number":"Num\xe9ro","Quantity":"Quantit\xe9","Attachment":"Pi\xe8ce jointe","Information text":"Texte d\'information","No unit":"Pas d\'unit\xe9","centimeter":"centim\xe8tre","kilo":"kilo","month":"mois","day":"jour","is answered":"est r\xe9pondu","is not answered":"n\'est pas r\xe9pondu","is later than":"est apr\xe8s","is earlier than":"est plus t\xf4t que","is later than or equal":"est apr\xe8s ou \xe9gal \xe0","is earlier than or equal":"est plus t\xf4t ou \xe9gal \xe0","Patient":"Patient","Full name":"Nom complet","First name":"Pr\xe9nom","Surname":"Nom de famille","Birth date":"Date de naissance","Age":"Age","Address":"Adresse","Postal address":"Code postal","Temporary c/o":"C/o temporaire","Temporary address":"Adresse temporaire","Temporary postal code":"Code postal temporaire","Temporary postal address":"Adresse postale temporaire","On behalf of citizen":"Au nom du citoyen","Is questionnaire answered on behalf of someone else? (true/false)":"Est-ce que ce questionnaire est rempli au nom de quelqu\'un d\'autre ? (vrai/faux)","On behalf of citizen (national identity number)":"Au nom du citoyen (Num\xe9ro de s\xe9curit\xe9 sociale)","On behalf of citizen (name)":"Au nom du citoyen (Nom)","On behalf of citizen (birth date)":"Au nom du citoyen (Date de naissance)","On behalf of citizen (age)":"Au nom du citoyen (Age)","On behalf of citizen (gender)":"Au nom du citoyen (Genre)","On behalf of citizen (phone number)":"Au nom du citoyen (Num\xe9ro de t\xe9l\xe9phone)","On behalf of citizen (address)":"Au nom du citoyen (Adresse)","On behalf of citizen (postal code)":"Au nom du citoyen (Code postal)","On behalf of citizen (postal address)":"Au nom du citoyen (Adresse postale)","On behalf of citizen (temporary c/o)":"Au nom du citoyen (C/o temporaire)","On behalf of citizen (temporary address)":"Au nom du citoyen (Adresse temporaire)","On behalf of citizen (temporary postal code)":"Au nom du citoyen (Code postal temporaire)","On behalf of citizen (temporary postal address)":"Au nom du citoyen (Adresse postale temporaire)","General Practitioner":"M\xe9decin g\xe9n\xe9raliste","General Practitioner (full name)":"M\xe9decin g\xe9n\xe9raliste (Nom complet)","General Practitioner (first name)":"M\xe9decin g\xe9n\xe9raliste (Pr\xe9nom)","General Practitioner (surname)":"M\xe9decin g\xe9n\xe9raliste (Nom de famille)","General Practitioner (business name)":"M\xe9decin g\xe9n\xe9raliste (Nom de l\'entreprise)","General Practitioner (business phone number)":"M\xe9decin g\xe9n\xe9raliste (t\xe9l\xe9phone de travail)","General Practitioner (address 1)":"M\xe9decin g\xe9n\xe9raliste (Adresse 1)","General Practitioner (address 2)":"M\xe9decin g\xe9n\xe9raliste (Adresse 2)","General Practitioner (address 3)":"M\xe9decin g\xe9n\xe9raliste (Adresse 3)","General Practitioner (postal code)":"M\xe9decin g\xe9n\xe9raliste (Code postal)","General Practitioner (postal address)":"M\xe9decin g\xe9n\xe9raliste (Adresse postale)","General Practitioner (country)":"M\xe9decin g\xe9n\xe9raliste (Pays)","Miscellaneous":"Divers","Todays date":"La date d\'aujourd\'hui","Gender":"Genre","Male":"Homme","Female":"Femme","Display type":"Type d\'affichage","Select service area":"Contr\xf4le d\'acc\xe8s","Which service area the bruker needs to have to have access to form":"Quelle zone de service le bruker doit avoir acc\xe8s au formulaire","Who fills out the form is controlled by a standard access service. If the form is to have access control other than standard, this must be selected here. Choose which representation conditions should be able to fill in the form.":"Qui remplit le formulaire est contr\xf4l\xe9 par un service d\'acc\xe8s standard. Si le formulaire doit avoir un contr\xf4le d\'acc\xe8s autre que standard, cela doit \xeatre s\xe9lectionn\xe9 ici. Choisissez quelles conditions de repr\xe9sentation doivent pouvoir remplir le formulaire.","Helsetjeneste (Full) (standard setting)":"Helsetjeneste (Full) (standardinnstilling)","Journalinnsyn (Basis +)":"Journalinnsyn (Basis +)","Registerinnsyn (Basis)":"Registerinnsyn (Basis)","Recipient component is configured in Helsenorge admin":"Le composant destinataire est configur\xe9 dans Helsenorge admin","Form builder":"Constructeur de Questionnaire","What would you like to do?":"Que voulez vous faire?","You can start a new questionnaire, or upload an existing one.":"Vous pouvez commencer un nouveau questionnaire, ou charger un questionnaire existant.","Allow free-text answer":"Permettre les r\xe9ponses en saisie libre","Use predefined valueset":"Utiliser des valueset pr\xe9d\xe9finis","Components":"Composants","Uploaded file is not a questionnaire":"Le fichier n\'est pas un questionnaire","Technical name of uploaded questionnaire is not equal to questionnaire technical name":"Le nom technique du questionnaire charg\xe9 n\'est pas \xe9gal au nom technique du questionnaire","Questionnaire with the same language as uploaded questionnaire already exists":"Un questionnaire avec le m\xeame language que le questionnaire existe d\xe9ja","Could not read uploaded file":"Impossible de lire le questionnaire charg\xe9","Upload questionnaire in additional language":"Charger le questionnaire dans une langue diff\xe9rente","Export translations":"Exporter les traductions","Representative relation":"R\xf4le du repr\xe9sentant","Represented by power of attorney? (true/false)":"Avocat de la personne repr\xe9sent\xe9e ? (vrai/faux)","Represented by power of attorney for non-consent competent? (true/false)":"Avocat de la personne repr\xe9sent\xe9e, hors d\'\xe9tat d\'exprimer son consentement? (vrai/faux)","Represented by parent? (true/false)":"Parent de la personne repr\xe9sent\xe9e ? (vrai/faux)","Represented by guardianship? (true/false)":"Tuteur de la personne repr\xe9sent\xe9e ? (vrai/faux)","Upload ValueSets as json files. Accepts a Bundle or ValueSet in a single file. It is possible to upload several files at once":"T\xe9l\xe9chargez les valeurs sous forme de fichiers json. G\xe8re le Bundle ou un ensemble de valeurs dans un fichier s\xe9par\xe9. Il est possible de t\xe9l\xe9charger plusieurs fichiers en m\xeame temps.","Upload ValueSet(s)":"T\xe9l\xe9charger des valeurs","Connect to print version (binary)":"Connectez-vous \xe0 la version imprimable (binaire)","For example Binary/35":"ex: Binary/35","Print version":"Version imprim\xe9e","Dynamic":"Dynamique","Open item links in same tab":"Ouvrir les liens des \xe9l\xe9ments dans le m\xeame onglet","Open all links in same tab":"Ouvrir tous les liens dans le m\xeame onglet","Update":"Mettre \xe0 jour","View":"Affichage","Choose if/where the component should be displayed":"Choisissez si/o\xf9 le composant doit \xeatre affich\xe9","Display in form filler and PDF":"Affichage sous forme et PDF","Display only in PDF":"Afficher uniquement en PDF","Display only in form filler":"Afficher uniquement dans le formulaire","Hide in form filler and PDF":"Masquer dans le formulaire et le PDF","Retrieve input data from field":"R\xe9cup\xe9rer les donn\xe9es d\'entr\xe9e du champ","data receiver does not have an earlier question":"le destinataire des donn\xe9es n\'a pas de question ant\xe9rieure","Progress indicator":"Indicateur de progression","Choose whether you want to hide the progress indicator. The progress indicator is only available if the form is using a step-view":"Choisissez si vous souhaitez masquer l\'indicateur de progression. L\'indicateur de progression n\'est disponible que si le formulaire utilise une vue par \xe9tapes.","Hide progress indicator":"Masquer l\'indicateur de progression","Step-view":"Vue par \xe9tapes","Select whether the group should be a step in step-view":"S\xe9lectionnez si le groupe doit \xeatre une vue \xe9tape par \xe9tape","Step in step-view":"\xc9tape par \xe9tape","Change":"Changement","Workflow request":"Demande de flux de travail","Should the form be included in a workflow at Helsenorge? This field is only used by Norsk helsenett.":"Le formulaire doit-il \xeatre inclus dans un Flux de travail chez Helsenorge? Ce champ n\'est utilis\xe9 que par Norsk helsenett.","Workflow":"Flux de travail","Request":"Demande","Show only answered options":"Afficher uniquement les options r\xe9pondues","Full display":"Affichage complet","Compact display":"Affichage compact","Choose whether all answer options should be displayed in PDF":"Choisissez si toutes les options de r\xe9ponse doivent \xeatre affich\xe9es en PDF","Scoring":"Score","Select whether the field should be a scoring field":"S\xe9lectionnez si le champ doit \xeatre un champ de score","Scoring field":"Champ de score","Summation field":"Champ de sommation","Select whether the field should be a summation field for section score or total score":"S\xe9lectionnez si le champ doit \xeatre un champ de somme pour le score de section ou le score total","Section score":"Score de section","Total score":"Score total","A section score summation field must be inside a group":"Un champ de sommation des scores de section doit \xeatre \xe0 l\'int\xe9rieur d\'un groupe","A summation field requires that a scoring field exists in the questionnaire":"Un champ de sommation n\xe9cessite qu\'un champ de score existe dans le questionnaire","A summation field cannot have a calculation formula":"Un champ de somme ne peut pas avoir de formule de calcul","A scoring field requires that a summation field exists in the questionnaire":"Un champ de score n\xe9cessite qu\'un champ de sommation existe dans le questionnaire","A scoring field must have a scoring value in all answer options":"Un champ de score doit avoir une valeur de score dans toutes les options de r\xe9ponse"}')},441:function(e,t,n){},442:function(e,t,n){},466:function(e,t,n){},467:function(e,t,n){},468:function(e,t,n){},469:function(e,t,n){},471:function(e,t,n){},472:function(e,t,n){},473:function(e,t,n){},530:function(e,t,n){},531:function(e,t,n){},532:function(e,t,n){},533:function(e,t,n){},534:function(e,t,n){},535:function(e,t,n){},537:function(e,t,n){},538:function(e,t,n){},539:function(e,t,n){},540:function(e,t,n){},541:function(e,t,n){},542:function(e,t,n){},543:function(e,t,n){},544:function(e,t,n){},546:function(e,t,n){},643:function(e,t){},790:function(e,t,n){},791:function(e,t,n){},792:function(e,t,n){},794:function(e,t,n){"use strict";n.r(t);n(441),n(442);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(0),a=n.n(i),r=n(281),o=n(52),s=n(420);var l=()=>{const e=[],t="0123456789abcdef";for(let n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(8|e[19],1),e[8]=e[13]=e[18]=e[23]="-",e.join("")};let d=function(e){return e.attachment="attachment",e.receiver="receiver",e.receiverComponent="receiver-component",e.boolean="boolean",e.choice="choice",e.date="date",e.dateTime="dateTime",e.decimal="decimal",e.display="display",e.group="group",e.inline="inline",e.integer="integer",e.number="number",e.openChoice="open-choice",e.predefined="predifined",e.quantity="quantity",e.reference="reference",e.string="string",e.text="text",e.time="time",e.url="url",e}({}),c=function(e){return e.code="code",e.display="display",e.system="system",e}({}),u=function(e){return e.answerOption="answerOption",e.answerValueSet="answerValueSet",e.code="code",e.definition="definition",e.enableBehavior="enableBehavior",e.enableWhen="enableWhen",e.extension="extension",e.initial="initial",e.linkId="linkId",e.maxLength="maxLength",e.prefix="prefix",e.text="text",e._text="_text",e.readOnly="readOnly",e.repeats="repeats",e.required="required",e.type="type",e}({}),p=function(e){return e.greaterThan=">",e.greaterThanOrEqual=">=",e.lessThan="<",e.lessThanOrEqual="<=",e.notEqual="!=",e.equal="=",e.exists="exists",e.notExists="notexists",e}({}),m=function(e){return e.saveCapabilityValueSet="http://helsenorge.no/fhir/ValueSet/sdf-save-capabilities",e.authenticationRequirementValueSet="http://ehelse.no/fhir/ValueSet/AuthenticationRequirement",e.canBePerformedByValueSet="http://ehelse.no/fhir/ValueSet/CanBePerformedBy",e.itemControlValueSet="http://hl7.org/fhir/ValueSet/questionnaire-item-control",e.presentationbuttonsValueSet="http://helsenorge.no/fhir/ValueSet/presentationbuttons",e.sotHeader="http://ehelse.no/fhir/ValueSet/SOTHeaders",e.hyperlinkTargetValueset="http://helsenorge.no/fhir/ValueSet/sdf-hyperlink-target",e.workflow="http://helsenorge.no/fhir/CodeSystem/workflow",e}({}),h=function(e){return e.renderOptionsCodeSystem="http://helsenorge.no/fhir/CodeSystem/RenderOptions",e.choiceRenderOptions="http://helsenorge.no/fhir/CodeSystem/ChoiceRenderOptions",e.attachmentRenderOptions="http://helsenorge.no/fhir/CodeSystem/AttachmentRenderOptions",e.progressIndicatorOptions="http://helsenorge.no/fhir/CodeSystem/ProgressIndicatorOptions",e.score="http://ehelse.no/Score",e.scoringFormulas="http://ehelse.no/scoringFormulas",e}({}),v=function(e){return e.authenticationRequirement="http://ehelse.no/fhir/StructureDefinition/sdf-authenticationrequirement",e.calculatedExpression="http://ehelse.no/fhir/StructureDefinition/sdf-calculatedExpression",e.canBePerformedBy="http://ehelse.no/fhir/StructureDefinition/sdf-canbeperformedby",e.endpoint="http://ehelse.no/fhir/StructureDefinition/sdf-endpoint",e.entryFormat="http://hl7.org/fhir/StructureDefinition/entryFormat",e.fhirPath="http://ehelse.no/fhir/StructureDefinition/sdf-fhirpath",e.generatePDF="http://ehelse.no/fhir/StructureDefinition/sdf-generatepdf",e.guidanceAction="http://helsenorge.no/fhir/StructureDefinition/sdf-guidanceaction",e.guidanceParam="http://helsenorge.no/fhir/StructureDefinition/sdf-guidanceparameter",e.hidden="http://hl7.org/fhir/StructureDefinition/questionnaire-hidden",e.itemControl="http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",e.markdown="http://hl7.org/fhir/StructureDefinition/rendering-markdown",e.maxDecimalPlaces="http://hl7.org/fhir/StructureDefinition/maxDecimalPlaces",e.maxSize="http://hl7.org/fhir/StructureDefinition/maxSize",e.maxValue="http://hl7.org/fhir/StructureDefinition/maxValue",e.minValue="http://hl7.org/fhir/StructureDefinition/minValue",e.minLength="http://hl7.org/fhir/StructureDefinition/minLength",e.optionReference="http://ehelse.no/fhir/StructureDefinition/sdf-optionReference",e.ordinalValue="http://hl7.org/fhir/StructureDefinition/ordinalValue",e.presentationbuttons="http://helsenorge.no/fhir/StructureDefinition/sdf-presentationbuttons",e.questionnaireUnit="http://hl7.org/fhir/StructureDefinition/questionnaire-unit",e.regEx="http://hl7.org/fhir/StructureDefinition/regex",e.repeatstext="http://ehelse.no/fhir/StructureDefinition/repeatstext",e.maxOccurs="http://hl7.org/fhir/StructureDefinition/questionnaire-maxOccurs",e.minOccurs="http://hl7.org/fhir/StructureDefinition/questionnaire-minOccurs",e.validationtext="http://ehelse.no/fhir/StructureDefinition/validationtext",e.navigator="http://helsenorge.no/fhir/StructureDefinition/sdf-questionnaire-navgiator-state",e.navigatorCodeSystem="http://helsenorge.no/fhir/CodeSystem/sdf-questionnaire-navigator-state ",e.fhirPathMaxValue="http://ehelse.no/fhir/StructureDefinition/sdf-maxvalue",e.fhirPathMinValue="http://ehelse.no/fhir/StructureDefinition/sdf-minvalue",e.sublabel="http://helsenorge.no/fhir/StructureDefinition/sdf-sublabel",e.saveCapability="http://helsenorge.no/fhir/StructureDefinition/sdf-save-capabilities",e.printVersion="http://helsenorge.no/fhir/StructureDefinition/sdf-questionnaire-print-version",e.hyperlinkTarget="http://helsenorge.no/fhir/StructureDefinition/sdf-hyperlink-target",e.globalVisibility="http://helsenorge.no/fhir/StructureDefintion/sdf-itemControl-visibility",e.copyExpression="http://hl7.org/fhir/StructureDefinition/cqf-expression",e.workflow="http://hl7.org/fhir/ValueSet/usage-context-type",e}({}),g=function(e){return e.helsetjeneste_full="urn:oid:2.16.578.1.12.4.1.1.8655",e.journalinnsyn_basispluss="urn:oid:2.16.578.1.12.4.1.1.7614",e.registerinnsyn_basis="urn:oid:2.16.578.1.12.4.1.1.7615",e}({}),b=function(e){return e.tjenesteomraade="urn:oid:2.16.578.1.12.4.1.1.7618",e.kanUtforesAv="http://helsenorge.no/fhir/KanUtforesAv",e}({});let f=function(e){return e.inline="inline",e.help="help",e.sidebar="sidebar",e.dropdown="drop-down",e.autocomplete="autocomplete",e.highlight="highlight",e.summary="summary",e.summaryContainer="summary-container",e.checkbox="check-box",e.radioButton="radio-button",e.yearMonth="yearMonth",e.year="year",e.receiverComponent="receiver-component",e.dynamic="dynamic",e.dataReceiver="data-receiver",e.step="step",e.score="score",e}({});const j=e=>({url:v.itemControl,valueCodeableConcept:{coding:[{system:m.itemControlValueSet,code:e}]}}),x=e=>{var t;const n=null===e||void 0===e||null===(t=e.extension)||void 0===t?void 0:t.find((e=>e.url===v.itemControl));if(n){var i;const e=null!==(i=n.valueCodeableConcept)&&void 0!==i&&i.coding?n.valueCodeableConcept.coding[0].code:void 0;if(e){const t=((e,t)=>{const n=Object.keys(e).filter((n=>e[n]===t));return n.length>0?n[0]:void 0})(f,e);return t?f[t]:void 0}}},y=(e,t)=>{var n,i;return void 0!==(null===(n=e.extension)||void 0===n||null===(i=n.filter((e=>e.url===v.itemControl)))||void 0===i?void 0:i.find((e=>{var n,i;return null===(n=e.valueCodeableConcept)||void 0===n||null===(i=n.coding)||void 0===i?void 0:i.some((e=>e.code===t))})))},O=(e,t)=>{var n,i,a,r,o;if(!(e=>{var t;return void 0!==(null===(t=e.extension)||void 0===t?void 0:t.find((e=>e.url===v.itemControl)))})(e))return j(t);const s=null===(n=e.extension)||void 0===n||null===(i=n.find((e=>e.url===v.itemControl)))||void 0===i||null===(a=i.valueCodeableConcept)||void 0===a||null===(r=a.coding)||void 0===r||null===(o=r.filter((e=>e.code!==t)))||void 0===o?void 0:o.map((e=>e.code));return y(e,t)||s.push(t),s.length>0?(e=>{const t={url:v.itemControl,valueCodeableConcept:{coding:[]}};return e.forEach((e=>{t.valueCodeableConcept.coding.push({system:m.itemControlValueSet,code:e})})),t})(s):null},k=(e,t)=>q(e)||D(e)||T(t),w=e=>x(e)===f.receiverComponent,C=e=>x(e)===f.dropdown,S=e=>x(e)===f.radioButton,I=e=>x(e)===f.checkbox,q=e=>x(e)===f.help,N=e=>x(e)===f.highlight,D=e=>x(e)===f.sidebar,T=e=>(null===e||void 0===e?void 0:e.type)===d.text&&x(e)===f.inline,A=e=>y(e,f.dataReceiver),E=e=>{var t,n,i;return q(e)&&((null===(t=e._text)||void 0===t||null===(n=t.extension)||void 0===n||null===(i=n.find((e=>e.url===v.markdown)))||void 0===i?void 0:i.valueMarkdown)||e.text)||""},P=(e,t,n)=>{const i=(e.extension||[]).filter((e=>e.url!==v.itemControl)),a=O(e,t);a&&i.push(a),n(qe(e.linkId,u.extension,i))};let V=function(e){return e.title="title",e.description="description",e.name="name",e.id="id",e.status="status",e.date="date",e.publisher="publisher",e.contact="contact",e.language="language",e.url="url",e.purpose="purpose",e.copyright="copyright",e.meta="meta",e.extension="extension",e.version="version",e.useContext="useContext",e}({}),F=function(e){return e.active="active",e.draft="draft",e.retired="retired",e.unknown="unknown",e}({});const L=(e,t,n)=>{const i=(e.extension||[]).filter((e=>e.url!==t.url));i.push(t),n(qe(e.linkId,u.extension,i))},R=(e,t,n)=>{const i=Array.isArray(t)?(e.extension||[]).filter((e=>-1===t.indexOf(e.url))):(e.extension||[]).filter((e=>e.url!==t));n(qe(e.linkId,u.extension,i))},M=[{url:v.optionReference,valueReference:{reference:"",display:"",id:l()}},{url:v.optionReference,valueReference:{reference:"",display:"",id:l()}}],B=e=>({extension:[{url:v.markdown,valueMarkdown:e}]}),_=(e,t)=>!(!e||!e.extension)&&e.extension.some((e=>e.url===t)),z=(e,t)=>{var n,i;return null===(n=e.extension)||void 0===n||null===(i=n.find((e=>e.url===t)))||void 0===i?void 0:i.valueString},U=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{url:v.guidanceAction,valueString:e}},H=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{url:v.guidanceParam,valueString:e}},W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return{url:v.hyperlinkTarget,valueCoding:{system:m.hyperlinkTargetValueset,code:"".concat(e)}}},K=e=>{const t=null===e||void 0===e?void 0:e.find((e=>e.url===v.hyperlinkTarget));if(t){var n;const e=null===(n=t.valueCoding)||void 0===n?void 0:n.code;if(e)return~~e}},G=e=>{var t;const n=e.filter((e=>e.url===v.questionnaireUnit));return n.length>0?null===(t=n[0].valueCoding)||void 0===t?void 0:t.code:void 0},Q="addItemCode",J="addQuestionnaireLanguage",Z="deleteItemCode",Y="updateItemCodeProperty",$="removeQuestionnaireLanguage",X="updateItemTranslation",ee="updateItemOptionTranslation",te="updateMetadataTranslation",ne="updateSettingTranslation",ie="updateContainedValueSetTranslation",ae="updateSidebarTranslation",re="updateQuestionnaireMetadata",oe="newItem",se="removeItemAttribute",le="deleteItem",de="deleteChildItems",ce="updateItem",ue="duplicateItem",pe="resetQuestionnaire",me="reorderItem",he="moveItem",ve="updateLinkId",ge="updateMarkedLinkId",be="UPDATE_VALUESET",fe="IMPORT_VALUESET",je="save",xe="updateSelectedNodesAction",ye=(e,t)=>({type:ge,linkId:e,parentArray:t}),Oe=(e,t)=>({type:Q,linkId:e,code:t}),ke=(e,t)=>({type:Z,linkId:e,index:t}),we=(e,t,n,i)=>({type:X,languageCode:e,linkId:t,propertyName:n,value:i}),Ce=(e,t)=>({type:re,propName:e,value:t}),Se=(e,t,n)=>({type:oe,item:e,order:t,index:n}),Ie=(e,t)=>({type:le,linkId:e,order:t}),qe=(e,t,n)=>({type:ce,linkId:e,itemProperty:t,itemValue:n}),Ne=e=>({type:pe,newState:e}),De=(e,t,n)=>({type:me,linkId:e,order:t,newIndex:n}),Te=(e,t,n,i)=>({type:he,linkId:e,newOrder:t,oldOrder:n,index:i});let Ae=function(e){return e.id="id",e.title="title",e.description="description",e.publisher="publisher",e.purpose="purpose",e.copyright="copyright",e}({}),Ee=function(e){return e.initial="initial",e.text="text",e.validationText="validationText",e.entryFormatText="entryFormatText",e.sublabel="sublabel",e.repeatsText="repeatsText",e.prefix="prefix",e}({});const Pe=[{code:F.active,display:"Active"},{code:F.draft,display:"Draft"},{code:F.retired,display:"Retired"},{code:F.unknown,display:"Unknown"}],Ve=[{code:"sticky",display:"Floating at the bottom of the screen (standard setting)"},{code:"none",display:"No button bar"},{code:"static",display:"Static (at the bottom of the questionnaire)"}],Fe=[{code:"3",display:"Required (standard setting)"},{code:"1",display:"Anonymous"},{code:"2",display:"Optional"}],Le=[{code:"1",display:"Save submitted questionnaire and intermediate save (standard setting)"},{code:"2",display:"Only submitted questionnaire is saved"},{code:"3",display:"No saving"}];let Re=function(e){return e.helseregister="Helseregister (Basis)",e.pasientjournal="Pasientjournal (Basis +)",e.helsehjelp="Helsehjelp (Full)",e.forvaltning="Forvaltning (Full)",e["sekund\xe6rbruk"]="Sekund\xe6rbruk (Full)",e}({}),Me=function(e){return e.helseregister="1",e.pasientjournal="2",e.helsehjelp="3",e.forvaltning="4",e["sekund\xe6rbruk"]="5",e}({});const Be=[{code:Me.helseregister,display:Re.helseregister,system:b.tjenesteomraade},{code:Me.pasientjournal,display:Re.pasientjournal,system:b.tjenesteomraade},{code:Me.helsehjelp,display:Re.helsehjelp,system:b.tjenesteomraade},{code:Me.forvaltning,display:Re.forvaltning,system:b.tjenesteomraade},{code:Me.sekund\u00e6rbruk,display:Re.sekund\u00e6rbruk,system:b.tjenesteomraade}],_e=e=>{var t;return null===(t=Be.filter((t=>t.code===e)))||void 0===t?void 0:t[0]};let ze=function(e){return e.Standard="Standard",e.Tilpasset="Tilpasset",e}({}),Ue=function(e){return e.Standard="Standard tilgangsstyring (innbygger selv, foreldre p\xe5 vegne av barn < 12 \xe5r, foreldre p\xe5 vegne av barn 12-16 \xe5r, representant med tildelt fullmakt, representant med ordin\xe6r fullmakt)",e.Tilpasset="Tilpasset tilgangsstyring",e}({});const He=[{code:ze.Standard,display:Ue.Standard},{code:ze.Tilpasset,display:Ue.Tilpasset}];let We=function(e){return e.kunInnbygger="1",e.barnUnder12="2",e.barnMellom12Og16="3",e.representantTildeltFullmakt="4",e.representantOrdinaerFullmakt="5",e}({}),Ke=function(e){return e.kunInnbygger="Kun innbygger selv",e.barnUnder12="Foreldre p\xe5 vegne av barn < 12 \xe5r",e.barnMellom12Og16="Foreldre p\xe5 vegne av barn 12-16 \xe5r",e.representantTildeltFullmakt="Representant med tildelt fullmakt",e.representantOrdinaerFullmakt="Representant med ordin\xe6r fullmakt",e}({});const Ge=[{code:We.barnUnder12,display:Ke.barnUnder12,system:b.kanUtforesAv},{code:We.barnMellom12Og16,display:Ke.barnMellom12Og16,system:b.kanUtforesAv},{code:We.representantTildeltFullmakt,display:Ke.representantTildeltFullmakt,system:b.kanUtforesAv},{code:We.representantOrdinaerFullmakt,display:Ke.representantOrdinaerFullmakt,system:b.kanUtforesAv}],Qe=e=>/^[A-Za-z0-9-.]{1,64}$/.test(e),Je=(e,t)=>{if(t&&e===t)return!0;return/^[A-Z]([A-Za-z0-9_]){0,254}$/.test(e)},Ze=e=>{switch(e){case g.journalinnsyn_basispluss:return _e(Me.pasientjournal);case g.registerinnsyn_basis:return _e(Me.helseregister);case g.helsetjeneste_full:default:return _e(Me.helsehjelp)}},Ye=e=>{var t;return e.meta&&e.meta.security&&e.meta.security.length&&(null===(t=et(e,b.kanUtforesAv))||void 0===t?void 0:t.map((e=>e.code)))||[]},$e=e=>{var t;if(null===(t=e.meta)||void 0===t||!t.security){const t=(e=>{var t;return e.useContext&&e.useContext.length>0&&(null===(t=e.useContext[0].valueCodeableConcept)||void 0===t?void 0:t.coding)&&e.useContext[0].valueCodeableConcept.coding.length>0&&e.useContext[0].valueCodeableConcept.coding[0].system||g.helsetjeneste_full})(e),n={...e.meta,security:[Ze(t)]};e={...e,meta:n}}return e},Xe=(e,t,n)=>{const i={...e.meta,security:t};n(Ce(V.meta,i))},et=(e,t)=>{var n,i;return null===(n=e.meta)||void 0===n||null===(i=n.security)||void 0===i?void 0:i.filter((e=>e.system===t))},tt=(e,t)=>{var n,i;return null===(n=e.meta)||void 0===n||null===(i=n.security)||void 0===i?void 0:i.filter((e=>e.system!==t))},nt={code:We.kunInnbygger,display:Ke.kunInnbygger,system:b.kanUtforesAv},it={code:"nb-NO",display:"Bokm\xe5l",localDisplay:"Bokm\xe5l"},at=[it,{code:"nn-NO",display:"Nynorsk",localDisplay:"Nynorsk"},{code:"se-NO",display:"Samisk",localDisplay:"Davvis\xe1megillii"},{code:"en-GB",display:"Engelsk",localDisplay:"English"},{code:"pl-PL",display:"Polsk",localDisplay:"Polskie"},{code:"ro-RO",display:"Rumensk",localDisplay:"Rom\xe2n\u0103"},{code:"lt-LT",display:"Litauisk",localDisplay:"Lietuvis"},{code:"ru-RU",display:"Russisk",localDisplay:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439"},{code:"fr-FR",display:"Fransk",localDisplay:"Fran\xe7ais"}],rt=e=>at.find((t=>t.code.toLowerCase()===e.toLowerCase())),ot=e=>at.some((t=>t.code.toLowerCase()===e.toLowerCase())),st=e=>{let{qMetadata:t,qAdditionalLanguages:n}=e;return at.filter((e=>{var i;return(null===(i=t.language)||void 0===i?void 0:i.toLowerCase())===e.code.toLowerCase()||n&&n[e.code]}))},lt=[{propertyName:Ae.title,label:"Tittel",markdown:!1,validate:void 0},{propertyName:Ae.id,label:"Id",markdown:!1,validate:(e,t,n)=>Qe(e)?t&&n&&!((e,t,n,i)=>{let{qAdditionalLanguages:a,qMetadata:r}=n;if(!a||Object.keys(a).length<1)return!1;const o=[],s=String(r[e]);return s&&o.push(s),Object.entries(a).filter((e=>{let[t]=e;return t!==i})).forEach((t=>{let[,n]=t;o.push(n.metaData[e])})),!o.some((e=>e===t))})(Ae.id,e,t,n)?"Id must be unique across languages":"":"Id must be 1-64 characters and only letters a-z, numbers, - and ."},{propertyName:Ae.description,label:"Description",markdown:!1,validate:void 0},{propertyName:Ae.publisher,label:"Publisher",markdown:!1,validate:void 0},{propertyName:Ae.purpose,label:"Purpose",markdown:!0,validate:void 0},{propertyName:Ae.copyright,label:"Copyright",markdown:!0,validate:void 0}],dt={[v.printVersion.toString()]:{extension:v.printVersion,label:"Print version",generate:e=>({url:v.printVersion,valueReference:{reference:e}}),getValue:e=>{var t;return null===e||void 0===e||null===(t=e.valueReference)||void 0===t?void 0:t.reference}}},ct=(e,t,n,i)=>t[e].items[n]&&t[e].items[n][i]||"",ut="http://ehelse.no/fhir/ValueSet/Predefined",pt=[{url:ut,resourceType:"ValueSet",id:"1101",version:"1.0",name:"urn:oid:1101",title:"Ja / Nei (structor)",status:"draft",publisher:"NHN",compose:{include:[{system:"urn:oid:2.16.578.1.12.4.1.1101",concept:[{code:"1",display:"Ja"},{code:"2",display:"Nei"}]}]}},{url:ut,resourceType:"ValueSet",id:"1102",version:"1.0",name:"urn:oid:1102",title:"Ja / Nei / Vet ikke (structor)",status:"draft",publisher:"Direktoratet for e-helse",compose:{include:[{system:"urn:oid:2.16.578.1.12.4.1.1102",concept:[{code:"1",display:"Ja"},{code:"2",display:"Nei"},{code:"3",display:"Vet ikke"}]}]}},{url:ut,resourceType:"ValueSet",id:"9523",version:"1.0",name:"urn:oid:9523",title:"Ja / Nei / Usikker (structor)",status:"draft",publisher:"Direktoratet for e-helse",compose:{include:[{system:"urn:oid:2.16.578.1.12.4.1.9523",concept:[{code:"1",display:"Ja"},{code:"2",display:"Nei"},{code:"3",display:"Usikker"}]}]}}];var mt=n(435);const ht="questionnaire-store",vt=async()=>{try{return await Object(mt.a)("structor-db",1,{upgrade(e){e.objectStoreNames.contains(ht)||e.createObjectStore(ht,{autoIncrement:!1})}})}catch(e){return console.error(e),Promise.reject("Unable to initialize IndexedDB")}},gt=()=>"urn:uuid:".concat(l()),bt=e=>"urn:"===e.substr(0,4)||"http://"===e.substr(0,7)||"https://"===e.substr(0,8);let ft=function(e){return e.valueSetTqqc="http://ehelse.no/fhir/ValueSet/TQQC",e}({}),jt=function(e){return e.totalScore="TS",e.sectionScore="SS",e.questionScore="QS",e}({}),xt=function(e){return e.totalScore="Total score",e.sectionScore="Section score",e.questionScore="Question score",e}({});const yt="QUANTITY_UNIT_TYPE_NOT_SELECTED",Ot="QUANTITY_UNIT_TYPE_CUSTOM",kt=[{system:"",code:yt,display:"No unit"},{system:"http://unitsofmeasure.org",code:"cm",display:"centimeter"},{system:"http://unitsofmeasure.org",code:"kg",display:"kilo"},{system:"http://unitsofmeasure.org",code:"a",display:"year"},{system:"http://unitsofmeasure.org",code:"mo",display:"month"},{system:"http://unitsofmeasure.org",code:"d",display:"day"},{system:"",code:Ot,display:"Custom"}],wt=[{code:p.exists,display:"is answered"},{code:p.notExists,display:"is not answered"},{code:p.equal,display:"is equal to"},{code:p.notEqual,display:"is not equal"}],Ct=[{code:p.exists,display:"is answered"},{code:p.notExists,display:"is not answered"},{code:p.equal,display:"is equal to"},{code:p.notEqual,display:"is not equal"}],St=[{code:p.exists,display:"is answered"},{code:p.notExists,display:"is not answered"},{code:p.equal,display:"is equal to"},{code:p.notEqual,display:"is not equal"},{code:p.greaterThan,display:"is later than"},{code:p.lessThan,display:"is earlier than"},{code:p.greaterThanOrEqual,display:"is later than or equal"},{code:p.lessThanOrEqual,display:"is earlier than or equal"}],It=[{code:p.exists,display:"is answered"},{code:p.notExists,display:"is not answered"},{code:p.equal,display:"is equal to"},{code:p.notEqual,display:"is not equal"},{code:p.greaterThan,display:"is greater than"},{code:p.lessThan,display:"is less than"},{code:p.greaterThanOrEqual,display:"is greater than or equal"},{code:p.lessThanOrEqual,display:"is less than or equal"}],qt=e=>((null===e||void 0===e?void 0:e.type)===d.text||(null===e||void 0===e?void 0:e.type)===d.string)&&null!==e&&void 0!==e&&e.initial&&e.initial[0]&&e.initial[0].valueString||"",Nt=e=>(null===e||void 0===e?void 0:e.prefix)||"",Dt=e=>{var t,n;return(null===e||void 0===e||null===(t=e.extension)||void 0===t||null===(n=t.find((e=>e.url===v.sublabel)))||void 0===n?void 0:n.valueMarkdown)||""},Tt=e=>{var t,n;return(null===e||void 0===e||null===(t=e.extension)||void 0===t||null===(n=t.find((e=>e.url===v.repeatstext)))||void 0===n?void 0:n.valueString)||""},At=e=>{var t,n;return(null===e||void 0===e||null===(t=e.extension)||void 0===t||null===(n=t.find((e=>e.url===v.validationtext)))||void 0===n?void 0:n.valueString)||""},Et=e=>{var t,n;return(null===e||void 0===e||null===(t=e.extension)||void 0===t||null===(n=t.find((e=>e.url===v.entryFormat)))||void 0===n?void 0:n.valueString)||""},Pt=e=>{var t;return(null===e||void 0===e||null===(t=e.find((e=>e.url===v.markdown)))||void 0===t?void 0:t.valueMarkdown)||""},Vt=e=>/^[A-Za-z0-9_]{1,254}$/.test(e),Ft=e=>{var t;return!w(e)&&void 0!==(null===(t=e.code)||void 0===t?void 0:t.find((e=>e.system===ft.valueSetTqqc)))},Lt=j(f.checkbox),Rt=j(f.dropdown),Mt=j(f.radioButton),Bt=[{code:"0",display:"Not set"},{code:"1",display:"Save submitted questionnaire and intermediate save (standard setting)"},{code:"2",display:"Only submitted questionnaire is saved"},{code:"3",display:"No saving"}],_t=[{code:"0",display:"Not set"},{code:"SS",display:"Section score"},{code:"TS",display:"Total score"}],zt={system:ft.valueSetTqqc,code:"1",display:"Technical endpoint for receiving QuestionnaireResponse"},Ut={system:h.score,code:f.score,display:f.score},Ht={system:h.scoringFormulas,code:jt.questionScore,display:xt.questionScore},Wt=[{code:"hide-sidebar",display:"Hide sidebar texts"},{code:"hide-help",display:"Hide help texts"},{code:"hide-sublabel",display:"Hide sublabel texts"},{code:"hide-progress",display:"Hide progress indicator"}];let Kt=function(e){return e.hideSidebar="hide-sidebar",e.hideHelp="hide-help",e.hideSublabel="hide-sublabel",e.hideProgress="hide-progress",e}({});const Gt=(e,t)=>{var n,i;return void 0!==(null===(n=e.extension)||void 0===n||null===(i=n.filter((e=>e.url===v.globalVisibility)))||void 0===i?void 0:i.find((e=>{var n,i;return null===(n=e.valueCodeableConcept)||void 0===n||null===(i=n.coding)||void 0===i?void 0:i.some((e=>e.code===t))})))},Qt=(e,t)=>{var n,i,a,r,o;if(!(e=>{var t;return void 0!==(null===(t=e.extension)||void 0===t?void 0:t.find((e=>e.url===v.globalVisibility)))})(e))return(e=>{let t="";return t=e===Kt.hideProgress?h.progressIndicatorOptions:h.attachmentRenderOptions,{url:v.globalVisibility,valueCodeableConcept:{coding:[{system:t,code:e,display:Xt(e)}]}}})(t);const s=null===(n=e.extension)||void 0===n||null===(i=n.find((e=>e.url===v.globalVisibility)))||void 0===i||null===(a=i.valueCodeableConcept)||void 0===a||null===(r=a.coding)||void 0===r||null===(o=r.filter((e=>e.code!==t)))||void 0===o?void 0:o.map((e=>e.code));return Gt(e,t)||s.push(t),s.length>0?(e=>{const t={url:v.globalVisibility,valueCodeableConcept:{coding:[]}};return e.forEach((e=>{t.valueCodeableConcept.coding.push(en(e))})),t})(s):null},Jt=e=>Gt(e,Kt.hideSidebar),Zt=e=>Gt(e,Kt.hideSublabel),Yt=e=>Gt(e,Kt.hideProgress),$t=(e,t,n)=>{const i=(e.extension||[]).filter((e=>e.url!==v.globalVisibility)),a=Qt(e,t);a&&i.push(a),n(Ce(V.extension,i))},Xt=e=>{var t;return null===(t=Wt.find((t=>t.code===e)))||void 0===t?void 0:t.display},en=e=>{let t="";return t=e===Kt.hideProgress?h.progressIndicatorOptions:h.attachmentRenderOptions,{system:t,code:e,display:Xt(e)}};var tn=n(164),nn=n(1);const an=()=>(void 0!==rn.qMetadata.id&&""!==rn.qMetadata.id||(rn.qMetadata.id=l()),rn),rn={isDirty:!1,qItems:{},qOrder:[],qMetadata:{title:"",description:"",resourceType:"Questionnaire",language:it.code,name:"",status:"draft",publisher:"NHN",meta:{profile:["http://ehelse.no/fhir/StructureDefinition/sdf-Questionnaire"],tag:[{system:"urn:ietf:bcp:47",code:it.code,display:it.display}],security:[_e(Me.helsehjelp)]},useContext:[],contact:[{name:"http://www.nhn.no"}],subjectType:["Patient"],extension:[{url:"http://helsenorge.no/fhir/StructureDefinition/sdf-sidebar",valueCoding:{system:"http://helsenorge.no/fhir/ValueSet/sdf-sidebar",code:"1"}},{url:"http://helsenorge.no/fhir/StructureDefinition/sdf-information-message",valueCoding:{system:"http://helsenorge.no/fhir/ValueSet/sdf-information-message",code:"1"}},{url:v.globalVisibility,valueCodeableConcept:{coding:[en(Kt.hideHelp),en(Kt.hideSublabel)]}}]},qContained:pt,qCurrentItem:void 0,qAdditionalLanguages:{}};function on(e,t){if(0===e.length)return t;const n=t.findIndex((t=>t.linkId===e[0]));return on(e.slice(1),t[n].items)}function sn(e,t){return e.forEach((e=>{t.push(e.linkId),sn(e.items,t)})),t}function ln(e,t){t&&Object.values(t).forEach((t=>{delete t.items[e]}))}function dn(e,t){const n=on(t.order,e.qOrder),i=n.findIndex((e=>e.linkId===t.linkId)),a=(t,n)=>{const i=JSON.parse(JSON.stringify(e.qItems[t.linkId])),r=l();var o,s;return n[i.linkId]=r,i.linkId=r,i.enableWhen&&(i.enableWhen=i.enableWhen.map((e=>({...e,question:n[e.question]||e.question})))),e.qItems[i.linkId]=i,o=t.linkId,s=r,e.qAdditionalLanguages&&Object.values(e.qAdditionalLanguages).forEach((e=>{const t=e.items[o];t&&(e.items[s]=t)})),{linkId:i.linkId,items:t.items.map((e=>a(e,n)))}},r=a(n[i],{});n.splice(i+1,0,r),e.qCurrentItem={linkId:r.linkId,parentArray:t.order}}const cn=(e,t,n)=>{let i=null,a=-1;const r=(t,i)=>{for(let o=0;o<t.length;o++){a++;const s=i.concat(a);if(t[o].title===e)return s;if(t[o].children&&t[o].children.length>0&&!n.includes(t[o].title)){const e=r(t[o].children,s);if(e)return e}}return null};return i=r(t,[]),i||[]},un=(e,t,n)=>{const i=new Set(n.map((e=>e.node.title))),a=e=>{if(!e.children||0===e.children.length)return!0;for(const t of e.children){if(!i.has(t.title))return!1;if(!a(t))return!1}return!0};return i.add(e.title),a(t)},pn=(e,t,n,i)=>{let a=e.path.slice(0,-1);const r=[...n];for(;a.length>0;){const n=cn(a[a.length-1],t,i),o=Object(tn.b)({treeData:t,path:n,getNodeKey:e=>{let{treeIndex:t}=e;return t}});if(!(o&&o.node&&un(e.node,o.node,r)))break;r.some((e=>e.node.title===o.node.title))||r.push({node:o.node,path:a}),a=a.slice(0,-1)}return r};function mn(e,t,n){const i=[],a=(e,t)=>{if(!n.some((t=>t.node.title===e.title))&&(i.push({node:e,path:t}),e.children))for(const n of e.children)a(n,[...t,n.title])};return a(e,t),i}const hn=(e,t)=>{let n=[...t];const i=e=>{if(n=n.filter((t=>t.node.title!==e.title)),e.children)for(const t of e.children)i(t)};return i(e),n},vn=(e,t,n,i)=>{let a=e.path.slice(0,-1),r=[...n];for(;a.length>0;){const e=cn(a[a.length-1],t,i),n=Object(tn.b)({treeData:t,path:e,getNodeKey:e=>{let{treeIndex:t}=e;return t}});if(!n||!n.node)break;r=r.filter((e=>e.node.title!==n.node.title)),a=a.slice(0,-1)}return r},gn=(e,t)=>{const n=[],i=(t,n)=>{for(let a=0;a<t.length;a++){if(n.push(t[a].title),t[a].title===e)return!0;if(t[a].children){if(i(t[a].children,n))return!0}n.pop()}return!1};return i(t,n)?n:null};function bn(e,t){const{event:n,firstSelectedIndex:i,selectedNodes:a,setSelectedNodes:r,setFirstSelectedIndex:o,extendedNode:s,orderTreeData:l,node:d,collapsedNodes:c}=t,u=cn(s.node.title,l,c),{treeIndex:p}=s;n.shiftKey&&null!==i&&void 0!==p?function(e,t,n,i,a,r,o){if(!t)return;const s=e.slice(0,-1),l=t[t.length-1],d=e[e.length-1];let c=Math.min(l,d),u=Math.max(l,d);l>d&&(c-=1,u-=1);let p=[];const m=new Set(i.map((e=>e.node.title)));for(let h=c+1;h<=u;h++){const e=Object(tn.b)({treeData:n,path:[...s,h],getNodeKey:e=>{let{treeIndex:t}=e;return t}});if(e&&e.node){const t=gn(e.node.title,n)||[];if(!m.has(e.node.title)){const n=mn(e.node,t,i);p.push(...n),n.forEach((e=>m.add(e.node.title)))}}}p=pn(a,n,[...p,...i],r),o(p)}(u,i,l,a,s,c,r):function(e,t,n,i,a,r){let o=[];e((e=>{if(e.some((e=>e.node.title===t.title))){let r=hn(t,e);return r=vn(n,i,r,a),r}return o=mn(t,n.path,e),[...e,...o]})),o.length>0&&e(pn(n,i,[...o,...r],a))}(r,d,s,l,c,a),u&&o(u)}const fn=Object(s.a)(((e,t)=>{switch(t.type!==pe&&t.type!==je&&t.type!==ge&&(e.isDirty=!0),t.type){case Q:!function(e,t){var n;e.qItems[t.linkId]?(e.qItems[t.linkId].code||(e.qItems[t.linkId].code=[]),null===(n=e.qItems[t.linkId].code)||void 0===n||n.push(t.code)):console.error('Trying to add "code" to non-extistent item')}(e,t);break;case Z:!function(e,t){if(!e.qItems[t.linkId])return void console.error('Trying to delete "code" from non-extistent item');const{code:n}=e.qItems[t.linkId];var i;n&&n.length>1?null===(i=e.qItems[t.linkId].code)||void 0===i||i.splice(t.index,1):delete e.qItems[t.linkId].code}(e,t);break;case Y:!function(e,t){const n=e.qItems[t.linkId].code;n?n&&n[t.index]&&(n[t.index][t.property]=t.value):console.error('Trying to update "code" from non-extistent item or code')}(e,t);break;case J:!function(e,t){e.qAdditionalLanguages||(e.qAdditionalLanguages={}),void 0!==t.translation.metaData.id&&""!==t.translation.metaData.id||(t.translation.metaData.id=l()),e.qAdditionalLanguages[t.additionalLanguageCode]=t.translation}(e,t);break;case $:!function(e,t){e.qAdditionalLanguages||(e.qAdditionalLanguages={}),delete e.qAdditionalLanguages[t.languageCode]}(e,t);break;case pe:!function(e,t){const n=t.newState||an();e.isDirty=n.isDirty,e.qOrder=n.qOrder,e.qItems=n.qItems,e.qMetadata=n.qMetadata,e.qContained=null===n||void 0===n?void 0:n.qContained,e.qAdditionalLanguages=n.qAdditionalLanguages,e.qCurrentItem=n.qCurrentItem}(e,t);break;case je:e.isDirty=!1;break;case re:!function(e,t){let{propName:n,value:i}=t;if(console.log("propName",n),console.log("value",i),e.qMetadata={...e.qMetadata,[n]:i},V.title===n){const t=e.qMetadata.useContext;if(void 0!==t&&t.length>0){var a;const e=null===(a=t[0].valueCodeableConcept)||void 0===a?void 0:a.coding;void 0!==e&&e.length>0&&(e[0].display=i)}}}(e,t);break;case oe:!function(e,t){var n;const i=t.item;e.qItems[i.linkId]=i;const a=[];1===(null===(n=i.item)||void 0===n?void 0:n.length)&&(e.qItems[i.item[0].linkId]=i.item[0],a.push({linkId:i.item[0].linkId,items:[]}));const r=on(t.order,e.qOrder),o={linkId:i.linkId,items:a};if(t.index||0===t.index){const n=r.filter(((n,i)=>k(e.qItems[n.linkId])&&i<=(t.index||0)));r.splice(t.index+n.length,0,o)}else r.push(o);const s=e.qItems[t.order[t.order.length-1]];k(i,s)||(e.qCurrentItem={linkId:i.linkId,parentArray:t.order})}(e,t);break;case le:!function(e,t){var n;const i=on(t.order,e.qOrder),a=i.findIndex((e=>e.linkId===t.linkId));[t.linkId,...sn(i[a].items,[])].forEach((t=>{delete e.qItems[t],ln(t,e.qAdditionalLanguages)})),i.splice(a,1),(null===(n=e.qCurrentItem)||void 0===n?void 0:n.linkId)===t.linkId&&(e.qCurrentItem=void 0)}(e,t);break;case de:!function(e,t){const n=on(t.order,e.qOrder).find((e=>e.linkId===t.linkId));if(!n)return;sn(n.items,[]).forEach((t=>{delete e.qItems[t],ln(t,e.qAdditionalLanguages)})),n.items=[]}(e,t);break;case ce:!function(e,t){t.itemValue&&!(()=>{const{itemProperty:e,itemValue:n}=t;return e===u.extension&&0===n.length})()?(e.qItems[t.linkId]={...e.qItems[t.linkId],[t.itemProperty]:t.itemValue},"choice"===t.itemValue&&Ft(e.qItems[t.linkId])&&(e.qItems[t.linkId].extension=[...e.qItems[t.linkId].extension||[],...M])):delete e.qItems[t.linkId][t.itemProperty]}(e,t);break;case X:!function(e,t){e.qAdditionalLanguages&&(e.qAdditionalLanguages[t.languageCode].items[t.linkId]||(e.qAdditionalLanguages[t.languageCode].items[t.linkId]={}),e.qAdditionalLanguages[t.languageCode].items[t.linkId][t.propertyName]=t.value)}(e,t);break;case ee:!function(e,t){if(e.qAdditionalLanguages){const n=e.qAdditionalLanguages[t.languageCode].items[t.linkId];n.answerOptions||(n.answerOptions={}),n.answerOptions[t.optionCode]=t.text}}(e,t);break;case ie:!function(e,t){if(e.qAdditionalLanguages){const n=e.qAdditionalLanguages[t.languageCode].contained;n[t.valueSetId]||(n[t.valueSetId]={concepts:{}}),n[t.valueSetId].concepts[t.conceptId]=t.translation}}(e,t);break;case te:!function(e,t){e.qAdditionalLanguages&&(e.qAdditionalLanguages[t.languageCode].metaData[t.propertyName]=t.translation)}(e,t);break;case ne:!function(e,t){if(e.qAdditionalLanguages){const n=e.qAdditionalLanguages[t.languageCode].settings;t.translatedValue?n[t.extension]=t.translatedValue:delete n[t.extension]}}(e,t);break;case ae:!function(e,t){if(e.qAdditionalLanguages){const n=e.qAdditionalLanguages[t.languageCode].sidebarItems;n[t.linkId]||(n[t.linkId]={markdown:""}),n[t.linkId].markdown=t.value}}(e,t);break;case ue:dn(e,t);break;case me:!function(e,t){const n=on(t.order,e.qOrder),i=n.findIndex((e=>e.linkId===t.linkId));if(-1===i)throw new Error("Could not find item to move");const a=n.filter(((n,i)=>k(e.qItems[n.linkId])&&i<=t.newIndex)),r=n.splice(i,1);n.splice(t.newIndex+a.length,0,r[0])}(e,t);break;case he:!function(e,t){const n=on(t.oldOrder,e.qOrder),i=n.findIndex((e=>e.linkId===t.linkId)),a=n[i].items,r=on(t.newOrder,e.qOrder);if(t.index||0===t.index){const n=r.filter(((n,i)=>k(e.qItems[n.linkId])&&i<=(t.index||0)));r.splice(t.index+n.length,0,{linkId:t.linkId,items:a})}else r.push({linkId:t.linkId,items:a});n.splice(i,1),e.qCurrentItem&&(e.qCurrentItem={...e.qCurrentItem,parentArray:t.newOrder})}(e,t);break;case be:!function(e,t){var n,i;const a=null!==(n=null===e||void 0===e||null===(i=e.qContained)||void 0===i?void 0:i.findIndex((e=>e.id===t.item.id)))&&void 0!==n?n:-1;e.qContained&&a>=0?e.qContained[a]=t.item:e.qContained=[...(null===e||void 0===e?void 0:e.qContained)||[],t.item]}(e,t);break;case fe:!function(e,t){e.qContained=[...(null===e||void 0===e?void 0:e.qContained)||[],...t.items]}(e,t);break;case ve:!function(e,t){const{qItems:n,qOrder:i,qAdditionalLanguages:a}=e,{oldLinkId:r,newLinkId:o,parentArray:s}=t,l={...n[r],linkId:o};n[o]=l,delete n[r];const d=on(s,i).find((e=>e.linkId===r));if(!d)throw new Error("Trying to update linkId that doesn't exist");d.linkId=o,Object.values(n).forEach((e=>{e.enableWhen&&e.enableWhen.forEach((e=>{e.question===r&&(e.question=o)}))})),a&&Object.values(a).forEach((e=>{const t=e.items[r];e.items[o]=t,delete e.items[r]})),e.qCurrentItem&&(e.qCurrentItem={...e.qCurrentItem,linkId:o})}(e,t);break;case se:!function(e,t){e.qItems[t.linkId]&&e.qItems[t.linkId][t.itemProperty]&&delete e.qItems[t.linkId][t.itemProperty]}(e,t);break;case ge:!function(e,t){t.linkId?e.qCurrentItem={linkId:t.linkId,parentArray:t.parentArray||[]}:e.qCurrentItem=void 0}(e,t);break;case xe:bn(0,t)}})),jn=Object(i.createContext)({state:an(),dispatch:()=>null}),xn=e=>{const[t,n]=Object(i.useReducer)(fn,an());return Object(i.useEffect)((()=>{const e=performance.now();(async()=>{await(async e=>{const t=await vt();if(t){const n=t.transaction(ht,"readwrite"),i=n.objectStore(ht),a=await i.put(e,1);return await n.done,t.close(),a}return Promise.reject("Not storing to IndexedDB because database is not initialized")})(JSON.parse(JSON.stringify(t)))})(),console.debug("State saved in ".concat(Math.round(performance.now()-e),"ms"))}),[t]),Object(nn.jsx)(jn.Provider,{value:{state:t,dispatch:n},children:e.children})},yn=e=>{var t;const n=[];return null===e||void 0===e||null===(t=e.compose)||void 0===t||t.include.forEach((e=>{var t;null===e||void 0===e||null===(t=e.concept)||void 0===t||t.forEach((t=>{n.push({code:t.code,system:e.system,display:t.display})}))})),n};function On(e){function t(e,n){let i;var a;void 0!==e.item&&e.item.length>0?i=null===(a=e.item)||void 0===a?void 0:a.map((e=>t(e,n))):i=[];const r={linkId:e.linkId,items:i};return delete e.item,n[e.linkId]=e,r}const n={},i=null===e||void 0===e?void 0:e.map((e=>t(e,n)));return{qItems:n,qOrder:i||[]}}function kn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null===e||void 0===e||e.forEach((e=>{const a=null===t||void 0===t?void 0:t.find((t=>t.linkId===e.linkId));D(e)?i[e.linkId]=function(e){var t;const n=Pt(null===e||void 0===e||null===(t=e._text)||void 0===t?void 0:t.extension);return{markdown:n}}(a):(n[e.linkId]=function(e){var t,n,i;return{answerOptions:function(e){const t={};return null===e||void 0===e||e.forEach((e=>{e.valueCoding&&e.valueCoding.code&&(t[e.valueCoding.code]=e.valueCoding.display||"")})),t}(null===e||void 0===e?void 0:e.answerOption),entryFormatText:Et(e),text:(null===e||void 0===e||null===(t=e._text)||void 0===t||null===(n=t.extension)||void 0===n||null===(i=n.find((e=>e.url===v.markdown)))||void 0===i?void 0:i.valueMarkdown)||(null===e||void 0===e?void 0:e.text)||"",validationText:At(e),initial:qt(e),sublabel:Dt(e),prefix:Nt(e),repeatsText:Tt(e)}}(a),kn(e.item,null===a||void 0===a?void 0:a.item,n,i))})),{items:n,sidebarItems:i}}function wn(e,t){const n=function(e,t){if(!e||!t)return{};const n={};return e.forEach((e=>{const i=t.find((t=>t.id===e.id));if(e.id&&i){const t=yn(e),a=yn(i),r={};null===t||void 0===t||t.forEach((e=>{const t=null===a||void 0===a?void 0:a.find((t=>t.code===e.code&&t.system===e.system));t&&(r[t.code||""]=t.display||"")})),n[e.id]={concepts:r}}})),n}(e.contained,t.contained),{items:i,sidebarItems:a}=kn(e.item,t.item);return{contained:n,items:i,metaData:function(e){const t={};return lt.forEach((n=>{t[n.propertyName]=e[n.propertyName]||""})),t}(t),sidebarItems:a,settings:function(e){const t={};return Object.values(dt).forEach((n=>{var i;if(!n)return;const a=null===(i=e.extension)||void 0===i?void 0:i.find((e=>e.url===n.extension));a&&(t[n.extension]=a)})),t}(t)}}function Cn(e){const t=e.split("-");return"".concat(t[0],"-").concat(t[1].toUpperCase())}function Sn(e){let t,n={};"Bundle"===e.resourceType&&e.entry?(t=e.entry[0].resource,n=function(e){if(!e.entry||e.entry.length<2)return{};const t=e.entry[0].resource,n={};return e.entry.forEach(((e,i)=>{var a;const r=e.resource;0!==i&&r.language&&r.language.toLowerCase()!==(null===(a=t.language)||void 0===a?void 0:a.toLowerCase())&&ot(r.language)?n[Cn(r.language)]=wn(t,r):0!==i&&console.error("Skipping questionnaire with index ".concat(i," and language '").concat(r.language,"' due to missing or unsupported language"))})),n}(e)):t=e,t=$e(t),t=(e=>{var t,n,i,a,r,o,s;const l=null===(t=e)||void 0===t||null===(n=t.extension)||void 0===n||null===(i=n.find((e=>e.url===v.canBePerformedBy)))||void 0===i||null===(a=i.valueCoding)||void 0===a?void 0:a.code,d=null===(r=e)||void 0===r||null===(o=r.meta)||void 0===o||null===(s=o.security)||void 0===s?void 0:s.find((e=>e.system===b.kanUtforesAv));if(l){var c,u;const t=null===(c=e)||void 0===c||null===(u=c.extension)||void 0===u?void 0:u.filter((e=>e.url!==v.canBePerformedBy));if(!d&&"2"===l){var p;const t=(null===(p=e.meta)||void 0===p?void 0:p.security)||[];null===t||void 0===t||t.push(nt);const n={...e.meta,security:t};e={...e,meta:n}}e={...e,extension:t}}return e})(t);const i=(e=>{let{resourceType:t,language:n,id:i,name:a,title:r,description:o,version:s,status:l,publisher:d,meta:c,useContext:u,contact:p,subjectType:m,extension:h,purpose:v,copyright:g,date:b,url:f}=e;return{resourceType:t,language:n,id:i,name:a,title:r,description:o,version:s,status:l,publisher:d,meta:c,useContext:u,contact:p,subjectType:m,extension:h,purpose:v,copyright:g,date:b,url:f}})(t);const a=t.contained||[],{qItems:r,qOrder:o}=On(t.item);pt.forEach((e=>{a.find((t=>t.id===e.id))||a.push(e)}));return{isDirty:!1,qItems:r,qOrder:o,qMetadata:i,qContained:a,qAdditionalLanguages:n}}var In=n(813);n(466);var qn=e=>{let{title:t,onClick:n,id:i,type:a="button",icon:r,variant:o}=e;return Object(nn.jsxs)("button",{type:a,className:"regular-btn ".concat(o),id:i,onClick:n,children:[r&&Object(nn.jsx)("i",{className:r})," ",t]})};n(467);var Nn=e=>{let{type:t,title:n,onClick:i,color:a="white",size:r}=e;const o=["iconBtn"];a&&o.push(a),r&&o.push(r);let s="";switch(t){case"back":s="ion-ios-arrow-back";break;case"forward":s="ion-ios-arrow-forward";break;case"info":s="ion-ios-information-outline";break;default:s="ion-close-round"}return Object(nn.jsx)("button",{className:o.join(" "),title:n,onClick:i,children:Object(nn.jsx)("i",{className:s})})};n(468);var Dn=e=>{let{close:t,children:n,title:i,size:a="small",id:r,bottomCloseText:o}=e;const{t:s}=Object(In.a)();return Object(nn.jsx)("div",{className:"overlay align-everything",children:Object(nn.jsxs)("div",{className:"modal ".concat(a),id:r,children:[Object(nn.jsxs)("div",{className:"title",children:[Object(nn.jsx)(Nn,{type:"x",title:s("Close"),onClick:t}),Object(nn.jsx)("h1",{children:i})]}),Object(nn.jsx)("div",{className:"content",children:n}),o&&Object(nn.jsx)("div",{className:"modal-btn-bottom",children:Object(nn.jsx)("div",{className:"center-text",children:Object(nn.jsx)(qn,{title:o,type:"button",variant:"secondary",onClick:t})})})]})})};n(469);var Tn=()=>Object(nn.jsxs)("div",{className:"spinner-box",children:[Object(nn.jsx)("div",{className:"configure-border-1",children:Object(nn.jsx)("div",{className:"configure-core"})}),Object(nn.jsx)("div",{className:"configure-border-2",children:Object(nn.jsx)("div",{className:"configure-core"})})]}),An=n(415),En=n(297),Pn=n(228);n(470);const Vn=e=>e.replace(/\s/g,"-").toLocaleLowerCase(),Fn=e=>({valueCoding:{id:l(),code:"",system:e,display:""}}),Ln=()=>({linkId:l(),type:d.display,text:"",extension:[],code:[],item:[],required:!1}),Rn=(e,t)=>{const n={linkId:l(),type:d.group,text:"",extension:[],code:[],item:[],required:!1};if(e===d.group)n.type=d.group;else if(e===d.attachment){var i;const e={url:v.maxSize,valueDecimal:5};null===(i=n.extension)||void 0===i||i.push(e),n.type=d.attachment}else if(e===d.receiver){var a,r;n.type=d.choice,null===(a=n.code)||void 0===a||a.push(zt),null===(r=n.extension)||void 0===r||r.push(Rt)}else if(e===d.receiverComponent){var o,s;n.type=d.choice,null===(o=n.code)||void 0===o||o.push(zt);const e=j(f.receiverComponent);null===(s=n.extension)||void 0===s||s.push(e),n.text=t,n.answerValueSet="http://helsenorge.no/fhir/ValueSet/adresser",n.required=!0}else if(e===d.boolean)n.type=d.boolean;else if(e===d.choice){n.type=d.choice;const e=gt();n.answerOption=[Fn(e),Fn(e)]}else if(e===d.date)n.type=d.date;else if(e===d.dateTime)n.type=d.dateTime;else if(e===d.decimal)n.type=d.decimal;else if(e===d.display)n.type=d.display;else if(e===d.inline){var c,u;n.type=d.text;const e=j(f.inline);null===(c=n.extension)||void 0===c||c.push(e),null===(u=n.item)||void 0===u||u.push(Ln())}else if(e===d.integer)n.type=d.integer;else if(e===d.openChoice){n.type=d.openChoice;const e=gt();n.answerOption=[Fn(e),Fn(e)]}else e===d.quantity?n.type=d.quantity:e===d.string?n.type=d.string:e===d.text?n.type=d.text:e===d.time&&(n.type=d.time);return n},Mn=e=>{const t=e.type;return[d.attachment,d.integer,d.decimal,d.quantity,d.text,d.string,d.date,d.dateTime].includes(t)&&!T(e)},Bn=e=>!T(e)&&!N(e)&&!w(e)&&e.type!==d.group&&e.type!==d.display&&e.type!==d.boolean,_n=e=>e.type!==d.group&&e.type!==d.display&&!T(e)&&!N(e)&&!w(e),zn=e=>(e.type===d.string||e.type===d.text||e.type===d.boolean||e.type===d.quantity||e.type===d.integer||e.type===d.decimal||e.type===d.date||e.type===d.dateTime||e.type===d.time)&&!T(e),Un=e=>e.type!==d.display&&!T(e)&&!N(e),Hn=e=>e.type===d.group,Wn=e=>e.type!==d.display&&!T(e)&&!N(e),Kn=e=>e.type===d.choice||e.type===d.openChoice,Gn=e=>e.type!==d.display&&e.type!==d.group&&!T(e)&&!N(e)&&!w(e),Qn=e=>e.type!==d.display&&e.type!==d.group&&!T(e)&&!N(e)&&!w(e),Jn=e=>e.type!==d.display&&!T(e)&&!N(e)&&!w(e),Zn=e=>e.type===d.integer||e.type===d.decimal||e.type===d.quantity,Yn=e=>(e.type===d.string||e.type===d.text)&&!T(e)&&!N(e),$n=e=>e.type!==d.display&&e.type!==d.group&&e.type!==d.attachment&&!w(e)&&!Ft(e);n(471);const Xn=(e,t,n,i,a,r,o)=>{if(!t)return[];const s=()=>"item-button ".concat(i?"item-button--visible":"");return[Object(nn.jsxs)("button",{className:s(),onClick:e=>{e.stopPropagation(),a(ye(t.linkId,n))},"aria-label":"Settings element",title:e("Settings"),children:[Object(nn.jsx)("i",{className:"settings-icon"}),i&&Object(nn.jsx)("label",{children:e("Settings")})]},"settings-item-button"),Object(nn.jsxs)("button",{className:s(),onClick:e=>{var i;e.stopPropagation(),a((i=t.linkId,{type:ue,linkId:i,order:n}))},"aria-label":"Duplicate element",title:e("Duplicate"),children:[Object(nn.jsx)("i",{className:"duplicate-icon"}),i&&Object(nn.jsx)("label",{children:e("Duplicate")})]},"duplicate-item-button"),Object(nn.jsxs)("button",{className:s(),onClick:e=>{e.stopPropagation();const i=(null===r||void 0===r?void 0:r.filter((e=>e.node.title!=t.linkId)))||[];a(Ie(t.linkId,n)),o&&o(i)},"aria-label":"Delete element",title:e("Delete"),children:[Object(nn.jsx)("i",{className:"trash-icon"}),i&&Object(nn.jsx)("label",{children:e("Delete")})]},"delete-item-button")]};n(472);var ei=e=>{const{t:t}=Object(In.a)(),{dispatch:n}=Object(i.useContext)(jn),{selectedNodes:r,setSelectedNodes:o}=e,[s,l]=a.a.useState([]),[c,u]=a.a.useState([]),p="yourNodeType",m=Object(An.a)(p,{beginDrag:e=>({node:{...e.node}})},(e=>({connectDragSource:e.dragSource()})))((e=>e.connectDragSource(Object(nn.jsxs)("div",{className:"anchor-menu__dragcomponent",children:[e.node.nodeReadableType,"  ",Object(nn.jsx)("div",{className:"plus-icon",onClick:()=>h(e.node),children:Object(nn.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"13",height:"13",fill:"#1a738e",className:"bi bi-plus-circle-fill",viewBox:"0 0 16 16",children:Object(nn.jsx)("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3z"})})})]}),{dropEffect:"copy"}))),h=n=>{const i=y.length,a=[];n.nodeType&&e.dispatch(Se(Rn(n.nodeType,t("Recipient component")),a,i))},v=(e,t,i)=>{n(((e,t,n,i,a,r,o,s,l)=>({type:xe,firstSelectedIndex:e,orderTreeData:t,selectedNodes:n,event:i,node:a,extendedNode:r,setSelectedNodes:o,setFirstSelectedIndex:s,collapsedNodes:l}))(c,y,r,e,t,i,o,u,s))},g=(t,n,i)=>t.filter((t=>{const n=i?e.qItems[i]:void 0;return!k(e.qItems[t.linkId],n)})).map(((e,t)=>{const i="".concat(n).concat(t+1,".");return{title:e.linkId,hierarchy:i,children:g(e.items,i,e.linkId),expanded:-1===s.indexOf(e.linkId)}})),b=e=>{const t=[...e];return t.splice(-1),t},f=t=>{var n;return(null===(n=e.qCurrentItem)||void 0===n?void 0:n.linkId)===t},j=e=>{switch(e){case d.group:return"folder-icon";case d.display:return"message-icon";default:return"question-icon"}},x=(e,t)=>Object(nn.jsx)(m,{node:{title:"NEW",nodeType:e,nodeReadableType:t,children:[]}}),y=g(e.qOrder,"");return Object(nn.jsx)(En.a,{backend:Pn.a,children:Object(nn.jsxs)("div",{className:"questionnaire-overview",children:[Object(nn.jsxs)("div",{className:"questionnaire-overview__toolbox",children:[Object(nn.jsx)("strong",{children:t("Components")}),x(d.group,t("Group")),x(d.string,t("Text answer")),x(d.display,t("Information text")),x(d.attachment,t("Attachment")),x(d.receiver,t("Recipient list")),x(d.receiverComponent,t("Recipient component")),x(d.boolean,t("Confirmation")),x(d.choice,t("Choice")),x(d.date,t("Date")),x(d.time,t("Time")),x(d.integer,t("Number")),x(d.quantity,t("Quantity"))]}),Object(nn.jsx)(tn.a,{className:"questionnaire-overview__treeview",dndType:p,treeData:y,onChange:()=>{},getNodeKey:e=>e.node.title,onMoveNode:n=>{let{treeData:i,nextParentNode:a,node:s,nextPath:l,prevPath:d}=n;const c=b(l),u=a?a.children.findIndex((e=>e.title===s.title)):i.findIndex((e=>e.title===s.title));if("NEW"===s.title&&s.nodeType)e.dispatch(Se(Rn(s.nodeType,t("Recipient component")),c,u));else if(r.length>1&&r.some((e=>e.node.title===s.title))){let t=0;r.map(((n,i)=>{if(!(e=>{for(const t of e)if(r.some((e=>e.node.title===t)))return!1;return!0})(n.path.slice(-2,-1)))return;const a=b(n.path);JSON.stringify(a)===JSON.stringify(c)?e.dispatch(De(n.node.title,c,u+t)):e.dispatch(Te(n.node.title,c,a,u+t)),t++})),o([])}else{const t=b(d);JSON.stringify(c)===JSON.stringify(t)?e.dispatch(De(s.title,c,u)):e.dispatch(Te(s.title,c,t,u))}},onVisibilityToggle:e=>{let{node:t,expanded:n}=e;const i=s.filter((e=>e!==t.title));n||i.push(t.title),l(i)},canNodeHaveChildren:t=>{const n=e.qItems[t.title];return!!n&&(e=>e.type!==d.display&&!T(e)&&!N(e)&&!w(e))(n)},generateNodeProps:n=>{var i,a,s,l;return{onClick:e=>{e.stopPropagation();const t=e.target.className;"rstcustom__expandButton"!==t&&"rst__collapseButton"!==t&&v(e,n.node,n)},className:"anchor-menu__item \n                            ".concat((l=n.node.title,e.validationErrors.some((e=>e.linkId===l))?"validation-error":"")," \n                            ").concat(1===n.path.length?"anchor-menu__topitem":""," \n                            ").concat((s=n.node,r.some((e=>e.node.title===s.title))?"selectedHighlight":""),"\n                            ").concat(f(n.node.title)?"anchor-menu__item--selected":"","\n                        "),title:Object(nn.jsxs)("span",{children:[Object(nn.jsx)("span",{className:j(null===(i=e.qItems[n.node.title])||void 0===i?void 0:i.type)}),Object(nn.jsxs)("span",{className:"anchor-menu__title",children:[n.node.hierarchy," ",null===(a=e.qItems[n.node.title])||void 0===a?void 0:a.text]})]}),buttons:Xn(t,e.qItems[n.node.title],b(n.path),!1,e.dispatch,r,o)}}}),0===e.qOrder.length&&Object(nn.jsx)("p",{className:"anchor-menu__placeholder",children:t("Here you will find a summary of questionnaire elements. Drag a component here to start building this Questionnaire")})]})})},ti=n(513),ni=n(811);n(473);var ii=e=>{const[t,n]=Object(i.useState)(!1);return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("button",{className:"accordion".concat(t?" active":""),onClick:e=>{e.preventDefault(),n(!t)},children:e.title}),Object(nn.jsx)("div",{className:"panel".concat(t?" active":""),children:t&&Object(nn.jsx)("div",{className:"content",children:e.children})})]})},ai=(n(300),n(301),n(130)),ri=n.n(ai),oi=n(812);Object(ai.setDefaultLocale)("nb"),Object(ai.registerLocale)("nb",oi.a);var si=e=>{let{type:t,disabled:n=!0,nowButton:a,callback:r,selected:o}=e;const{t:s}=Object(In.a)(),[l,d]=Object(i.useState)();return Object(nn.jsxs)("div",{className:"datepicker",children:[Object(nn.jsx)(ri.a,{disabled:n,placeholderText:"time"===t?"00:00":s("dd.mm.yyyy"),selected:o||l,onChange:e=>{d(e),r&&r(e)},todayButton:a?s("Today"):void 0,locale:"nb",showTimeSelect:"time"===t,showTimeSelectOnly:"time"===t,dateFormat:"date"===t?"dd.MM.yyyy":"HH:mm",timeCaption:s("Time")}),Object(nn.jsx)("i",{className:"time"===t?"time-icon":"calendar-icon","aria-label":"datepicker"})]})};var li=e=>{let{label:t,sublabel:n,isOptional:i,children:a}=e;const{t:r}=Object(In.a)();return Object(nn.jsxs)("div",{className:"form-field",children:[t&&Object(nn.jsxs)("label",{children:[Object(nn.jsx)("span",{children:t}),i&&Object(nn.jsx)("span",{className:"form-field__optional",children:" (".concat(r("Optional"),")")})]}),n&&Object(nn.jsx)("div",{className:"form-field__sublabel",children:n}),a]})},di=n(423),ci=n(424),ui=n.n(ci);n(530);var pi=e=>{const[t,n]=Object(i.useState)(e.data),a={toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","|","blockQuote","|","undo","redo"],language:"no-nb",placeholder:e.placeholder||""};return Object(nn.jsx)(di.CKEditor,{data:t,onChange:(e,t)=>{n(t.getData())},onBlur:(t,n)=>{e.onBlur&&e.onBlur(n.getData())},editor:ui.a,config:a,disabled:e.disabled})};n(531);var mi=e=>{let{checked:t,onChange:n,options:i,name:a}=e;const{t:r}=Object(In.a)();return Object(nn.jsx)("div",{className:"radioBtn",children:i.map((e=>Object(nn.jsx)("div",{children:Object(nn.jsxs)("label",{children:[Object(nn.jsx)("input",{className:"radioBtn-input",type:"radio",checked:e.code===t,value:e.code,name:a,onChange:e=>{n(e.target.value)}}),Object(nn.jsx)("span",{children:" ".concat(r(e.display||""))})]})},e.code)))})};var hi=e=>{let{defaultValue:t,value:n,placeholder:i,pattern:a,maxLength:r,required:o,disabled:s,name:l,className:d,onChange:c,onBlur:u}=e;return Object(nn.jsx)("input",{className:d||"",type:"text",autoComplete:"off",defaultValue:t,value:n,placeholder:i,pattern:a,maxLength:r,required:o,disabled:s,name:l,onChange:c,onBlur:u})};var vi=()=>{const{t:e}=Object(In.a)(),{state:t,dispatch:n}=Object(i.useContext)(jn),{qMetadata:a}=t,[r,o]=Object(i.useState)(!1),[s,l]=Object(i.useState)(!1),d=(e,t)=>{n(Ce(e,t))};return Object(nn.jsx)("div",{id:"metadata-editor",children:Object(nn.jsxs)(ii,{title:e("Questionnaire details"),children:[Object(nn.jsx)(li,{label:"".concat(e("Title"),":"),children:Object(nn.jsx)("input",{placeholder:e("Title"),value:t.qMetadata.title,onChange:e=>{d(V.title,e.target.value)}})}),Object(nn.jsx)(li,{label:e("Description"),isOptional:!0,children:Object(nn.jsx)("textarea",{placeholder:e("Description of questionnaire"),defaultValue:a.description||"",onBlur:e=>d(V.description,e.target.value)})}),Object(nn.jsxs)(li,{label:e("Id"),children:[Object(nn.jsx)(hi,{defaultValue:a.id,onChange:e=>{o(!Qe(e.target.value))},onBlur:e=>{Qe(e.target.value)&&d(V.id,e.target.value)}}),r&&Object(nn.jsx)("div",{className:"msg-error","aria-live":"polite",children:e("Id must be 1-64 characters and only letters a-z, numbers, - and .")})]}),Object(nn.jsxs)(li,{label:e("Technical name"),children:[Object(nn.jsx)(hi,{defaultValue:a.name,onChange:e=>{l(!Je(e.target.value,t.qMetadata.name))},onBlur:e=>{Je(e.target.value,a.name)&&d(V.name,e.target.value)}}),s&&Object(nn.jsx)("div",{className:"msg-error","aria-live":"polite",children:e("Technical name must start with a captital letter, 1-255 characters and can only contain numbers and characters a-z")})]}),Object(nn.jsx)(li,{label:e("Version"),children:Object(nn.jsx)(hi,{placeholder:e("Version number"),defaultValue:a.version,onBlur:e=>{d(V.version,e.target.value)}})}),Object(nn.jsx)(li,{label:e("Date"),children:Object(nn.jsx)(si,{type:"date",selected:a.date?Object(ti.default)(a.date):void 0,disabled:!1,nowButton:!0,callback:e=>{d(V.date,Object(ni.a)(e))}})}),Object(nn.jsx)(li,{label:e("Status"),children:Object(nn.jsx)(mi,{onChange:e=>d(V.status,e),checked:a.status||"",options:Pe,name:"status-radio"})}),Object(nn.jsx)(li,{label:e("Publisher"),children:Object(nn.jsx)(hi,{defaultValue:a.publisher||"",onBlur:e=>d(V.publisher,e.target.value)})}),Object(nn.jsx)(li,{label:e("Contact (URL to contact address)"),children:Object(nn.jsx)(hi,{defaultValue:a.contact&&a.contact.length>0?a.contact[0].name:"",onBlur:e=>d(V.contact,[{name:e.target.value}])})}),Object(nn.jsx)(li,{label:e("Url"),children:Object(nn.jsx)("input",{defaultValue:t.qMetadata.url||"",placeholder:e("Enter a url.."),onBlur:e=>d(V.url,e.target.value||""),pattern:"[Hh][Tt][Tt][Pp][Ss]?:\\/\\/(?:(?:[a-zA-Z\\u00a1-\\uffff0-9]+-?)*[a-zA-Z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-zA-Z\\u00a1-\\uffff0-9]+-?)*[a-zA-Z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,}))(?::\\d{2,5})?(?:\\/[^\\s]*)?"})}),Object(nn.jsx)(li,{label:e("Purpose"),children:Object(nn.jsx)(pi,{data:a.purpose||"",onBlur:e=>d(V.purpose,e)})}),Object(nn.jsx)(li,{label:e("Copyright"),children:Object(nn.jsx)(pi,{data:a.copyright||"",onBlur:e=>d(V.copyright,e)})})]})})};n(313);var gi=e=>{let{options:t,onChange:n,value:i,placeholder:a,compact:r}=e;const{t:o}=Object(In.a)();return Object(nn.jsxs)("div",{className:"selector ".concat(r?"compact":""),children:[Object(nn.jsxs)("select",{onChange:n,value:i||"",children:[a&&Object(nn.jsx)("option",{value:"",disabled:!0,children:a}),t.map(((e,t)=>Object(nn.jsx)("option",{value:e.code,children:o(e.display||"")},t)))]}),Object(nn.jsx)("span",{className:"down-arrow-icon"})]})};var bi=()=>{const{t:e}=Object(In.a)(),{state:t,dispatch:n}=Object(i.useContext)(jn),a=t.qOrder.filter((e=>{var n,i,a,r;return t.qItems[e.linkId].type===d.text&&(null===(n=t.qItems[e.linkId].extension)||void 0===n||null===(i=n.find((e=>e.url===v.itemControl)))||void 0===i||null===(a=i.valueCodeableConcept)||void 0===a||null===(r=a.coding)||void 0===r?void 0:r.find((e=>e.code===f.sidebar)))})),r=e=>{var n;return null===(n=t.qItems[e].code)||void 0===n?void 0:n.find((e=>e.system===m.sotHeader))},o=e=>{var n,i,a,r,o;return null!==(n=null===(i=t.qItems[e])||void 0===i||null===(a=i._text)||void 0===a||null===(r=a.extension)||void 0===r||null===(o=r.find((e=>e.url===v.markdown)))||void 0===o?void 0:o.valueMarkdown)&&void 0!==n?n:""};return Object(nn.jsxs)(ii,{title:e("Sidebar"),children:[a.map(((t,i)=>{var a;return Object(nn.jsxs)("div",{children:[Object(nn.jsx)(li,{label:e("Sidebar heading"),children:Object(nn.jsx)(gi,{placeholder:e("select sidebar heading:"),options:[{code:"SOT-1",display:e("Options regarding completion (SOT-1)")},{code:"SOT-2",display:e("Guidance and person responsible (SOT-2)")},{code:"SOT-3",display:e("Processing by the recipient (SOT-3)")}],value:null===(a=r(t.linkId))||void 0===a?void 0:a.code,onChange:e=>((e,t)=>{const i=[{...r(t),display:e,code:e}];n(qe(t,u.code,i))})(e.target.value,t.linkId)})}),Object(nn.jsx)(li,{label:e("Content"),children:Object(nn.jsx)(pi,{data:o(t.linkId),onBlur:e=>((e,t)=>{const i=B(t);n(qe(e,u._text,i))})(t.linkId,e)})}),Object(nn.jsx)("div",{className:"center-text",children:Object(nn.jsx)(qn,{title:e("- Remove element"),type:"button",variant:"secondary",onClick:()=>{return e=t.linkId,void n(Ie(e,[]));var e}})}),Object(nn.jsx)("hr",{style:{margin:"24px 0px"}})]},i)})),Object(nn.jsx)("div",{className:"center-text",children:Object(nn.jsx)(qn,{title:e("+ Add element"),type:"button",variant:"primary",onClick:()=>{n((e=>{const t={extension:[j(f.sidebar)],linkId:l(),code:[{system:m.sotHeader,code:"",display:""}],_text:B(""),type:d.text,required:!1,repeats:!1,readOnly:!1};return{type:oe,item:t,order:e}})([]))}})})]})};const fi=e=>"object"===typeof e&&0===Object.keys(e).length,ji=(e,t)=>{if(void 0!==t&&null!==t&&""!==t){if(Array.isArray(t)){const e=t.filter((e=>!fi(e)));return 0===e.length?void 0:e}if(!fi(t))return t}},xi=e=>{let t=null;switch(e){case d.boolean:t=e=>"boolean"===e.type;break;case d.decimal:case d.integer:case d.quantity:t=e=>"number"===e.type;break;case d.date:t=e=>"date"===e.type;break;case d.dateTime:t=e=>"date"===e.type||"dateTime"===e.type;break;case d.time:t=e=>"time"===e.type;break;case d.string:case d.text:t=()=>!0;break;default:t=()=>!1}const n=[],i={};for(const o of yi){if(!t(o))continue;i[o.group]||(i[o.group]={display:o.group,options:[]},n.push(i[o.group]));i[o.group].options.push((a=o.name,r=o.expression,{display:a,code:r}))}var a,r;return{options:n}},yi=[{name:"National identity number",expression:"Patient.identifier.where(use = 'official' and (system = 'urn:oid:2.16.578.1.12.4.1.4.1' or system = 'urn:oid:2.16.578.1.12.4.1.4.2')).value",group:"Patient",type:"string"},{name:"Full name",expression:"Patient.name.where(use = 'official').select(given.join(' ') & ' ' & family)",group:"Patient",type:"string"},{name:"First name",expression:"Patient.name.where(use = 'official').select(iif(given.count() > 1, given.take(count()-1), given).join(' '))",group:"Patient",type:"string"},{name:"Surname",expression:"Patient.name.where(use = 'official').family",group:"Patient",type:"string"},{name:"Birth date",expression:"Patient.birthDate",group:"Patient",type:"date"},{name:"Age",expression:"Patient.extension.where(url = 'http://helsenorge.no/fhir/StructureDefinition/sdf-age').value",group:"Patient",type:"number"},{name:"Gender",expression:"iif(%patient.gender.empty() or %patient.gender = 'other' or %patient.gender = 'unknown', 'Ukjent', iif(%patient.gender = 'female', 'Kvinne', 'Mann'))",group:"Patient",type:"string"},{name:"Mobile phone number",expression:"Patient.telecom.where(use = 'mobile' and system = 'phone').value",group:"Patient",type:"string"},{name:"Email",expression:"Patient.telecom.where(use = 'home' and system = 'email').value",group:"Patient",type:"string"},{name:"Address",expression:"Patient.address.where(use = 'home').line.first()",group:"Patient",type:"string"},{name:"Zip code",expression:"Patient.address.where(use = 'home').postalCode",group:"Patient",type:"string"},{name:"Postal address",expression:"Patient.address.where(use = 'home').city",group:"Patient",type:"string"},{name:"Temporary c/o",expression:"Patient.address.where(use = 'temp').line[0]",group:"Patient",type:"string"},{name:"Temporary address",expression:"Patient.address.where(use = 'temp').line[1]",group:"Patient",type:"string"},{name:"Temporary postal code",expression:"Patient.address.where(use = 'temp').line[2]",group:"Patient",type:"string"},{name:"Temporary postal address",expression:"Patient.address.where(use = 'temp').line[3]",group:"Patient",type:"string"},{name:"On behalf of citizen (national identity number)",expression:"RelatedPerson.identifier.where(use = 'official' and (system = 'urn:oid:2.16.578.1.12.4.1.4.1' or system = 'urn:oid:2.16.578.1.12.4.1.4.2')).value",group:"On behalf of citizen",type:"string"},{name:"On behalf of citizen (name)",expression:"RelatedPerson.name.where(use = 'official').select(given.join(' ') & ' ' & family)",group:"On behalf of citizen",type:"string"},{name:"On behalf of citizen (birth date)",expression:"RelatedPerson.birthDate",group:"On behalf of citizen",type:"date"},{name:"On behalf of citizen (age)",expression:"RelatedPerson.extension.where(url = 'http://helsenorge.no/fhir/StructureDefinition/sdf-age').value",group:"On behalf of citizen",type:"number"},{name:"On behalf of citizen (gender)",expression:"iif(RelatedPerson.gender.empty() or RelatedPerson.gender = 'other' or RelatedPerson.gender = 'unknown', 'Ukjent', iif(RelatedPerson.gender = 'female', 'Kvinne', 'Mann'))",group:"On behalf of citizen",type:"string"},{name:"On behalf of citizen (phone number)",expression:"RelatedPerson.telecom.where(use = 'mobile' and system = 'phone').value",group:"On behalf of citizen",type:"string"},{name:"On behalf of citizen (address)",expression:"RelatedPerson.address.where(use = 'home').line.first()",group:"On behalf of citizen",type:"string"},{name:"On behalf of citizen (postal code)",expression:"RelatedPerson.address.where(use = 'home').postalCode",group:"On behalf of citizen",type:"string"},{name:"On behalf of citizen (postal address)",expression:"RelatedPerson.address.where(use = 'home').city",group:"On behalf of citizen",type:"string"},{name:"On behalf of citizen (temporary c/o)",expression:"RelatedPerson.address.where(use = 'temp').line[0]",group:"On behalf of citizen",type:"string"},{name:"On behalf of citizen (temporary address)",expression:"RelatedPerson.address.where(use = 'temp').line[1]",group:"On behalf of citizen",type:"string"},{name:"On behalf of citizen (temporary postal code)",expression:"RelatedPerson.address.where(use = 'temp').line[2]",group:"On behalf of citizen",type:"string"},{name:"On behalf of citizen (temporary postal address)",expression:"RelatedPerson.address.where(use = 'temp').line[3]",group:"On behalf of citizen",type:"string"},{name:"General Practitioner (full name)",expression:"Practitioner.name.where(use = 'official').select(given.join(' ') & ' ' & family)",group:"General Practitioner",type:"string"},{name:"General Practitioner (first name)",expression:"Practitioner.name.where(use = 'official').select(iif(given.count() > 1, given.take(count()-1), given).join(' '))",group:"General Practitioner",type:"string"},{name:"General Practitioner (surname)",expression:"Practitioner.name.where(use = 'official').family",group:"General Practitioner",type:"string"},{name:"General Practitioner (business name)",expression:"Practitioner.contained.first().name",group:"General Practitioner",type:"string"},{name:"General Practitioner (business phone number)",expression:"Practitioner.contained.first().telecom.where(use = 'work' and system = 'phone').value",group:"General Practitioner",type:"string"},{name:"General Practitioner (address 1)",expression:"Practitioner.contained.first().address.where(use = 'work').line.first()",group:"General Practitioner",type:"string"},{name:"General Practitioner (address 2)",expression:"Practitioner.contained.first().address.where(use = 'work').line.skip(1).first()",group:"General Practitioner",type:"string"},{name:"General Practitioner (address 3)",expression:"Practitioner.contained.first().address.where(use = 'work').line.skip(2).first()",group:"General Practitioner",type:"string"},{name:"General Practitioner (postal code)",expression:"Practitioner.contained.first().address.where(use = 'work').postalCode",group:"General Practitioner",type:"string"},{name:"General Practitioner (postal address)",expression:"Practitioner.contained.first().address.where(use = 'work').city",group:"General Practitioner",type:"string"},{name:"General Practitioner (country)",expression:"Practitioner.contained.first().address.where(use = 'work').country",group:"General Practitioner",type:"string"},{name:"Is questionnaire answered on behalf of someone else? (true/false)",expression:"iif(%representative.relationship.coding.where((system = 'http://hl7.org/fhir/v3/RoleCode' or system = 'urn:oid:2.16.578.1.12.4.1.1.7611') and (code = 'PRN' or code = 'GRANTEE' or code = 'FU' or code = 'TD' or code = 'FO' or code = 'VE')).count() > 0, true, false)",group:"Representative relation",type:"boolean"},{name:"Represented by power of attorney? (true/false)",expression:"iif(%representative.relationship.coding.where(system = 'urn:oid:2.16.578.1.12.4.1.1.7611' and code = 'FU').count() > 0, true, false)",group:"Representative relation",type:"boolean"},{name:"Represented by power of attorney for non-consent competent? (true/false)",expression:"iif(%representative.relationship.coding.where(system = 'urn:oid:2.16.578.1.12.4.1.1.7611' and code = 'TD').count() > 0, true, false)",group:"Representative relation",type:"boolean"},{name:"Represented by parent? (true/false)",expression:"iif(%representative.relationship.coding.where(system = 'urn:oid:2.16.578.1.12.4.1.1.7611' and code = 'FO').count() > 0, true, false)",group:"Representative relation",type:"boolean"},{name:"Represented by guardianship? (true/false)",expression:"iif(%representative.relationship.coding.where(system = 'urn:oid:2.16.578.1.12.4.1.1.7611' and code = 'VE').count() > 0, true, false)",group:"Representative relation",type:"boolean"},{name:"Todays date",expression:"today()",group:"Miscellaneous",type:"date"}],Oi=(e,t)=>null===e||void 0===e?void 0:e.find((e=>e.url===t)),ki=(e,t)=>{if(!e)return[t];const n=[...e],i=n.findIndex((e=>e.url===t.url));return i>-1&&n.splice(i,1,t),n},wi=(e,t,n,i)=>{var a;const r=n[t.linkId];if(D(r))return((e,t)=>{var n;const i=null===e||void 0===e?void 0:e.sidebarItems[t.linkId];let a;const r=i&&i.markdown?i.markdown:"",o=Oi(null===(n=t._text)||void 0===n?void 0:n.extension,v.markdown);if(o){var s;const e={...o,valueMarkdown:r};a={extension:ki(null===(s=t._text)||void 0===s?void 0:s.extension,e)}}return{...t,_text:a}})(i[e],r);const o=i[e].items[t.linkId];let s;const l=null===o||void 0===o?void 0:o.text,c=Oi(null===(a=r._text)||void 0===a?void 0:a.extension,v.markdown);if(c){var u;const e={...c,valueMarkdown:l};s={extension:ki(null===(u=r._text)||void 0===u?void 0:u.extension,e)}}let p;r.extension&&(p=[...r.extension]);const m=Oi(p,v.validationtext);if(m){const e={...m,valueString:null===o||void 0===o?void 0:o.validationText};p=ki(p,e)}const h=Oi(p,v.entryFormat);if(h){const e={...h,valueString:null===o||void 0===o?void 0:o.entryFormatText};p=ki(p,e)}const g=Oi(p,v.sublabel);if(g){const e={...g,valueMarkdown:null===o||void 0===o?void 0:o.sublabel};p=ki(p,e)}const b=Oi(p,v.repeatstext);if(b){const e={...b,valueString:null===o||void 0===o?void 0:o.repeatsText};p=ki(p,e)}const f=((e,t)=>{if(e)return e.map((e=>{var n;const i=null===(n=e.valueCoding)||void 0===n?void 0:n.code,a=i&&t&&t[i]||"";return{valueCoding:{...e.valueCoding,display:a}}}))})(r.answerOption,null===o||void 0===o?void 0:o.answerOptions),j=(null===o||void 0===o?void 0:o.prefix)||"",x=r.type!==d.text&&r.type!==d.string||null===o||void 0===o||!o.initial?r.initial:[{valueString:null===o||void 0===o?void 0:o.initial}];return{...r,text:l,_text:s,extension:p,answerOption:f,prefix:j,initial:x}},Ci=(e,t)=>{const n={};return lt.forEach((e=>{n[e.propertyName]=t.metaData[e.propertyName]})),{...e,...n,extension:Si(e,t)}},Si=(e,t)=>{const n=t.settings,i=[];for(const a of e.extension||[]){dt[a.url]||i.push(a)}for(const a in n)i.push(n[a]);return i};function Ii(e,t){var n,i;const a=null===(n=e.meta)||void 0===n?void 0:n.tag;return a&&a[0]?{language:t,meta:{...e.meta,tag:[{...a[0],code:t,display:null===(i=rt(t))||void 0===i?void 0:i.localDisplay}]}}:{language:t}}const qi=(e,t)=>e.map((e=>({...t[e.linkId],item:qi(e.items,t)}))),Ni=(e,t,n,i)=>e.map((e=>({...t[e.linkId],...wi(n,e,t,i),item:Ni(e.items,t,n,i)}))),Di=e=>{var t;const n=Ai(e);return{...e.qMetadata,contained:null===(t=e.qContained)||void 0===t?void 0:t.filter((e=>e.id&&(null===n||void 0===n?void 0:n.includes(e.id))&&e)),resourceType:"Questionnaire",status:e.qMetadata.status||"draft",item:qi(e.qOrder,e.qItems)}},Ti=(e,t,n)=>{const i=Ai(e);return{...Ci(e.qMetadata,n[t]),...Ii(e.qMetadata,t),contained:(a=e.qContained,r=n[t],!a||a.length<1?[]:a.map((e=>{var t;if(0===yn(e).length)return e;const n=null===(t=e.compose)||void 0===t?void 0:t.include.map((t=>{var n;return{...t,concept:null===(n=t.concept)||void 0===n?void 0:n.map((t=>{const n=e.id&&r.contained[e.id]?r.contained[e.id].concepts[t.code]:"";return{...t,display:n}}))}}));return{...e,compose:{...e.compose,include:n}}}))).filter((e=>e.id&&(null===i||void 0===i?void 0:i.includes(e.id)))),resourceType:"Questionnaire",status:e.qMetadata.status||"draft",item:Ni(e.qOrder,e.qItems,t,n)};var a,r};function Ai(e){const t=[];return Object.keys(e.qItems).forEach((function(n){const i=e.qItems[n];var a;i.type&&i.answerValueSet&&t.push(null===(a=i.answerValueSet)||void 0===a?void 0:a.slice(1))})),Array.from(new Set(t))}const Ei=e=>{if(e.qAdditionalLanguages&&Object.keys(e.qAdditionalLanguages).length>0){const t={resourceType:"Bundle",type:"searchset",total:Object.keys(e.qAdditionalLanguages).length+1,entry:[{resource:Di(e)},...function(){const t=[],{qAdditionalLanguages:n}=e;return n&&Object.keys(n).forEach((i=>t.push(Ti(e,i,n)))),t}().map((e=>({resource:e})))]};return JSON.stringify(t,ji)}return JSON.stringify(Di(e),ji)},Pi=(e,t)=>{e.forEach((e=>{(e.extension||[]).forEach((n=>{t.forEach((t=>{var i;n.url===v.fhirPath&&(null===(i=n.valueString)||void 0===i?void 0:i.replace(" ",""))===t.expression.replace(" ","")&&(e.initial=[t.initialValue])}))})),Pi(e.item||[],t)}))},Vi=(e,t,n)=>{let i="";return lt.forEach((a=>{const r=t.map((e=>n[e].metaData[a.propertyName])),o=Ri([e[a.propertyName],...r]);i+="metadata.".concat(a.propertyName,",").concat(o,"\n")})),i},Fi=(e,t,n)=>{let i="";return e.length>0&&e.forEach((e=>{yn(e).forEach((a=>{const r=t.map((t=>n[t].contained[e.id||""].concepts[a.code||""])),o=Ri([a.display,...r]);i+="valueSet[".concat(e.id,"][").concat(a.system,"][").concat(a.code,"].display,").concat(o,"\n")}))})),i},Li=(e,t,n)=>{let i="";return Object.keys(e).forEach((a=>{const r=e[a];if(r._text){var o,s,l;const e=[];D(r)?e.push(...t.map((e=>n[e].sidebarItems[a].markdown))):e.push(...t.map((e=>n[e].items[a].text)));const d=null===(o=r._text)||void 0===o||null===(s=o.extension)||void 0===s||null===(l=s.find((e=>e.url===v.markdown)))||void 0===l?void 0:l.valueMarkdown,c=Ri([d,...e]);i+="item[".concat(a,"]._text.extension[").concat(v.markdown,"].valueMarkdown,").concat(c,"\n")}else{const e=t.map((e=>{var t;return null===(t=n[e].items[a])||void 0===t?void 0:t.text})),o=Ri([r.text,...e]);i+="item[".concat(a,"].text,").concat(o,"\n")}if(Dt(r)){const e=t.map((e=>n[e].items[a].sublabel)),o=Ri([Dt(r),...e]);i+="item[".concat(a,"].extension[").concat(v.sublabel,"].valueMarkdown,").concat(o,"\n")}if(Tt(r)){const e=t.map((e=>n[e].items[a].repeatsText)),o=Ri([Tt(r),...e]);i+="item[".concat(a,"].extension[").concat(v.repeatstext,"].valueString,").concat(o,"\n")}if(At(r)){const e=t.map((e=>n[e].items[a].validationText)),o=Ri([At(r),...e]);i+="item[".concat(a,"].extension[").concat(v.validationtext,"].valueString,").concat(o,"\n")}if(Et(r)){const e=t.map((e=>n[e].items[a].entryFormatText)),o=Ri([Et(r),...e]);i+="item[".concat(a,"].extension[").concat(v.entryFormat,"].valueString,").concat(o,"\n")}if(qt(r)){const e=t.map((e=>n[e].items[a].initial)),o=Ri([qt(r),...e]);i+="item[".concat(a,"].initial[0].valueString,").concat(o,"\n")}if(Nt(r)){const e=t.map((e=>n[e].items[a].prefix)),o=Ri([Nt(r),...e]);i+="item[".concat(a,"].prefix,").concat(o,"\n")}if(r.answerOption){const e=t.map((e=>n[e].items[a].answerOptions));r.answerOption.forEach((t=>{var n,r;const o=Ri([null===(n=t.valueCoding)||void 0===n?void 0:n.display,...e.map((e=>{var n;return e&&e[(null===(n=t.valueCoding)||void 0===n?void 0:n.code)||""]}))]);i+="item[".concat(a,"].answerOption[").concat(null===(r=t.valueCoding)||void 0===r?void 0:r.code,"].display,").concat(o,"\n")}))}})),i},Ri=e=>e.map((e=>'"'.concat(e||"",'"'))).join(",");var Mi=e=>{const{t:t}=Object(In.a)(),{state:n,dispatch:r}=Object(i.useContext)(jn),{qItems:o,qMetadata:s,qContained:l,qAdditionalLanguages:d}=n,c=a.a.useRef(null),[u,p]=Object(i.useState)(""),[m,h]=Object(i.useState)(""),v=(e,t)=>{r(Ce(e,t))};const g=(e,t)=>{const n=Cn(e);n&&void 0!==d&&!d[n]&&r(((e,t)=>({type:J,additionalLanguageCode:e,translation:t}))(n,t))},b=e=>{const t=Cn(e);void 0!==d&&d[t]&&r({type:$,languageCode:t})},f=e=>{var t;if(null!==(t=e.target)&&void 0!==t&&t.result){try{const t=JSON.parse(e.target.result),i=Di(n),a=t.language?Cn(t.language):"",r=((e,t)=>{const n=e.language?Cn(e.language):"";return"Questionnaire"!==e.resourceType?"Uploaded file is not a questionnaire":e.name&&t.name!==e.name?"Technical name of uploaded questionnaire is not equal to questionnaire technical name":d&&d[n]||t.language===n?"Questionnaire with the same language as uploaded questionnaire already exists":""})(t,i);if(r)h(r);else{const e=wn(i,t);g(a||"",e)}}catch{h("Could not read uploaded file")}c.current&&(c.current.value="")}},j=st(n).map((e=>e.code)),x=j.filter((e=>{var t;return e.toLowerCase()!==(null===(t=s.language)||void 0===t?void 0:t.toLowerCase())})),y=at.filter((e=>e.code!==s.language)).filter((e=>!j.includes(e.code))).map((e=>({code:e.code,display:e.display})));return Object(nn.jsx)(nn.Fragment,{children:Object(nn.jsxs)(ii,{title:t("Translations"),children:[Object(nn.jsx)(li,{label:t("Main language"),children:Object(nn.jsx)(gi,{value:s.language||"",options:at,onChange:e=>{var t,n,i;const a=null===(t=at.find((t=>t.code===e.target.value)))||void 0===t?void 0:t.localDisplay,r={...s.meta,tag:null===(n=s.meta)||void 0===n||null===(i=n.tag)||void 0===i?void 0:i.map((t=>"urn:ietf:bcp:47"===t.system?{system:"urn:ietf:bcp:47",code:e.target.value,display:a}:t))};v(V.language,e.target.value),v(V.meta,r)}})}),y.length>0&&Object(nn.jsxs)("div",{className:"horizontal equal",children:[Object(nn.jsx)(li,{label:t("Add support for additional language"),children:Object(nn.jsx)(gi,{placeholder:t("Select a language.."),options:y,value:u,onChange:e=>p(e.target.value)})}),Object(nn.jsx)("div",{children:Object(nn.jsx)(qn,{title:t("+ Add new language"),type:"button",variant:"primary",onClick:()=>{g(u,{items:{},sidebarItems:{},metaData:{},contained:{},settings:{}}),p("")}})})]}),Object(nn.jsx)("input",{type:"file",ref:c,onChange:e=>{const t=new FileReader;t.onload=f,t.onerror=()=>{h("Could not read uploaded file")},e.target.files&&e.target.files[0]&&(t.readAsText(e.target.files[0]),h(""))},accept:"application/JSON",style:{display:"none"}}),Object(nn.jsxs)("div",{className:"horizontal equal",children:[Object(nn.jsx)("div",{children:Object(nn.jsx)(qn,{title:t("Upload questionnaire in additional language"),type:"button",variant:"secondary",onClick:()=>{var e;null===(e=c.current)||void 0===e||e.click()}})}),Object(nn.jsx)("div",{children:Object(nn.jsx)(qn,{title:t("Export translations"),type:"button",variant:"secondary",onClick:()=>{const e=Ai(n),t=null===l||void 0===l?void 0:l.filter((t=>t.id&&(null===e||void 0===e?void 0:e.includes(t.id))&&t));((e,t,n,i,a)=>{let r="key,".concat([e.language,...i],"\n");const o=a||{};r+=Vi(e,i,o),r+=Fi(n,i,o),r+=Li(t,i,o);const s=document.createElement("a");s.download="".concat(e.name,".csv"),s.href="data:text/csv;charset=utf-8,\ufeff"+encodeURIComponent(r),s.target="_blank",document.body.appendChild(s),s.click(),document.body.removeChild(s)})(s,o,t||[],x,d)}})})]}),m&&Object(nn.jsx)("ul",{className:"item-validation-error-summary",children:Object(nn.jsx)("li",{children:t(m)})}),x.length>0&&Object(nn.jsxs)("div",{children:[Object(nn.jsx)("p",{children:t("Additional languages")}),x.map(((n,i)=>{var a;return Object(nn.jsxs)("div",{className:"enablewhen-box align-everything",children:[Object(nn.jsxs)("div",{children:[null===(a=rt(n))||void 0===a?void 0:a.display," "]}),Object(nn.jsxs)("div",{className:"pull-right btn-group",children:[Object(nn.jsx)(qn,{title:t("Delete"),type:"button",variant:"secondary",onClick:()=>b(n)}),Object(nn.jsx)(qn,{title:t("Translate"),type:"button",variant:"primary",onClick:()=>{e.setTranslateLang(n)}})]})]},i)}))]})]})})};n(532);var Bi=(e,t,n)=>{const a=n=>{n.target.closest(".ck-body-wrapper")||e.current&&!e.current.contains(n.target)&&t()};Object(i.useEffect)((()=>(n||document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)})))};const _i=e=>{const{t:t}=Object(In.a)(),n=Object(i.useRef)(null);Bi(n,e.hide,!e.visible);const a=e.visible?"open":"",r="drawer ".concat(e.position,"-drawer ").concat(a);return Object(nn.jsxs)(nn.Fragment,{children:[e.visible&&Object(nn.jsx)("div",{className:"overlay"}),Object(nn.jsxs)("div",{className:r,ref:n,children:[Object(nn.jsxs)("div",{className:"drawer-header",children:[Object(nn.jsx)(Nn,{type:"x",title:t("Close (Esc)"),onClick:e.hide}),e.title&&Object(nn.jsx)("h1",{children:e.title})]}),e.children]})]})};var zi=Object(i.forwardRef)(_i);const Ui=["INPUT","TEXTAREA","SELECT"],Hi=["ck-content"],Wi=(e,t,n)=>{const a=n=>{let{key:i,target:a}=n;const{tagName:r,classList:o}=a,s=Hi.some((e=>o&&o.contains(e))),l=Ui.includes(r);s||l||i!==e||t()};Object(i.useEffect)((()=>(n||window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)})))};n(533);var Ki=e=>{let{onChange:t,value:n,label:i,disabled:a}=e;return Object(nn.jsxs)("div",{className:"switch-btn",children:[Object(nn.jsx)("label",{children:i}),Object(nn.jsxs)("label",{className:"switch",children:[Object(nn.jsx)("input",{type:"checkbox",checked:n,onChange:t,disabled:a}),Object(nn.jsx)("span",{className:"slider"})]})]})};n(314);var Gi=e=>{let{onChange:t,checked:n,label:i,value:a,disabled:r}=e;return Object(nn.jsx)("div",{className:"switch-btn",children:Object(nn.jsxs)("label",{className:"checkbox-container",children:[i,Object(nn.jsx)("input",{type:"checkbox",value:a,checked:n,onChange:t,disabled:r}),Object(nn.jsx)("span",{className:"checkmark"})]})})};var Qi=e=>{let{checked:t,label:n}=e;return Object(nn.jsx)("div",{className:"switch-btn",children:Object(nn.jsxs)("label",{className:"checkbox-container",children:[Object(nn.jsx)("div",{className:"disabled",children:n}),Object(nn.jsx)("input",{type:"checkbox",checked:t,disabled:!0}),Object(nn.jsx)("span",{className:"checkmark"})]})})};var Ji=()=>{var e;const{t:t}=Object(In.a)(),{state:n,dispatch:i}=a.a.useContext(jn),{qMetadata:r}=n,[o,s]=a.a.useState((null===(e=Ye(r))||void 0===e?void 0:e.length)>0),l=e=>{var t;return void 0!==(null===(t=Ye(r))||void 0===t?void 0:t.find((t=>t===e.code)))},d=e=>{var t,n,a;const o=(null===(t=r.meta)||void 0===t||null===(n=t.security)||void 0===n?void 0:n.filter((t=>(t.code!==e||t.system!==b.kanUtforesAv)&&t!==nt)))||[];void 0!==(null===(a=et(r,b.kanUtforesAv))||void 0===a?void 0:a.find((t=>t.code===e)))||o.push((e=>{var t;return null===(t=Ge.filter((t=>t.code===e)))||void 0===t?void 0:t[0]})(e));o.find((e=>e.system===b.kanUtforesAv&&e.code!==nt.code))||o.push(nt),Xe(r,o,i)};return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(li,{label:"Velg tjenesteomr\xe5de",sublabel:"Hvilket tjenesteomr\xe5de m\xe5 innbyggeren ha for \xe5 f\xe5 tilgang til skjema",children:Object(nn.jsx)(mi,{checked:(()=>{var e,t;return r.meta&&r.meta.security&&r.meta.security.length>0&&(null===(e=et(r,b.tjenesteomraade))||void 0===e||null===(t=e[0])||void 0===t?void 0:t.code)||Me.helsehjelp})(),onChange:e=>{const t=tt(r,b.tjenesteomraade)||[];t.push(_e(e)),Xe(r,t,i)},options:Be,name:"servicearea-radio"})}),Object(nn.jsx)(li,{label:"Utfylling av skjema",sublabel:"Hvem som kan fylle ut skjemaet styres av en standard tilgangstjeneste. Dersom skjemaet skal ha annen tilgangsstyring enn standard, m\xe5 dette velges her. Velg hvilke representasjonsforhold som skal kunne fylle ut skjemaet.",children:Object(nn.jsx)(mi,{checked:o?ze.Tilpasset:ze.Standard,onChange:e=>{s(e!==ze.Standard);const t=tt(r,b.kanUtforesAv)||[];e!==ze.Standard&&t.push(nt),Xe(r,t,i)},options:He,name:"formfilling-radio"})}),o&&Object(nn.jsxs)(li,{label:t("Hvem skal kunne fylle ut skjemaet?"),children:[Object(nn.jsx)(Qi,{label:nt.display,checked:!0},nt.code),Ge.map((e=>Object(nn.jsx)(Gi,{label:e.display,value:e.code,checked:l(e),onChange:e=>{d(e.target.value)}},e.code)))]})]})};var Zi=()=>{var e,t,n,a,r,o,s,l,d,c,u,p,h,g,b,f,j,x,y,O,k;const{t:w}=Object(In.a)(),{state:C,dispatch:S}=Object(i.useContext)(jn),{qMetadata:I}=C,q=e=>{((e,t,n)=>{const i=(e.extension||[]).filter((e=>e.url!==t.url));i.push(t),n(Ce(V.extension,i))})(I,e,S)},N=(e,t)=>{S(Ce(e,t))},D=()=>{const e=(I.useContext||[]).filter((e=>{var t,n;return null===(t=e.valueCodeableConcept)||void 0===t||null===(n=t.coding)||void 0===n?void 0:n.find((e=>e.system===m.workflow&&"request"===e.code&&"Henvendelse"===e.display))}));return void 0!==e&&0!==e.length},T=e=>{((e,t,n)=>{const i=(e.extension||[]).filter((e=>e.url!==t));n(Ce(V.extension,i))})(I,e,S)},A=()=>{var e;const t=null===I||void 0===I||null===(e=I.extension)||void 0===e?void 0:e.find((e=>e.url===v.generatePDF));return!t||(t.valueBoolean||!1)};return Object(nn.jsxs)(ii,{title:w("Questionnaire settings"),children:[Object(nn.jsx)(li,{label:w("Helsenorge endpoint"),children:Object(nn.jsx)(hi,{placeholder:w("For example Endpoint/35"),defaultValue:null!==(e=null===I||void 0===I||null===(t=I.extension)||void 0===t||null===(n=t.find((e=>e.url===v.endpoint)))||void 0===n||null===(a=n.valueReference)||void 0===a?void 0:a.reference)&&void 0!==e?e:"",onBlur:e=>{e.target.value?q({url:v.endpoint,valueReference:{reference:e.target.value}}):T(v.endpoint)}})}),Object(nn.jsx)(li,{label:w("Connect to print version (binary)"),children:Object(nn.jsx)(hi,{placeholder:w("For example Binary/35"),defaultValue:null!==(r=null===I||void 0===I||null===(o=I.extension)||void 0===o||null===(s=o.find((e=>e.url===v.printVersion)))||void 0===s||null===(l=s.valueReference)||void 0===l?void 0:l.reference)&&void 0!==r?r:"",onBlur:e=>{if(e.target.value){const t=dt[v.printVersion];t&&q(t.generate(e.target.value))}else T(v.printVersion)}})}),Object(nn.jsx)(Ji,{}),Object(nn.jsx)(li,{label:w("Button bar display"),children:Object(nn.jsx)(mi,{onChange:e=>{e?q({url:v.presentationbuttons,valueCoding:{system:m.presentationbuttonsValueSet,code:e}}):T(v.presentationbuttons)},checked:null!==(d=null===I||void 0===I||null===(c=I.extension)||void 0===c||null===(u=c.find((e=>e.url===v.presentationbuttons)))||void 0===u||null===(p=u.valueCoding)||void 0===p?void 0:p.code)&&void 0!==d?d:"sticky",options:Ve,name:"presentationbuttons-radio"})}),Object(nn.jsx)(li,{label:w("Describes if user must be logged in to answer questionnaire"),children:Object(nn.jsx)(mi,{onChange:e=>{e?q({url:v.authenticationRequirement,valueCoding:{system:m.authenticationRequirementValueSet,code:e}}):T(v.authenticationRequirement)},checked:null!==(h=null===I||void 0===I||null===(g=I.extension)||void 0===g||null===(b=g.find((e=>e.url===v.authenticationRequirement)))||void 0===b||null===(f=b.valueCoding)||void 0===f?void 0:f.code)&&void 0!==h?h:"3",options:Fe,name:"authenticationRequirement-radio"})}),Object(nn.jsx)(li,{label:w("Save capabilities"),children:Object(nn.jsx)(mi,{onChange:e=>{e?q({url:v.saveCapability,valueCoding:{system:m.saveCapabilityValueSet,code:e}}):T(v.saveCapability)},checked:null!==(j=null===I||void 0===I||null===(x=I.extension)||void 0===x||null===(y=x.find((e=>e.url===v.saveCapability)))||void 0===y||null===(O=y.valueCoding)||void 0===O?void 0:O.code)&&void 0!==j?j:"1",options:Le,name:"saveCapability-radio"})}),Object(nn.jsxs)(li,{label:w("PDF"),sublabel:w("Here you choose whether you want to generate a PDF and whether you want to hide some texts when the PDF is generated"),children:[Object(nn.jsx)(Ki,{onChange:()=>q({url:v.generatePDF,valueBoolean:!A()}),value:A(),label:w("Generate PDF on submit")}),Object(nn.jsx)(Gi,{onChange:()=>$t(I,Kt.hideHelp,S),checked:(E=I,Gt(E,Kt.hideHelp)),value:Kt.hideHelp,label:w("Hide help texts in PDF")}),Object(nn.jsx)(Gi,{onChange:()=>$t(I,Kt.hideSublabel,S),checked:Zt(I),value:Kt.hideSublabel,label:w("Hide sublabels in PDF")}),Object(nn.jsx)(Gi,{onChange:()=>$t(I,Kt.hideSidebar,S),checked:Jt(I),value:Kt.hideSidebar,label:w("Hide sidebar texts in PDF")})]}),Object(nn.jsx)(li,{label:w("Progress indicator"),sublabel:w("Choose whether you want to hide the progress indicator. The progress indicator is only available if the form is using a step-view"),children:Object(nn.jsx)(Ki,{onChange:()=>$t(I,Kt.hideProgress,S),value:Yt(I),label:w("Hide progress indicator")})}),Object(nn.jsx)(li,{label:w("Navigation"),sublabel:w("Choose whether to use the navigator"),children:Object(nn.jsx)(Ki,{onChange:()=>{var e;!(null===I||void 0===I||null===(e=I.extension)||void 0===e||!e.find((e=>e.url===v.navigator)))?T(v.navigator):q({url:v.navigator,valueCodeableConcept:{coding:[{system:v.navigatorCodeSystem,code:"navigator"}]}})},value:!(null===I||void 0===I||null===(k=I.extension)||void 0===k||!k.find((e=>e.url===v.navigator)))||!1,label:w("Navigator")})}),Object(nn.jsx)(li,{label:w("Workflow"),sublabel:w("Should the form be included in a workflow at Helsenorge? This field is only used by Norsk helsenett."),children:Object(nn.jsx)(Ki,{onChange:()=>{const e={code:{system:"http://hl7.org/fhir/ValueSet/usage-context-type",code:"workflow",display:"Workflow Setting"},valueCodeableConcept:{coding:[{system:m.workflow,code:"request",display:"Henvendelse"}]}};if(D()){const e=(I.useContext||[]).filter((e=>{var t,n;return null===(t=e.valueCodeableConcept)||void 0===t||null===(n=t.coding)||void 0===n?void 0:n.find((e=>e.system!==m.workflow&&"request"!==e.code&&"Henvendelse"!==e.display))}));N(V.useContext,e)}else{const t=(I.useContext||[]).filter((e=>{var t,n;return null===(t=e.valueCodeableConcept)||void 0===t||null===(n=t.coding)||void 0===n?void 0:n.find((e=>e.system!==m.workflow&&"request"!==e.code&&"Henvendelse"!==e.display))}));t.push(e),N(V.useContext,t)}},value:D()||!1,label:w("Request")})})]});var E};var Yi=e=>{let{setTranslateLang:t,closeDrawer:n,isOpen:i=!1}=e;const{t:a}=Object(In.a)();return Wi("Escape",n,!i),Object(nn.jsxs)(zi,{title:a("Questionnaire details"),position:"left",visible:i,hide:n,children:[Object(nn.jsx)(vi,{}),Object(nn.jsx)(Zi,{}),Object(nn.jsx)(bi,{}),Object(nn.jsx)(Mi,{setTranslateLang:t})]})},$i=n.p+"static/media/ellipsis-horizontal-outline.fbddf22c.svg";n(534);var Xi=e=>{let{showJSONView:t}=e;const{t:n}=Object(In.a)(),{state:a}=Object(i.useContext)(jn);return Object(nn.jsx)("div",{className:"overlay",children:Object(nn.jsxs)("div",{className:"structor-helper",children:[Object(nn.jsxs)("div",{className:"title",children:[Object(nn.jsx)(Nn,{type:"x",title:n("Back"),onClick:t}),Object(nn.jsx)("h1",{children:n("JSON structure")})]}),Object(nn.jsx)("code",{className:"json",children:JSON.stringify(JSON.parse(Ei(a)),void 0,2)})]})})},ea=n(89);n(535);var ta=e=>{let{value:t,disabled:n,onBlur:i}=e;const{t:r}=Object(In.a)(),o=a.a.useRef(null),[s,l]=a.a.useState(bt(t||""));return a.a.useEffect((()=>{o.current&&(o.current.value=t||""),l(!t||bt(t||""))}),[t]),Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("input",{disabled:n,ref:o,placeholder:r("Enter uri.."),defaultValue:t||"",onBlur:i,onChange:e=>{l(!e.target.value||bt(e.target.value))}}),!s&&Object(nn.jsx)("div",{className:"msg-error","aria-live":"polite",children:r("Uri must start with http://, https:// or urn:uuid:")})]})};const na=()=>({resourceType:"ValueSet",id:"".concat(l()),version:"1.0",name:"",title:"",date:(new Date).toISOString(),status:"draft",publisher:"",compose:{include:[{system:gt(),concept:[{id:l(),code:"",display:""},{id:l(),code:"",display:""}]}]}});var ia=e=>{var t;const{t:n}=Object(In.a)(),{state:a,dispatch:r}=Object(i.useContext)(jn),[o,s]=Object(i.useState)({...na()}),{qContained:d}=a,c=(e,t,n)=>{var i,a;const r={...o.compose},l=r.include&&(null===(i=r.include[0])||void 0===i||null===(a=i.concept)||void 0===a?void 0:a.find((e=>e&&e.id===n)));l&&(l[t]=e),"display"===t&&l&&(l.code=Vn(e)),s({...o})},u=e=>{var t;if(!e.source||!e.destination||!e.draggableId)return;const n=e.source.index,i=e.destination.index,a={...o.compose},r=a.include&&(null===(t=a.include[0].concept)||void 0===t?void 0:t.splice(n,1));var l;n!==i&&r&&(a.include&&(null===(l=a.include[0].concept)||void 0===l||l.splice(i,0,r[0])),s({...o}))};return Object(nn.jsx)(Dn,{close:e.close,title:n("Predefined values"),size:"large",bottomCloseText:n("Close"),children:Object(nn.jsxs)("div",{className:"predefined-container",children:[Object(nn.jsxs)("div",{children:[Object(nn.jsx)(li,{label:n("Title"),children:Object(nn.jsx)(hi,{value:o.title,onChange:e=>s({...o,title:e.target.value})})}),Object(nn.jsx)(li,{label:n("Teknisk-navn"),children:Object(nn.jsx)(hi,{value:o.name,onChange:e=>s({...o,name:e.target.value})})}),Object(nn.jsx)(li,{label:n("Publisher"),children:Object(nn.jsx)(hi,{value:o.publisher,onChange:e=>s({...o,publisher:e.target.value})})}),Object(nn.jsxs)("div",{className:"btn-group center-text",children:[Object(nn.jsx)(qn,{onClick:()=>{var e,t;null===o||void 0===o||null===(e=o.compose)||void 0===e||null===(t=e.include[0].concept)||void 0===t||t.push({id:l(),code:"",display:""}),s({...o})},title:n("+ New option"),variant:"secondary"}),Object(nn.jsx)(qn,{onClick:()=>{r({type:be,item:o}),s({...na()})},title:n("Save >"),variant:"primary"})]}),Object(nn.jsx)("div",{className:"value-set",children:null===(t=o.compose)||void 0===t?void 0:t.include.map(((e,t)=>Object(nn.jsxs)("div",{children:[Object(nn.jsx)(li,{label:n("System"),children:Object(nn.jsx)(ta,{disabled:t>0,value:e.system,onBlur:e=>(e=>{const t={...o.compose};t.include&&(t.include[0].system=e),s({...o})})(e.target.value)})}),Object(nn.jsx)(ea.a,{onDragEnd:u,children:Object(nn.jsx)(ea.c,{droppableId:"droppable-new-value-set-".concat(e.system),type:"value-set",children:(i,a)=>{var r,l;return Object(nn.jsxs)("div",{ref:i.innerRef,style:(l=a.isDraggingOver,{background:l?"lightblue":"transparent"}),children:[null===(r=e.concept)||void 0===r?void 0:r.map(((i,a)=>Object(nn.jsx)(ea.b,{draggableId:i.id||"1",index:a,children:(a,r)=>{var l,d,u,p;return Object(nn.jsxs)("div",{ref:a.innerRef,...a.draggableProps,style:(u=r.isDragging,p=a.draggableProps.style,{userSelect:"none",background:u?"lightgreen":"transparent",cursor:"pointer",...p}),className:"answer-option-item align-everything",children:[Object(nn.jsx)("span",{className:"reorder-icon","aria-label":"reorder element",...a.dragHandleProps}),Object(nn.jsxs)("div",{className:"answer-option-content align-everything",children:[Object(nn.jsx)(hi,{disabled:t>0,value:i.display,placeholder:n("Enter a title.."),onChange:e=>c(e.target.value,"display",i.id)}),Object(nn.jsx)(hi,{disabled:t>0,value:i.code,placeholder:n("Enter a value.."),onChange:e=>c(e.target.value,"code",i.id)})]}),0===t&&(null===(l=e.concept)||void 0===l?void 0:l.length)&&(null===(d=e.concept)||void 0===d?void 0:d.length)>2&&Object(nn.jsx)("button",{type:"button",onClick:()=>(e=>{var t;const n={...o.compose},i=n.include&&(null===(t=n.include[0].concept)||void 0===t?void 0:t.findIndex((t=>t&&t.id===e)));var a;(i||0===i)&&n.include&&(null===(a=n.include[0].concept)||void 0===a||a.splice(i,1)),s({...o})})(i.id),name:n("Remove element"),className:"align-everything"})]})}},i.id))),i.placeholder]})}})})]},e.system)))})]}),Object(nn.jsx)("div",{children:null===d||void 0===d?void 0:d.map((e=>{return Object(nn.jsxs)("div",{children:[Object(nn.jsxs)("p",{children:[Object(nn.jsx)("strong",{children:e.title})," (",e.name,")"," ",(t=e.url,t!==ut&&Object(nn.jsx)(qn,{title:n("Change"),type:"button",variant:"secondary",onClick:()=>(e=>{const t=JSON.stringify(e);s(JSON.parse(t))})(e)}))]}),Object(nn.jsx)("ul",{children:yn(e).map((e=>Object(nn.jsxs)("li",{children:[e.display," (",e.code,")"]},e.code)))})]},e.id);var t}))})]})})},aa=(n(537),n.p+"static/media/alert-circle-outline.2afd351d.svg");var ra=e=>{let{close:t}=e;const n=a.a.useRef(null),{t:r}=Object(In.a)(),{dispatch:o,state:s}=Object(i.useContext)(jn),[d,c]=Object(i.useState)(""),[u,p]=Object(i.useState)(),[m,h]=Object(i.useState)(!1),[v,g]=Object(i.useState)(),[b,f]=Object(i.useState)([]),[j,x]=Object(i.useState)("");const y=async e=>{e.preventDefault(),g(null),p(null),h(!0);try{const e=await async function(){const e=await fetch(d,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok||!e.json)return{error:"".concat(r("There was en error with status:")," ").concat(e.status)};const t=await e.json();if("Bundle"!==t.resourceType||0==t.entry.length)return{error:r("This resource does not support the FHIR protocol")};const n=t.entry.map((e=>e.resource)).map((e=>({resourceType:e.resourceType,id:e.id?e.id:"pre-".concat(l()),version:e.version||"1.0",name:e.name,title:e.title||e.name,status:e.status,publisher:e.publisher,compose:e.compose})));return f(n.map((e=>e.id))),{valueSet:n}}();setTimeout((()=>{var t;h(!1),e.error?p(e.error):0!==(null===(t=e.valueSet)||void 0===t?void 0:t.length)?g(e.valueSet):p(r("Found no ValueSet at the endpoint"))}),1200)}catch{p(r("This resource does not support the FHIR protocol")),h(!1)}};return Object(nn.jsx)(Dn,{close:t,title:r("Import ValueSet"),size:"large",children:Object(nn.jsxs)("div",{children:[Object(nn.jsx)(li,{label:r("Enter a location to import the ValueSets from"),children:Object(nn.jsxs)("form",{className:"input-btn",onSubmit:e=>y(e),children:[Object(nn.jsx)("input",{placeholder:"https:// .. /ValueSet or https:// .. /ValueSet/[id]",title:r("Make sure the URL ends with /ValueSet or /Valueset/[id]"),onChange:e=>{return t=e.target.value,c(t),void(""===t&&(p(null),g(null)));var t},pattern:"[Hh][Tt][Tt][Pp][Ss]?:\\/\\/(?:(?:[a-zA-Z\\u00a1-\\uffff0-9]+-?)*[a-zA-Z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-zA-Z\\u00a1-\\uffff0-9]+-?)*[a-zA-Z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,}))(?::\\d{2,5})?(?:\\/[^\\s]*)?",type:"url",value:d,required:!0,autoFocus:!0}),Object(nn.jsx)(qn,{title:r("search"),variant:"primary",type:"submit"})]})}),Object(nn.jsx)("input",{type:"file",ref:n,onChange:async e=>{if(e.target.files&&e.target.files.length>0){const t=Array.from(e.target.files).map((e=>{const t=new FileReader;return new Promise((n=>{t.onload=()=>n(t.result),t.onerror=()=>{x("Could not read uploaded file")},t.readAsText(e)}))})),i=await Promise.all(t),a=[];i.forEach((e=>{const t=JSON.parse(e);"Bundle"===t.resourceType&&t.entry?t.entry.forEach((e=>{const t=e.resource;"ValueSet"===t.resourceType&&a.push(t)})):"ValueSet"===t.resourceType&&a.push(t)}));const r=a.filter((e=>{var t;return-1===(null===(t=s.qContained)||void 0===t?void 0:t.findIndex((t=>t.id===e.id)))}));g([...v||[],...r]),f([...b,...r.map((e=>e.id||""))]),n.current&&(n.current.value=""),x("")}},accept:"application/JSON",style:{display:"none"},multiple:!0}),Object(nn.jsxs)("div",{children:[Object(nn.jsx)("div",{children:r("Upload ValueSets as json files. Accepts a Bundle or ValueSet in a single file. It is possible to upload several files at once")}),Object(nn.jsx)("div",{children:Object(nn.jsx)(qn,{title:r("Upload ValueSet(s)"),type:"button",variant:"secondary",onClick:()=>{var e;null===(e=n.current)||void 0===e||e.click()}})}),j&&Object(nn.jsx)("div",{children:r(j)})]}),m&&Object(nn.jsx)("div",{className:"spinning",children:Object(nn.jsx)("i",{className:"ion-load-c"})}),u&&Object(nn.jsxs)("p",{className:"align-everything",children:[Object(nn.jsx)("img",{height:25,alt:"error",src:aa})," ",u]}),v&&Object(nn.jsx)("div",{children:v.map((e=>Object(nn.jsxs)("div",{children:[Object(nn.jsxs)("p",{children:[Object(nn.jsx)("input",{type:"checkbox","aria-label":"Add or remove value-set",defaultChecked:!0,onChange:t=>((e,t)=>{const n=[...b].findIndex((e=>e===t));if(e&&t)f([...b,t]);else{const e=[...b];e.splice(n,1),f(e)}})(t.target.checked,null===e||void 0===e?void 0:e.id)})," ",Object(nn.jsx)("strong",{children:e.title})]}),Object(nn.jsx)("ul",{children:yn(e).map((e=>Object(nn.jsxs)("li",{children:[e.display," (",e.code,")"]},e.code)))})]},e.id)))}),v&&Object(nn.jsx)("div",{className:"button-btn",children:Object(nn.jsxs)("div",{children:[Object(nn.jsx)("p",{children:r("Add ({0} ValueSet) in predefined valuesets").replace("{0}",b.length.toString())}),Object(nn.jsx)(qn,{title:r("Import"),variant:"primary",type:"button",onClick:()=>{const e=null===v||void 0===v?void 0:v.filter((e=>e.id&&b.includes(e.id)));e&&(null===e||void 0===e?void 0:e.length)>0&&o({type:fe,items:e}),t()}})]})})]})})};const oa=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.forEach((e=>{e.linkId!==t.linkId?e.items&&(n=oa(e.items,t,n)):n=!0})),n},sa=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.forEach((e=>{const a=t[e.linkId];a.code&&a.code.forEach((e=>{e.code!==n||(i=!0)})),e.items&&!i&&(i=sa(e.items,t,n,i))})),i},la=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach((e=>{t[e.linkId].type===d.group&&n.push(e),e.items&&la(e.items,t,n)})),n},da=[p.equal,p.notEqual],ca=(e,t,n,i)=>({linkId:e,index:i,errorProperty:t,errorReadableText:n}),ua=(e,t,n,i,a,r)=>{const o=n[t.linkId];r.push(...((e,t,n)=>{const i=[];return Object.keys(t).filter((e=>e===n.linkId)).length>1&&i.push(ca(n.linkId,"linkId",e("LinkId is already in use"))),i})(e,n,o)),r.push(...((e,t)=>{const n=[];return(t.type===d.group||t.type===d.display||T(t)||N(t)||q(t)||D(t))&&t.required&&n.push(ca(t.linkId,"required",e("Question is required, but cannot be required"))),n})(e,o)),r.push(...((e,t)=>{const n=[];return t.type!==d.date&&t.type!==d.dateTime||(t.extension||[]).forEach(((i,a)=>{var r,o;(i.url===v.fhirPathMinValue||i.url===v.fhirPathMaxValue)&&1!==(null===(r=i.valueString)||void 0===r?void 0:r.split(" ").filter(Boolean).length)&&4!==(null===(o=i.valueString)||void 0===o?void 0:o.split(" ").filter(Boolean).length)&&n.push(ca(t.linkId,"extension",e("Error in FHIRpath date validation"),a))})),n})(e,o)),r.push(...((e,t)=>{const n=[];return(t.code||[]).forEach(((i,a)=>{i.code||n.push(ca(t.linkId,"code.code",e('Code does not have "code" property'),a)),i.system||n.push(ca(t.linkId,"code.system",e('Code does not have "system" property'),a)),i.system&&!bt(i.system)&&n.push(ca(t.linkId,"code",e("Code does not have a valid system"),a))})),n})(e,o)),r.push(...((e,t,n,i)=>{const a=[];return(n.code||[]).forEach(((r,o)=>{if(r.code===jt.sectionScore){const r=la(i,t);oa(r,n)||a.push(ca(n.linkId,"code.code",e("A section score summation field must be inside a group"),o))}if(r.code!==jt.sectionScore&&r.code!==jt.totalScore||(sa(i,t,jt.questionScore)||a.push(ca(n.linkId,"code.code",e("A summation field requires that a scoring field exists in the questionnaire"),o)),_(n,v.calculatedExpression)&&a.push(ca(n.linkId,"code.code",e("A summation field cannot have a calculation formula"),o))),r.code===jt.questionScore){sa(i,t,jt.sectionScore)||sa(i,t,jt.totalScore)||a.push(ca(n.linkId,"code.code",e("A scoring field requires that a summation field exists in the questionnaire"),o));const r=((e,t)=>{var n;let i=!1,a=!0;return null===(n=e.answerOption)||void 0===n||n.forEach((e=>{var n,r;i=!1,null!==(n=e.valueCoding)&&void 0!==n&&n.extension&&(null===(r=e.valueCoding)||void 0===r||r.extension.forEach((e=>{e.url===t&&(i=!0)}))),!1===i&&(a=!1)})),a})(n,v.ordinalValue);r||a.push(ca(n.linkId,"code.code",e("A scoring field must have a scoring value in all answer options"),o))}})),a})(e,n,o,i)),r.push(...((e,t)=>{const n=[];return(t.answerOption||[]).forEach(((i,a)=>{var r,o;null!==(r=i.valueCoding)&&void 0!==r&&r.system&&!bt(null===(o=i.valueCoding)||void 0===o?void 0:o.system)&&n.push(ca(t.linkId,"code",e("answerOption does not have a valid system"),a))})),n})(e,o)),r.push(...((e,t)=>{const n=[];if(t.type===d.quantity){var i,a,r;const o=(t.extension||[]).find((e=>e.url===v.questionnaireUnit));o&&null!==(i=o.valueCoding)&&void 0!==i&&i.system&&!bt(null===(a=o.valueCoding)||void 0===a?void 0:a.system)&&n.push(ca(t.linkId,"code",e("quantity extension does not have a valid system"))),!o||null!==(r=o.valueCoding)&&void 0!==r&&r.code||n.push(ca(t.linkId,"code",e("quantity extension does not have code")))}return n})(e,o)),r.push(...((e,t)=>{const n=[];return(t.extension||[]).forEach(((i,a)=>{-1===Object.keys(i).indexOf("url")&&n.push(ca(t.linkId,"extension",e('Extension has no "url" property'),a)),1!==Object.keys(i).filter((e=>"value"===e.substr(0,5))).length&&n.push(ca(t.linkId,"extension",e("Extension does not have value[x], or has more than one value[x]"),a))})),n})(e,o)),r.push(...((e,t,n)=>{const i=[];if(t.initial&&t.initial[0].valueCoding)if(t.answerOption)t.answerOption.find((e=>{var n,i,a,r;return t.initial&&t.initial[0]&&(null===(n=t.initial[0].valueCoding)||void 0===n?void 0:n.code)===(null===(i=e.valueCoding)||void 0===i?void 0:i.code)&&(null===(a=t.initial[0].valueCoding)||void 0===a?void 0:a.system)===(null===(r=e.valueCoding)||void 0===r?void 0:r.system)}))||i.push(ca(t.linkId,"initial",e("Initial value is not a possible value")));else if(t.answerValueSet){const a=n.find((e=>"#".concat(e.id)===t.answerValueSet));a?yn(a).find((e=>{var n,i;return t.initial&&t.initial[0]&&(null===(n=t.initial[0].valueCoding)||void 0===n?void 0:n.code)===e.code&&(null===(i=t.initial[0].valueCoding)||void 0===i?void 0:i.system)===e.system}))||i.push(ca(t.linkId,"initial",e("Initial value is not a possible value"))):i.push(ca(t.linkId,"initial",e("ValueSet of initial value does not exist")))}return i})(e,o,a)),r.push(...((e,t,n,i)=>{var a;const r=[];return null===(a=n.enableWhen)||void 0===a||a.forEach(((a,o)=>{const s=!!t[a.question];if(s||r.push(ca(n.linkId,"enableWhen.question",e("This enableWhen refers to a question with linkId which does not exist"),o)),3!==Object.keys(a).length&&r.push(ca(n.linkId,"enableWhen",e("enableWhen is not configured correctly. There are too many answer[x]-properties"),o)),s&&t[a.question].type===d.quantity&&a.operator!==p.exists){var l,c,u;const i=null===(l=t[a.question].extension)||void 0===l?void 0:l.find((e=>e.url===v.questionnaireUnit));i&&a.answerQuantity.system===(null===(c=i.valueCoding)||void 0===c?void 0:c.system)&&a.answerQuantity.code===(null===(u=i.valueCoding)||void 0===u?void 0:u.code)||r.push(ca(n.linkId,"enableWhen.answerQuantity",e("Quantity does not match system and code"),o))}if(s&&(t[a.question].type===d.choice||t[a.question].type===d.openChoice))if(Ft(t[a.question])&&a.operator!==p.exists){var m;(null===(m=t[a.question].extension)||void 0===m?void 0:m.find((e=>{var t;return(null===(t=e.valueReference)||void 0===t?void 0:t.reference)===a.answerReference.reference})))||r.push(ca(n.linkId,"enableWhen.answerReference",e("Recipient set in this enableWhen does not exist"),o))}else if(t[a.question].answerOption&&a.operator!==p.exists)if(-1===da.indexOf(a.operator))r.push(ca(n.linkId,"enableWhen.operator",e("Operator used in this enableWhen is not supported"),o));else{var h;(null===(h=t[a.question].answerOption)||void 0===h?void 0:h.find((e=>{var t,n;return(null===(t=e.valueCoding)||void 0===t?void 0:t.system)===a.answerCoding.system&&(null===(n=e.valueCoding)||void 0===n?void 0:n.code)===a.answerCoding.code})))||r.push(ca(n.linkId,"enableWhen.answerCoding",e("Coding expected in this enableWhen does not exist"),o))}else if(t[a.question].answerValueSet&&a.operator!==p.exists)if(-1===da.indexOf(a.operator))r.push(ca(n.linkId,"enableWhen.operator",e("Operator used in this enableWhen is not supported"),o));else{const s=i.find((e=>"#".concat(e.id)===t[a.question].answerValueSet));s?yn(s).find((e=>a.answerCoding&&e.code===a.answerCoding.code&&e.system===a.answerCoding.system))||r.push(ca(n.linkId,"enableWhen.answerCoding",e("Coding expected in this enableWhen does not exist"),o)):r.push(ca(n.linkId,"enableWhen.answerCoding",e("The ValueSet referenced in this enableWhen does not exist"),o))}})),r})(e,n,o,a)),r.push(...((e,t)=>{const n=[];return A(t)&&(_(t,v.copyExpression)||n.push(ca(t.linkId,"data-receiver",e("data receiver does not have an earlier question")))),n})(e,o)),t.items.forEach((t=>ua(e,t,n,i,a,r)))},pa=(e,t,n,i)=>{const a=[];if(i){t.filter((e=>{var t,i,a,r;return n[e.linkId].type===d.text&&(null===(t=n[e.linkId].extension)||void 0===t||null===(i=t.find((e=>e.url===v.itemControl)))||void 0===i||null===(a=i.valueCodeableConcept)||void 0===a||null===(r=a.coding)||void 0===r?void 0:r.find((e=>e.code===f.sidebar)))})).forEach((t=>((e,t,n,i)=>{Object.keys(n).forEach(((a,r)=>{n[a].sidebarItems[t.linkId]&&n[a].sidebarItems[t.linkId].markdown||i.push(ca(t.linkId,"sidebar.markdown",e("Translation not found for sidebar item"),r))}))})(e,t,i,a)));t.filter((e=>{var t,i,a,r;return!(null!==(t=n[e.linkId].extension)&&void 0!==t&&null!==(i=t.find((e=>e.url===v.itemControl)))&&void 0!==i&&null!==(a=i.valueCodeableConcept)&&void 0!==a&&null!==(r=a.coding)&&void 0!==r&&r.find((e=>e.code===f.sidebar)))})).forEach((t=>((e,t,n,i)=>{Object.keys(n).forEach(((a,r)=>{n[a].items[t.linkId]&&n[a].items[t.linkId].text||i.push(ca(t.linkId,"items.text",e("Translation not found for form item"),r))}))})(e,t,i,a)))}return a},ma=e=>{const{t:t}=Object(In.a)();return Object(nn.jsxs)(Dn,{close:e.onClose,title:t("Validation"),bottomCloseText:t("Close"),children:[e.validationErrors.length>0?Object(nn.jsx)("div",{className:"msg-error",children:t("Found {0} errors. Questions with errors are marked with a red border.").replace("{0}",e.validationErrors.length.toString())}):Object(nn.jsx)("div",{children:t("Found no validation errors!")}),e.translationErrors.length>0?Object(nn.jsx)("div",{className:"msg-error",style:{paddingTop:"10px"},children:t("Found {0} missing translations.").replace("{0}",e.translationErrors.length.toString())}):Object(nn.jsx)(nn.Fragment,{children:e.hasTranslations&&Object(nn.jsx)("div",{style:{paddingTop:"10px"},children:t("Found no translations errors!")})})]})};var ha=function(e){return e.none="none",e.file="file",e.more="more",e}(ha||{});var va=e=>{let{showFormFiller:t,setValidationErrors:n,validationErrors:a,translationErrors:r,setTranslationErrors:o}=e;const{i18n:s,t:l}=Object(In.a)(),{state:d,dispatch:c}=Object(i.useContext)(jn),[u,p]=Object(i.useState)(ha.none),[m,h]=Object(i.useState)(!1),[v,g]=Object(i.useState)(!1),[b,f]=Object(i.useState)(!1),[j,x]=Object(i.useState)(!1),y=Object(i.useRef)(null),O=()=>{p(ha.none)};Bi(y,O,u===ha.none);const k=e=>{e(),O()};function w(){const e=Ei(d),t="".concat((()=>{let e=d.qMetadata.name||"skjema";e=e.length>40?e.substring(0,40)+"...":e;const t=d.qMetadata.version?"-v".concat(d.qMetadata.version):"";return d.qAdditionalLanguages&&Object.values(d.qAdditionalLanguages).length<1?"".concat(e,"-").concat(d.qMetadata.language).concat(t):"".concat(e).concat(t)})(),".").concat("json"),n="application/json;charset=utf-8;";if(window.navigator&&window.navigator.msSaveOrOpenBlob){const i=new Blob([decodeURIComponent(encodeURI(e))],{type:n});navigator.msSaveOrOpenBlob(i,t)}else{const i=document.createElement("a");i.download=t,i.href="data:"+n+","+encodeURIComponent(e),i.target="_blank",document.body.appendChild(i),i.click(),document.body.removeChild(i)}c({type:je})}const C=e=>{u!==e?p(e):O()},S=sessionStorage.getItem("profile"),I=S?JSON.parse(S):null;return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsxs)("header",{ref:y,children:[Object(nn.jsx)("div",{className:"form-title",children:Object(nn.jsx)("h1",{children:"Flowsheets"})}),Object(nn.jsxs)("div",{className:"pull-right",children:[I&&I.name&&Object(nn.jsx)("p",{className:"truncate profile-name",title:l("You are logged in as {0}").replace("{0}",I.name),children:"".concat(I.given_name," ").concat(I.family_name)}),Object(nn.jsx)(qn,{title:l("Preview"),onClick:t}),Object(nn.jsx)(qn,{title:l("Save"),onClick:()=>w()}),Object(nn.jsx)("div",{className:"more-menu",tabIndex:0,role:"button","aria-label":"menu list","aria-pressed":"false",onClick:()=>C(ha.more),onKeyPress:e=>"Enter"===e.code&&C(ha.more),children:Object(nn.jsx)("img",{className:"more-menu-icon",src:$i,alt:"more icon",height:25})})]}),u===ha.more&&Object(nn.jsxs)("div",{className:"menu",children:[Object(nn.jsx)(qn,{title:l("Validate"),onClick:()=>{n(((e,t,n,i)=>{const a=[];return t.forEach((r=>ua(e,r,n,t,i,a))),a})(l,d.qOrder,d.qItems,d.qContained||[])),o(pa(l,d.qOrder,d.qItems,d.qAdditionalLanguages)),x(!0)}}),Object(nn.jsx)(qn,{title:l("JSON"),onClick:()=>k((()=>f(!b)))}),Object(nn.jsx)(qn,{title:l("Import choices"),onClick:()=>k((()=>g(!v)))}),Object(nn.jsx)(qn,{title:l("Choices"),onClick:()=>k((()=>h(!m)))}),"nb-NO"!==s.language&&Object(nn.jsx)(qn,{title:l("Change to norwegian"),onClick:()=>k((()=>{s.changeLanguage("nb-NO"),localStorage.setItem("editor_language","nb-NO")}))}),"en-US"!==s.language&&Object(nn.jsx)(qn,{title:l("Change to English"),onClick:()=>k((()=>{s.changeLanguage("en-US"),localStorage.setItem("editor_language","en-US")}))}),"fr-FR"!==s.language&&Object(nn.jsx)(qn,{title:l("Change to French"),onClick:()=>k((()=>{s.changeLanguage("fr-FR"),localStorage.setItem("editor_language","fr-FR")}))})]})]}),j&&Object(nn.jsx)(ma,{validationErrors:a,translationErrors:r,hasTranslations:(q=d.qAdditionalLanguages,!!q&&Object.keys(q).length>0),onClose:()=>x(!1)}),m&&Object(nn.jsx)(ia,{close:()=>h(!m)}),v&&Object(nn.jsx)(ra,{close:()=>g(!v)}),b&&Object(nn.jsx)(Xi,{showJSONView:()=>f(!b)})]});var q};n(538);const ga=(e,t)=>{if(0===e.length)return t;const n=t.findIndex((t=>t.linkId===e[0]));return ga(e.slice(1),t[n].items)},ba=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const a=((e,t,n)=>{const i=n?t[n]:void 0;return e.filter((e=>!k(t[e.linkId],i)))})(t,n,arguments.length>4?arguments[4]:void 0).findIndex((t=>t.linkId===e))+1;return i?"".concat(i,".").concat(a):"".concat(a)};n(539);let fa=function(e){return e[e.DEFAULT=1]="DEFAULT",e[e.SAME_WINDOW=2]="SAME_WINDOW",e}({});var ja=e=>{let{item:t}=e;const{t:n}=Object(In.a)(),{state:{qItems:a,qOrder:r,qMetadata:o},dispatch:s}=Object(i.useContext)(jn),[l,d]=Object(i.useState)(!1),[c,u]=Object(i.useState)(void 0),[p,m]=Object(i.useState)(void 0),[h,g]=Object(i.useState)(!1);Object(i.useEffect)((()=>{g(T(t))}),[t]),Object(i.useLayoutEffect)((()=>{u(K(t.extension?t.extension:[])),m(K(o.extension?o.extension:[]))}),[t.extension,o.extension]),Object(i.useLayoutEffect)((()=>{c||p||d(!1),c===fa.DEFAULT&&d(!1),c===fa.SAME_WINDOW&&d(!0),c||p!==fa.SAME_WINDOW||d(!0)}),[c,p]);const b=(e,t,n)=>{t||n?t===fa.DEFAULT&&n===fa.SAME_WINDOW?R(e,v.hyperlinkTarget,s):t!==fa.DEFAULT||n?t!==fa.SAME_WINDOW||n?t||n!==fa.SAME_WINDOW||L(e,W(fa.DEFAULT),s):R(e,v.hyperlinkTarget,s):L(e,W(),s):L(e,W(),s)};return Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{label:n("Open item links in same tab"),value:l,onChange:()=>{(()=>{if(b(t,c,p),h){const e=((e,t)=>{const n=t.find((t=>t.linkId===e));return null===n||void 0===n?void 0:n.items[0].linkId})(t.linkId,r);e&&b(a[e],c,p)}})()}})})},xa=n.p+"static/media/arrow-undo-outline.e3d7c780.svg";n(540);var ya=e=>{const{t:t}=Object(In.a)(),[n,a]=Object(i.useState)(function(e){if(!e)return"";return e.valueString||""}(e.initial));return Object(nn.jsx)(li,{label:t("Initial value"),children:Object(nn.jsx)(hi,{value:n,onChange:e=>a(e.target.value),onBlur:()=>{const t=n?{valueString:n}:void 0;e.dispatchAction(t)}})})};var Oa=e=>{const{t:t}=Object(In.a)(),[n,a]=Object(i.useState)(function(e){var t;if(!e)return"";return(null===(t=e.valueInteger)||void 0===t?void 0:t.toString())||""}(e.initial));function r(e){return/^\d+$/.test(e)}return Object(nn.jsx)(li,{label:t("Initial value"),children:Object(nn.jsx)("input",{type:"number",value:n,onChange:e=>{(r(e.target.value)||""===e.target.value)&&a(e.target.value)},onBlur:()=>{const t=r(n)?{valueInteger:parseInt(n)}:void 0;e.dispatchAction(t)}})})};var ka=e=>{const{t:t}=Object(In.a)(),[n,a]=Object(i.useState)(function(e){var t;if(!e)return"";return(null===(t=e.valueDecimal)||void 0===t?void 0:t.toString())||""}(e.initial));function r(e){return!isNaN(parseFloat(e))}return Object(nn.jsx)(li,{label:t("Initial value"),children:Object(nn.jsx)("input",{type:"number",value:n,onChange:e=>{let{target:{value:t}}=e;const n=t.replace(/,/g,".");(r(n)||"-"===t||""===t)&&a(n)},onBlur:()=>{const t=r(n)?{valueDecimal:parseFloat(n)}:void 0;e.dispatchAction(t)}})})};var wa=e=>{const{t:t}=Object(In.a)(),[n,a]=Object(i.useState)(function(e){if(!e)return!1;return e.valueBoolean||!1}(e.initial));return Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>{const t=!n;a(t);const i=t?{valueBoolean:t}:void 0;e.dispatchAction(i)},value:n,label:t("Initial value")})})};var Ca=e=>{const{t:t}=Object(In.a)(),{state:n}=Object(i.useContext)(jn),{qContained:a}=n,[r,o]=Object(i.useState)((()=>{var t,n;const{item:{initial:i}}=e;return i&&i[0]&&(null===(t=i[0])||void 0===t||null===(n=t.valueCoding)||void 0===n?void 0:n.code)||""})()),[s,l]=Object(i.useState)((()=>{const{item:{initial:t}}=e;return void 0!==t&&void 0!==t[0]&&void 0!==t[0].valueCoding})());return Object(nn.jsxs)(li,{children:[Object(nn.jsx)(Ki,{label:t("Initial value"),onChange:()=>{const t=!s;l(t),t||(o(""),e.dispatchAction(void 0))},value:s}),s&&(()=>{let t;var n;e.item.answerValueSet?t=(()=>{const t=e.item.answerValueSet,n=null===a||void 0===a?void 0:a.find((e=>"#".concat(e.id)===t));return yn(n)})():t=(null===(n=e.item.answerOption)||void 0===n?void 0:n.map((e=>{var t,n,i;return{system:(null===(t=e.valueCoding)||void 0===t?void 0:t.system)||"",code:(null===(n=e.valueCoding)||void 0===n?void 0:n.code)||"",display:(null===(i=e.valueCoding)||void 0===i?void 0:i.display)||""}})))||[];return Object(nn.jsx)(nn.Fragment,{children:t.map((t=>{return n=t,Object(nn.jsx)("div",{className:"answerOption",children:Object(nn.jsxs)("div",{className:"radioBtn-div",children:[Object(nn.jsx)("input",{className:"radioBtn-input",type:"radio",name:n.system,id:n.code,checked:n.code===r,onChange:t=>{t.target.checked&&o(n.code||"");const i={valueCoding:{system:n.system,code:n.code,display:n.display}};e.dispatchAction(i)}})," ",Object(nn.jsx)("label",{htmlFor:n.code,children:n.display})]})},n.code);var n}))})})()]})};var Sa=e=>{const{dispatch:t}=Object(i.useContext)(jn),n=n=>{const i=n?[n]:void 0;t(qe(e.item.linkId,u.initial,i))};return Object(nn.jsx)(nn.Fragment,{children:function(){const t=e.item.initial?e.item.initial[0]:void 0;switch(e.item.type){case d.string:case d.text:return Object(nn.jsx)(ya,{initial:t,dispatchAction:n});case d.integer:return Object(nn.jsx)(Oa,{initial:t,dispatchAction:n});case d.quantity:case d.decimal:return Object(nn.jsx)(ka,{initial:t,dispatchAction:n});case d.boolean:return Object(nn.jsx)(wa,{initial:t,dispatchAction:n});case d.choice:case d.openChoice:return Object(nn.jsx)(Ca,{item:e.item,dispatchAction:n})}}()})};var Ia=e=>{const{t:t}=Object(In.a)(),{dispatch:n}=Object(i.useContext)(jn),a=_(e.item,v.guidanceAction),r=(e=>{var t,n;return(null===e||void 0===e||null===(t=e.extension)||void 0===t||null===(n=t.find((e=>e.url===v.guidanceAction)))||void 0===n?void 0:n.valueString)||""})(e.item);return Object(nn.jsxs)("div",{children:[Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>{a?R(e.item,v.guidanceAction,n):L(e.item,U(),n)},value:a,label:t("Redirect user")})}),a&&Object(nn.jsx)(li,{label:t("Relative redirect url"),children:Object(nn.jsx)(hi,{defaultValue:r,placeholder:t("For example /infopage"),onBlur:t=>{L(e.item,U(t.target.value),n)}})})]})};var qa=e=>{const{t:t}=Object(In.a)(),{dispatch:n}=Object(i.useContext)(jn),a=_(e.item,v.guidanceParam),[r,o]=Object(i.useState)((e=>{var t,n;return(null===e||void 0===e||null===(t=e.extension)||void 0===t||null===(n=t.find((e=>e.url===v.guidanceParam)))||void 0===n?void 0:n.valueString)||""})(e.item)),[s,l]=Object(i.useState)(""),d=e=>{Vt(e)?l(""):l(t("Parameter name must be 1-255 characters and can only contain numbers, _ and normal and capital letters a-z")),o(e)};return Object(nn.jsxs)("div",{children:[Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>{a?R(e.item,v.guidanceParam,n):L(e.item,H(),n)},value:a,label:t("Send as parameter")})}),a&&Object(nn.jsxs)(li,{label:t("Parameter name"),children:[Object(nn.jsx)(hi,{defaultValue:r,placeholder:t("For example hn_frontend_parametername"),onBlur:t=>{d(t.target.value),Vt(t.target.value)&&L(e.item,H(t.target.value),n)},onChange:e=>d(e.target.value)}),s&&Object(nn.jsx)("div",{className:"msg-error",children:s})]})]})};const Na=e=>!!e.options;var Da=e=>{let{options:t,onChange:n,value:i,placeholder:a,compact:r,displaySelectedValue:o}=e;const{t:s}=Object(In.a)();return Object(nn.jsxs)("div",{className:"selector ".concat(r?"compact":""),children:[Object(nn.jsxs)("select",{onChange:n,value:i||"",children:[a&&Object(nn.jsx)("option",{value:"",disabled:!0,children:a}),t.map(((e,t)=>{if(Na(e)){const n=e;return Object(nn.jsx)("optgroup",{label:s(e.display),children:n.options.map(((e,n)=>Object(nn.jsx)("option",{value:e.code,children:s(e.display)},"".concat(t,"-").concat(n))))},t)}const n=e;if(n)return Object(nn.jsx)("option",{value:n.code,children:n.display},t)}))]}),Object(nn.jsx)("span",{className:"down-arrow-icon"}),o&&Object(nn.jsx)("div",{className:"select-display-value",children:i})]})},Ta=function(e){return e.NONE="NONE",e.CUSTOM="CUSTOM",e}(Ta||{});var Aa=e=>{var t,n,a;const{t:r}=Object(In.a)(),{dispatch:o}=Object(i.useContext)(jn),[s,l]=Object(i.useState)(!1),[d,c]=Object(i.useState)([]);Object(i.useEffect)((()=>{const t=xi(e.item.type).options.flatMap((e=>Na(e)?e.options.map((e=>e.code)):e.code));c(t)}),[e.item.type]);const p=(t,n)=>{o(qe(e.item.linkId,t,n))},m=t=>{const n={url:v.fhirPath,valueString:t};L(e.item,n,o)},h=t=>{t===Ta.NONE?(l(!1),R(e.item,v.fhirPath,o),p(u.readOnly,!1)):t===Ta.CUSTOM?(l(!0),p(u.readOnly,!0)):(l(!1),m(t),p(u.readOnly,!0))},g=null!==(t=null===(n=e.item.extension)||void 0===n||null===(a=n.find((e=>e.url===v.fhirPath)))||void 0===a?void 0:a.valueString)&&void 0!==t?t:"",b=""!==(f=g)&&!d.includes(f);var f;return Object(nn.jsxs)(li,{label:r("Enrichment"),children:[Object(nn.jsx)(Da,{value:b||s?Ta.CUSTOM:g||Ta.NONE,options:[{display:r("No enrichment"),code:Ta.NONE},...xi(e.item.type).options,{display:r("Custom"),code:Ta.CUSTOM}],onChange:e=>{h(e.target.value)},displaySelectedValue:!!g&&!b&&!s}),(b||s)&&Object(nn.jsx)("textarea",{defaultValue:g,placeholder:r("Enter custom enrichment"),onBlur:e=>{e.target.value&&(l(!1),m(e.target.value))}})]})};var Ea=e=>{var t,n;const{t:i}=Object(In.a)(),a=(null===(t=e.item.extension)||void 0===t||null===(n=t.find((e=>e.url===v.calculatedExpression)))||void 0===n?void 0:n.valueString)||"";return Object(nn.jsx)(li,{label:i("Calculation formula"),children:Object(nn.jsx)("textarea",{defaultValue:a,onBlur:t=>{if(t.target.value){const n={url:v.calculatedExpression,valueString:t.target.value};e.updateExtension(n)}else e.removeExtension(v.calculatedExpression)},disabled:e.disabled})})};var Pa=e=>{var t,n;const{t:a}=Object(In.a)(),{dispatch:r}=Object(i.useContext)(jn),[o,s]=Object(i.useState)(null!==(t=null===(n=e.conditionalArray.find((t=>t.code===(e=>{var t;const n=null!==(t=z(e,v.copyExpression))&&void 0!==t?t:"",i=n.indexOf("'")+1,a=n.indexOf("')");return n.substring(i,a)})(e.item))))||void 0===n?void 0:n.code)&&void 0!==t?t:void 0);Object(i.useEffect)((()=>{var t;e.isDataReceiver?(t=e.isDataReceiver,e.canTypeBeReadonly&&r(qe(e.item.linkId,u.readOnly,t))):(R(e.item,v.copyExpression,r),s(void 0))}),[e.isDataReceiver]),Object(i.useEffect)((()=>{(t=>{if(t){var n;const i=null!==(n=z(e.getItem(t),v.calculatedExpression))&&void 0!==n?n:"";if(i){const t={url:v.calculatedExpression,valueString:i};L(e.item,t,r)}else R(e.item,v.calculatedExpression,r)}})(o),(t=>{if(t){var n;const i=[],a=e.item.type===d.boolean?"=":p.exists,o=(null===(n=e.item.enableWhen)||void 0===n?void 0:n.filter((e=>e.operator!==a)))||i;o.push({answerBoolean:!0,question:t,operator:a}),r(qe(e.item.linkId,u.enableWhen,o))}})(o)}),[o]);const l=async t=>{const n=t.target.value;s(n),(t=>{const n={url:v.copyExpression,valueString:"QuestionnaireResponse.descendants().where(linkId='".concat(t,"').answer.value")};L(e.item,n,r)})(n)};return Object(nn.jsxs)("div",{className:"horizontal equal",children:[Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:async()=>{P(e.item,f.dataReceiver,r),e.dataReceiverStateChanger(!e.isDataReceiver)},value:e.isDataReceiver,label:a("Retrieve input data from field")})}),e.isDataReceiver&&Object(nn.jsx)(li,{label:a("Select earlier question:"),children:Object(nn.jsx)(gi,{placeholder:a("Choose question:"),options:e.conditionalArray.filter((t=>(t=>{const n=e.getItem(t.code),i=n.type===e.item.type&&n.repeats===e.item.repeats;return e.item.type===d.quantity&&n.extension&&e.item.extension?i&&G(n.extension)===G(e.item.extension):i})(t))),value:o,onChange:e=>l(e)})})]})};let Va=function(e){return e.None="0",e.Default="1",e.KunPdf="2",e.KunSkjemautfyller="3",e.Hidden="4",e}({}),Fa=function(e){return e.Default="Default",e.Full="Full",e.Compact="Compact",e}({});const La=[{code:Va.Default,display:"Display in form filler and PDF",codeDisplay:"Default"},{code:Va.KunPdf,display:"Display only in PDF",codeDisplay:"KunPdf"},{code:Va.KunSkjemautfyller,display:"Display only in form filler",codeDisplay:"KunSkjemautfyller"},{code:Va.Hidden,display:"Hide in form filler and PDF"}],Ra=e=>[{code:Fa.Default,display:e("Show only answered options")},{code:Fa.Full,display:e("Full display")},{code:Fa.Compact,display:e("Compact display")}],Ma=(e,t,n)=>{n(Oe(e.linkId,t))},Ba=(e,t,n)=>{var i;const a=null===(i=e.code)||void 0===i?void 0:i.findIndex((e=>e.system===t));void 0!==a&&a>-1&&n(ke(e.linkId,a))};var _a=e=>{let{item:t}=e;const{t:n}=Object(In.a)(),{dispatch:a}=Object(i.useContext)(jn);return Object(nn.jsxs)(li,{label:n("View"),children:[Object(nn.jsx)(li,{sublabel:n("Choose if/where the component should be displayed"),children:Object(nn.jsx)(mi,{onChange:e=>{if(R(t,v.hidden,a),Ba(t,h.renderOptionsCodeSystem,a),e===Va.Hidden){const e={url:v.hidden,valueBoolean:!0};L(t,e,a)}else((e,t,n)=>{const i=La.find((e=>e.code===t));if(i){const t={code:i.code,display:i.codeDisplay,system:h.renderOptionsCodeSystem,id:l()};n(Oe(e.linkId,t))}})(t,e,a)},checked:(()=>{var e,n,i,a,r;return null!==(e=t.extension)&&void 0!==e&&null!==(n=e.find((e=>e.url===v.hidden)))&&void 0!==n&&n.valueBoolean?Va.Hidden:null!==(i=null===(a=t.code)||void 0===a||null===(r=a.find((e=>e.system===h.renderOptionsCodeSystem)))||void 0===r?void 0:r.code)&&void 0!==i?i:Va.None})(),options:La,name:"elementView-radio"})}),Kn(t)&&Object(nn.jsx)(li,{sublabel:n("Choose whether all answer options should be displayed in PDF"),children:Object(nn.jsx)(mi,{onChange:e=>{Ba(t,h.choiceRenderOptions,a),((e,t,n,i)=>{const a=Ra(n).find((e=>e.code===t));if(a){const t={code:a.code,display:a.display,system:h.choiceRenderOptions,id:l()};i(Oe(e.linkId,t))}})(t,e,n,a)},checked:(()=>{var e;const n=null===(e=t.code)||void 0===e?void 0:e.find((e=>e.system===h.choiceRenderOptions));return void 0===n?Fa.Default:n.code})(),options:Ra(n),name:"elementChoiceView-radio"})})]})};const za=e=>{let t="0";return e.forEach((e=>{e.code&&(e.system===h.scoringFormulas||e.code&&e.system===h.score)&&(t=e.code.toString())})),t};var Ua=e=>{var t,n,a,r,o,s,c,p,g,b,x,O,k,w,C,S,I,N,D;const{t:T}=Object(In.a)(),{state:V,dispatch:F}=Object(i.useContext)(jn),[M,_]=Object(i.useState)(!1),[z,U]=Object(i.useState)(e.item.linkId),{qItems:H,qOrder:W}=V,[K,G]=Object(i.useState)(A(e.item)),[Q,J]=Object(i.useState)(((e,t)=>{var n;return!!(null===(n=e.code)||void 0===n?void 0:n.find((e=>e.code===t)))})(e.item,jt.questionScore)),Z=(t,n)=>{F(qe(e.item.linkId,t,n))},Y=()=>{const t=X();F(t?Ie(t.linkId,[...e.parentArray,e.item.linkId]):(e=>{const t={linkId:l(),type:d.text,required:!1,repeats:!1,readOnly:!0,maxLength:250,_text:B(""),extension:[j(f.help)]};return{type:oe,item:t,order:e}})([...e.parentArray,e.item.linkId]))};function $(t){const n=!(void 0===H[t]||t===e.item.linkId);_(n)}const X=()=>{var t;const n=((null===(t=on(e.parentArray,W).find((t=>t.linkId===e.item.linkId)))||void 0===t?void 0:t.items)||[]).find((e=>q(H[e.linkId])));return n?H[n.linkId]:void 0},ee=t=>{L(e.item,t,F)},te=t=>{R(e.item,t,F)},ne=null!==(t=null===(n=e.item)||void 0===n||null===(a=n.extension)||void 0===a||null===(r=a.find((e=>e.url===v.entryFormat)))||void 0===r?void 0:r.valueString)&&void 0!==t?t:"",ie=null!==(o=null===(s=e.item)||void 0===s||null===(c=s.extension)||void 0===c||null===(p=c.find((e=>e.url===v.repeatstext)))||void 0===p?void 0:p.valueString)&&void 0!==o?o:"",ae=null===(g=e.item)||void 0===g||null===(b=g.extension)||void 0===b||null===(x=b.find((e=>e.url===v.minOccurs)))||void 0===x?void 0:x.valueInteger,re=null===(O=e.item)||void 0===O||null===(k=O.extension)||void 0===k||null===(w=k.find((e=>e.url===v.maxOccurs)))||void 0===w?void 0:w.valueInteger,se=(le=e.item,y(le,f.summary));var le;const de=(e=>y(e,f.summaryContainer))(e.item),ce=X();return Object(nn.jsxs)(nn.Fragment,{children:[Qn(e.item)&&Object(nn.jsx)("div",{className:"horizontal equal",children:Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>Z(u.readOnly,!e.item.readOnly),value:e.item.readOnly||!1,label:T("Read-only"),disabled:K})})}),$n(e.item)&&Object(nn.jsx)(Pa,{item:e.item,conditionalArray:e.conditionalArray,isDataReceiver:K,canTypeBeReadonly:Qn(e.item),dataReceiverStateChanger:G,getItem:e.getItem}),Zn(e.item)&&Object(nn.jsx)(Ea,{item:e.item,disabled:K,updateExtension:ee,removeExtension:te}),zn(e.item)&&Object(nn.jsx)(Aa,{item:e.item}),Yn(e.item)&&Object(nn.jsx)(li,{label:T("Placeholder text"),children:Object(nn.jsx)(hi,{defaultValue:ne,onBlur:e=>{e.target.value?ee({url:v.entryFormat,valueString:e.target.value}):te(v.entryFormat)}})}),Gn(e.item)&&Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(Sa,{item:e.item})}),Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:T("Links"),sublabel:T("Choose whether the links in the components should be opened in an external window")})}),Object(nn.jsx)(ja,{item:e.item}),Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsxs)("div",{className:"form-field ".concat(M?"field-error":""),children:[Object(nn.jsx)("label",{children:T("LinkId")}),Object(nn.jsx)(hi,{value:z,onChange:e=>{const{target:{value:t}}=e;$(t),U(e.target.value)},onBlur:function(t){var n,i,a;M||t.target.value===e.item.linkId||F((n=e.item.linkId,i=t.target.value,a=e.parentArray,{type:ve,oldLinkId:n,newLinkId:i,parentArray:a}))}}),M&&Object(nn.jsxs)("div",{className:"msg-error","aria-live":"polite",children:["".concat(T("LinkId is already in use")," "),Object(nn.jsxs)("button",{onClick:function(){U(e.item.linkId),$(e.item.linkId)},children:[Object(nn.jsx)("img",{src:xa,height:16})," ".concat(T("Sett tilbake til opprinnelig verdi"))]})]})]})}),Wn(e.item)&&Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:T("Prefix"),isOptional:!0,children:Object(nn.jsx)(hi,{defaultValue:e.item.prefix,onBlur:t=>{F(qe(e.item.linkId,u.prefix,t.target.value))}})})}),Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:T("Definition"),isOptional:!0,children:Object(nn.jsx)(ta,{value:e.item.definition,onBlur:t=>{F(qe(e.item.linkId,u.definition,t.target.value))}})})}),Jn(e.item)&&Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:T("Repetition"),sublabel:T("Choose whether the question group can be repeated")})}),Object(nn.jsxs)(li,{children:[Object(nn.jsx)(Ki,{onChange:()=>{e.item.repeats&&R(e.item,[v.repeatstext,v.minOccurs,v.maxOccurs],F),Z(u.repeats,!e.item.repeats)},value:e.item.repeats||!1,label:T("Repeatable")}),e.item.repeats&&Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(li,{label:T("Repeat button text"),sublabel:T('Default is set to "Add"'),children:Object(nn.jsx)(hi,{defaultValue:ie,onBlur:e=>{e.target.value?ee({url:v.repeatstext,valueString:e.target.value}):te(v.repeatstext)}})}),Object(nn.jsxs)("div",{className:"horizontal equal",children:[Object(nn.jsx)(li,{label:T("Min answers"),sublabel:T("Enter the minimum number of times the question group can be repeated"),children:Object(nn.jsx)("input",{type:"number",defaultValue:ae,onBlur:e=>{if(e.target.value){const t={url:v.minOccurs,valueInteger:parseInt(e.target.value)};ee(t)}else te(v.minOccurs)}})}),Object(nn.jsx)(li,{label:T("Max answers"),sublabel:T("Enter the maximum number of times the question group can be repeated"),children:Object(nn.jsx)("input",{type:"number",defaultValue:re,onBlur:e=>{if(e.target.value){const t={url:v.maxOccurs,valueInteger:parseInt(e.target.value)};ee(t)}else te(v.maxOccurs)}})})]})]})]})]}),e.item.type===d.group&&(ue=e.item.linkId,!!W.find((e=>e.linkId===ue)))&&Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:T("Step-view"),sublabel:T("Select whether the group should be a step in step-view")})}),Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>{P(e.item,f.step,F)},value:!(null===(C=e.item.extension)||void 0===C||!C.find((e=>{var t,n;return null===(t=e.valueCodeableConcept)||void 0===t||null===(n=t.coding)||void 0===n?void 0:n.find((e=>e.code===f.step))}))),label:T("Step in step-view")})})]}),Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:T("After completing the form"),sublabel:T("Choose what should happen after the user has completed the form")})}),Object(nn.jsx)(Ia,{item:e.item}),Object(nn.jsx)(qa,{item:e.item}),Hn(e.item)&&Object(nn.jsxs)("div",{children:[Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>{P(e.item,f.summary,F)},value:se,label:T("Put in PDF first")})}),Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>{P(e.item,f.summaryContainer,F)},value:de,label:T("Mark group in PDF")})})]}),Un(e.item)&&Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:T("Help"),sublabel:T("Select whether you want to give the user a help text")})}),Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>Y(),value:!!ce,label:T("Help icon")})}),!!ce&&Object(nn.jsx)(li,{label:T("Enter a helping text"),children:Object(nn.jsx)(pi,{data:(()=>{const e=X();return e?E(e):""})(),onBlur:e=>{const t=X();t&&((e,t)=>{const n=B(t);F(qe(e,u._text,n))})(t.linkId,e)}})})]}),Object(nn.jsx)(_a,{item:e.item}),Object(nn.jsx)(li,{label:T("Save capabilities"),children:Object(nn.jsx)(mi,{onChange:t=>{"0"===t?te(v.saveCapability):L(e.item,{url:v.saveCapability,valueCoding:{system:m.saveCapabilityValueSet,code:t}},F)},checked:null!==(S=null===(I=e.item.extension)||void 0===I||null===(N=I.find((e=>e.url===v.saveCapability)))||void 0===N||null===(D=N.valueCoding)||void 0===D?void 0:D.code)&&void 0!==S?S:"0",options:Bt,name:"elementSaveCapability-radio"})}),(e.item.type===d.integer||e.item.type===d.decimal||e.item.type===d.quantity)&&Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:T("Summation field"),sublabel:T("Select whether the field should be a summation field for section score or total score")})}),Object(nn.jsx)(li,{children:Object(nn.jsx)(mi,{onChange:t=>{var n;"0"===t?(Ba(e.item,h.scoringFormulas,F),Ba(e.item,h.score,F)):(Ba(e.item,h.scoringFormulas,F),Ba(e.item,h.score,F),Ma(e.item,Ut,F),Ma(e.item,{system:h.scoringFormulas,code:t,display:(n=t,n===jt.sectionScore?xt.sectionScore:xt.totalScore)},F))},checked:e.item.code?za(e.item.code):"0",options:_t,name:"scoreSumOptions-radio"})})]}),e.item.type===d.choice&&Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:T("Scoring"),sublabel:T("Select whether the field should be a scoring field")})}),Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>{Q?(Ba(e.item,h.score,F),Ba(e.item,h.scoringFormulas,F),((e,t)=>{if(e.answerOption){const a=(n=e.answerOption||[],i=v.ordinalValue,n.map((e=>{var t,n;return{valueCoding:{...e.valueCoding,extension:null===(t=e.valueCoding)||void 0===t||null===(n=t.extension)||void 0===n?void 0:n.filter((e=>e.url!==i))}}})));t(qe(e.linkId,u.answerOption,a))}var n,i})(e.item,F),J(!1)):(Ma(e.item,Ut,F),Ma(e.item,Ht,F),J(!0))},value:Q,label:T("Scoring field")})})]})]});var ue};var Ha=e=>{let{item:t,dispatchExtentionUpdate:n}=e;const{t:i}=Object(In.a)();return Object(nn.jsx)("div",{className:"horizontal",children:Object(nn.jsx)(li,{label:i("Display type"),children:Object(nn.jsx)(mi,{onChange:e=>{n(e)},checked:I(t)?f.checkbox:C(t)?f.dropdown:S(t)?f.radioButton:f.dynamic,options:[{code:f.dynamic,display:i("Dynamic")},{code:f.radioButton,display:i("Radio buttons")},{code:f.dropdown,display:i("Dropdown")},{code:f.checkbox,display:i("Checkbox (Allow selection of multiple values)")}],name:"choice-item-control-radio"})})})};n(541);var Wa=e=>{var t,n,a;let{item:r,answerOption:o,handleDrag:s,changeDisplay:l,changeCode:d,changeOrdinalValueExtension:c,deleteItem:u,showDelete:p,disabled:m}=e;const{t:h}=Object(In.a)(),[g,b]=Object(i.useState)(!1),f=g?"threeColumns":"twoColumns";return Object(i.useEffect)((()=>{b(((e,t)=>{var n;let i=!1;return null===(n=e.code)||void 0===n||n.forEach((e=>{e.code===t&&(i=!0)})),i})(r,"score"))}),[r]),Object(nn.jsxs)("div",{className:"answer-option-item align-everything",children:[!m&&Object(nn.jsx)("span",{...s,className:"reorder-icon","aria-label":"reorder element"}),Object(nn.jsxs)("div",{className:"answer-option-content",children:[Object(nn.jsx)(hi,{name:"beskrivelse",className:f,onBlur:e=>l(e),defaultValue:null===o||void 0===o||null===(t=o.valueCoding)||void 0===t?void 0:t.display,disabled:m,placeholder:h("Enter a title..")}),Object(nn.jsx)(hi,{name:"verdi",className:f,defaultValue:null===o||void 0===o||null===(a=o.valueCoding)||void 0===a?void 0:a.code,placeholder:h("Enter a value.."),onBlur:e=>d(e)},null===o||void 0===o||null===(n=o.valueCoding)||void 0===n?void 0:n.code),g&&Object(nn.jsx)(hi,{name:"sk\xe5ring",className:f,defaultValue:(()=>{var e,t;let n="";const i=(null===o||void 0===o||null===(e=o.valueCoding)||void 0===e?void 0:e.extension)&&(a=null===o||void 0===o||null===(t=o.valueCoding)||void 0===t?void 0:t.extension,r=v.ordinalValue,a.find((e=>e.url===r)));var a,r,s;i&&(n=(null===i||void 0===i||null===(s=i.valueDecimal)||void 0===s?void 0:s.toString())||"");return n})(),placeholder:h("Enter a scoring value.."),onChange:e=>{c(e)}})]}),p&&Object(nn.jsx)("button",{type:"button",name:h("Remove element"),onClick:u,className:"align-everything"})]})};var Ka=e=>{let{item:t,dispatchUpdateItem:n}=e;return Object(nn.jsx)(ea.a,{onDragEnd:e=>{if(!e.source||!e.destination||!e.draggableId)return;const i=e.source.index,a=e.destination.index;if(i!==a){const e=t.answerOption?[...t.answerOption]:[];n(u.answerOption,((e,t,n)=>{const i=e.splice(n,1);return e.splice(t,0,i[0]),e})(e,a,i))}},children:Object(nn.jsx)(ea.c,{droppableId:"droppable-".concat(t.linkId,"-answer-options"),type:"stuff",children:(e,i)=>{var a,r;return Object(nn.jsxs)("div",{ref:e.innerRef,style:(r=i.isDraggingOver,{background:r?"lightblue":"transparent"}),children:[null===(a=t.answerOption)||void 0===a?void 0:a.map(((e,i)=>{var a,r;return Object(nn.jsx)(ea.b,{draggableId:(null===(r=e.valueCoding)||void 0===r?void 0:r.id)||"1",index:i,children:(i,a)=>{var r,o,s,l;return Object(nn.jsx)("div",{ref:i.innerRef,...i.draggableProps,style:(s=a.isDragging,l=i.draggableProps.style,{userSelect:"none",background:s?"lightgreen":"transparent",cursor:"pointer",...l}),children:Object(nn.jsx)(Wa,{item:t,changeDisplay:i=>{var a;const r=(o=t.answerOption||[],s=(null===(a=e.valueCoding)||void 0===a?void 0:a.id)||"",l=i.target.value,o.map((e=>{var t;return(null===(t=e.valueCoding)||void 0===t?void 0:t.id)===s?{valueCoding:{...e.valueCoding,display:l,code:Vn(l)}}:e})));var o,s,l;n(u.answerOption,r)},changeCode:i=>{var a;const r=(o=t.answerOption||[],s=(null===(a=e.valueCoding)||void 0===a?void 0:a.id)||"",l=i.target.value,o.map((e=>{var t;return(null===(t=e.valueCoding)||void 0===t?void 0:t.id)===s?{valueCoding:{...e.valueCoding,code:l}}:e})));var o,s,l;n(u.answerOption,r)},changeOrdinalValueExtension:i=>{if(""===i.target.value){var a;const i=(o=t.answerOption||[],s=(null===(a=e.valueCoding)||void 0===a?void 0:a.id)||"",l=v.ordinalValue,o.map((e=>{var t,n,i;return(null===(t=e.valueCoding)||void 0===t?void 0:t.id)===s?{valueCoding:{...e.valueCoding,extension:null===(n=e.valueCoding)||void 0===n||null===(i=n.extension)||void 0===i?void 0:i.filter((e=>e.url!==l))}}:e})));n(u.answerOption,i)}else{var r;const a=((e,t,n)=>e.map((e=>{var i;return(null===(i=e.valueCoding)||void 0===i?void 0:i.id)===t?{valueCoding:{...e.valueCoding,extension:[{url:v.ordinalValue,valueDecimal:Number(n)}]}}:e})))(t.answerOption||[],(null===(r=e.valueCoding)||void 0===r?void 0:r.id)||"",i.target.value);n(u.answerOption,a)}var o,s,l},deleteItem:()=>{var i;const a=(r=t.answerOption||[],o=(null===(i=e.valueCoding)||void 0===i?void 0:i.id)||"",r.filter((e=>{var t;return(null===(t=e.valueCoding)||void 0===t?void 0:t.id)!==o})));var r,o;n(u.answerOption,a)},answerOption:e,handleDrag:i.dragHandleProps||void 0,showDelete:!(null===(r=t.answerOption)||void 0===r||!r.length)&&(null===(o=t.answerOption)||void 0===o?void 0:o.length)>2})})}},null===(a=e.valueCoding)||void 0===a?void 0:a.id)})),e.placeholder]})}})})};n(542);var Ga=e=>{let{items:t,onChange:n,defaultValue:a,placeholder:r}=e;const o=Object(i.useRef)(null),[s,l]=Object(i.useState)(a||""),[d,c]=Object(i.useState)([]),u=e=>{e.display&&l(e.display),c([]),n(e.code)},p=(e,t)=>{const n=e.split(new RegExp("(".concat(t,")"),"gi"));return Object(nn.jsx)("span",{children:n.map(((e,n)=>e.toLowerCase()===t.toLowerCase()?Object(nn.jsx)("strong",{children:e},e+n.toString()):e))})},m=()=>{l(""),c([...t])},h=e=>{o.current.contains(e.target)||c([])};Object(i.useEffect)((()=>(d.length>0?document.addEventListener("mousedown",h):document.removeEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)})),[d]);return Object(nn.jsxs)("div",{className:"typeahead",ref:o,children:[Object(nn.jsxs)("div",{className:"input-wrapper",children:[Object(nn.jsx)("i",{className:"search-icon"}),Object(nn.jsx)("input",{onFocus:e=>0===e.currentTarget.value.length&&c([...t]),onKeyUp:e=>(e=>{"Escape"===e.key&&m()})(e),onChange:e=>{const n=e.target.value;if(l(n),n.length>=1){const e=[...t].sort().filter((e=>e.display&&e.display.toLowerCase().includes(n.toLowerCase())));c(e.slice(0,5))}else c([])},placeholder:r||"S\xf8k..",value:s,type:"text"}),(s.length>0||d.length>0)&&Object(nn.jsx)("i",{className:"close-icon",role:"button","aria-label":"Remove text",onClick:()=>m()})]}),d.length>0&&Object(nn.jsx)("div",{className:"suggestions",children:Object(nn.jsx)("ul",{children:null===d||void 0===d?void 0:d.map(((e,t)=>Object(nn.jsx)("li",{"aria-label":e.display,role:"button",tabIndex:0,onKeyUp:t=>"Enter"===t.key&&(null===e||void 0===e?void 0:e.display)&&u(e),onClick:()=>e.display&&u(e),children:e.display&&Object(nn.jsx)("p",{children:p(e.display,s)})},t)))})})]})};var Qa=e=>{let{item:t,qContained:n,dispatchUpdateItem:i}=e;const{t:a}=Object(In.a)(),r=(null===n||void 0===n?void 0:n.map((e=>({code:e.id,display:e.title}))))||[],o=()=>t.answerValueSet&&t.answerValueSet.indexOf("#")>=0?t.answerValueSet.substring(1):"",s=e=>{(null===n||void 0===n?void 0:n.find((t=>t.id===e)))&&i(u.answerValueSet,"#".concat(e))},l=e=>{const t=null===n||void 0===n?void 0:n.find((t=>t.id===e));return yn(t)};return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(li,{label:a("Select answer valueset"),children:r.length>5?Object(nn.jsx)(Ga,{defaultValue:(()=>{if(t.answerValueSet&&t.answerValueSet.indexOf("#")>=0){var e;const i=t.answerValueSet.substring(1);return(null===n||void 0===n||null===(e=n.find((e=>e.id===i)))||void 0===e?void 0:e.title)||""}return""})(),items:r,onChange:s}):Object(nn.jsx)(gi,{value:o(),options:r||[],onChange:e=>s(e.target.value),placeholder:a("Choose an option..")})}),Object(nn.jsx)(li,{children:(()=>{const e=o();if(""!==e)return l(e).map((e=>Object(nn.jsx)("div",{className:"predefined-value",children:e.display},e.code)))})()})]})};var Ja=e=>{var t;let{item:n}=e;const{t:a}=Object(In.a)(),{dispatch:r,state:o}=Object(i.useContext)(jn),{qContained:s}=o,l=(e,t)=>{r(qe(n.linkId,e,t))},c=e=>{var t;r((t=n.linkId,{type:se,linkId:t,itemProperty:e}))};return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(Ha,{item:n,dispatchExtentionUpdate:e=>{R(n,v.itemControl,r),e!==f.checkbox||I(n)?e!==f.dropdown||C(n)?e!==f.radioButton||S(n)||L(n,Mt,r):L(n,Rt,r):L(n,Lt,r)}}),Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>{const e=n.type===d.openChoice?d.choice:d.openChoice;l(u.type,e)},value:n.type===d.openChoice,label:a("Allow free-text answer")})}),Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{onChange:()=>{if(n.answerValueSet){const e=gt();c(u.answerValueSet),l(u.answerOption,[Fn(e),Fn(e)])}else c(u.answerOption),l(u.answerValueSet,"#")},value:!!n.answerValueSet,label:a("Use predefined valueset")})}),n.answerValueSet?Object(nn.jsx)(Qa,{item:n,qContained:s,dispatchUpdateItem:l}):Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(li,{label:a("System"),children:Object(nn.jsx)(ta,{value:(()=>{var e,t;return n.answerOption&&n.answerOption.length>0&&(null===(e=n.answerOption[0])||void 0===e||null===(t=e.valueCoding)||void 0===t?void 0:t.system)||""})(),onBlur:e=>(e=>{const t=((e,t)=>e.map((e=>({valueCoding:{...e.valueCoding,system:t}}))))(n.answerOption||[],e);l(u.answerOption,t)})(e.target.value)})}),Object(nn.jsx)(li,{children:n.answerOption&&(null===(t=n.answerOption)||void 0===t?void 0:t.length)>0&&Object(nn.jsx)(Ka,{item:n,dispatchUpdateItem:l})}),Object(nn.jsx)("div",{className:"center-text",children:Object(nn.jsx)(qn,{title:a("+ Add option"),type:"button",onClick:()=>{const e=(e=>{var t;const n=e.length>0?null===(t=e[0].valueCoding)||void 0===t?void 0:t.system:gt(),i=Fn(n);return[...e,i]})(n.answerOption||[]);l(u.answerOption,e)},variant:"secondary"})})]})]})};n(543);let Za=function(e){return e.ALL="all",e.ANY="any",e}({});var Ya=e=>{let{currentItem:t,dispatchUpdateItemEnableBehavior:n}=e;const{t:i}=Object(In.a)();return Object(nn.jsx)("div",{className:"enablebehavior",children:Object(nn.jsx)(mi,{onChange:e=>{n(e)},checked:t.enableBehavior===Za.ALL?Za.ALL:Za.ANY,options:[{code:Za.ANY,display:i("At least one condition must be fulfilled")},{code:Za.ALL,display:i("All conditions must be fulfilled")}],name:"ew-behavior-".concat(t.linkId)})})},$a=n(795),Xa=n(800);Object(ai.setDefaultLocale)("nb"),Object(ai.registerLocale)("nb",oi.a);var er=e=>{let{disabled:t=!0,callback:n,nowButton:a,selected:r}=e;const{t:o}=Object(In.a)(),[s,l]=Object(i.useState)();return Object(nn.jsxs)("div",{className:"datepicker",children:[Object(nn.jsx)(ri.a,{disabled:t,placeholderText:o("dd.mm.yyyy 00:00"),selected:r||s,onChange:e=>{l(e),n&&n(e)},todayButton:a?o("Today"):void 0,timeIntervals:15,locale:"nb",showTimeSelect:!0,dateFormat:"dd.MM.yyyy HH:mm",timeCaption:o("Time")}),Object(nn.jsx)("i",{className:"calendar-icon","aria-label":"date and time picker"})]})};var tr=e=>{var t;let{conditionItem:n,index:a,enableWhen:r,itemEnableWhen:o,containedResources:s,dispatchUpdateItemEnableWhen:l}=e;const{state:c}=Object(i.useContext)(jn),{t:u}=Object(In.a)(),{qContained:p}=c,m=e=>{var t;return(null===(t=e.extension)||void 0===t?void 0:t.filter((e=>e.url===v.optionReference)).map((e=>{var t,n;return{code:(null===(t=e.valueReference)||void 0===t?void 0:t.reference)||"",display:null===(n=e.valueReference)||void 0===n?void 0:n.display}})))||[]},h=e=>{if(e.answerOption)return e.answerOption.map((e=>{var t,n;return{code:(null===(t=e.valueCoding)||void 0===t?void 0:t.code)||"",display:null===(n=e.valueCoding)||void 0===n?void 0:n.display}}));if(e.answerValueSet&&s){const t=s.find((t=>"#".concat(t.id)===e.answerValueSet));return yn(t).map((e=>({code:e.code||"",display:e.display})))}return[]},g=e=>{if(n.answerValueSet){var t;const i=null===p||void 0===p?void 0:p.find((e=>{var t;return e.id===(null===(t=n.answerValueSet)||void 0===t?void 0:t.replace("#",""))}));return null===(t=yn(i).find((t=>t.code===e)))||void 0===t?void 0:t.system}var i,a,r;return null===(i=n.answerOption)||void 0===i||null===(a=i.find((t=>{var n;return(null===(n=t.valueCoding)||void 0===n?void 0:n.code)===e})))||void 0===a||null===(r=a.valueCoding)||void 0===r?void 0:r.system};return Object(nn.jsxs)(nn.Fragment,{children:[w(n)&&Object(nn.jsx)(hi,{defaultValue:(null===(t=r.answerReference)||void 0===t?void 0:t.reference)||"",onBlur:e=>{const t=null===o||void 0===o?void 0:o.map(((t,n)=>a===n?{...t,answerReference:{reference:e.target.value}}:t));l(t)}}),Ft(n)&&Object(nn.jsx)(gi,{placeholder:u("Choose an option.."),options:m(n),value:(()=>{var e,t;const i=null===(e=r.answerReference)||void 0===e?void 0:e.reference;return null===(t=m(n).find((e=>e.code===i)))||void 0===t?void 0:t.code})(),onChange:e=>{const t=null===o||void 0===o?void 0:o.map(((t,n)=>{return a===n?(i=t,r=e.target.value,{...i,answerReference:{reference:r}}):t;var i,r}));l(t)}}),!Ft(n)&&!w(n)&&(n.type===d.choice||n.type===d.openChoice)&&Object(nn.jsx)(gi,{placeholder:u("Choose an option.."),options:h(n),value:(()=>{var e,t,i;const a=null===(e=r.answerCoding)||void 0===e?void 0:e.code,o=g(a||"");return!!o&&o===(null===(t=r.answerCoding)||void 0===t?void 0:t.system)?null===(i=h(n).find((e=>e.code===a)))||void 0===i?void 0:i.code:void 0})(),onChange:e=>{const t=null===o||void 0===o?void 0:o.map(((t,n)=>{return a===n?(i=t,r=e.target.value,{...i,answerCoding:{system:g(e.target.value),code:r}}):t;var i,r}));l(t)}}),n.type===d.boolean&&Object(nn.jsx)(gi,{placeholder:u("Choose an option.."),options:[{display:u("True"),code:"true"},{display:u("Not true"),code:"false"}],value:(r.answerBoolean||"").toString(),onChange:e=>{const t=null===o||void 0===o?void 0:o.map(((t,n)=>a===n?{...t,answerBoolean:"true"===e.target.value}:t));l(t)}}),n.type===d.date&&Object(nn.jsx)(si,{selected:r.answerDate?Object($a.default)(r.answerDate,"yyyy-MM-dd",new Date):void 0,disabled:!1,type:"date",callback:e=>{const t=null===o||void 0===o?void 0:o.map(((t,n)=>a===n?{...t,answerDate:Object(Xa.default)(e,"yyyy-MM-dd")}:t));l(t)}}),n.type===d.dateTime&&Object(nn.jsx)(er,{selected:r.answerDateTime?Object(ti.default)(r.answerDateTime):void 0,disabled:!1,callback:e=>{const t=null===o||void 0===o?void 0:o.map(((t,n)=>a===n?{...t,answerDateTime:Object(ni.a)(e)}:t));l(t)}}),n.type===d.time&&Object(nn.jsx)(si,{selected:r.answerTime?Object($a.default)(r.answerTime,"HH:mm:ss",new Date):void 0,type:"time",disabled:!1,callback:e=>{const t=null===o||void 0===o?void 0:o.map(((t,n)=>a===n?{...t,answerTime:Object(Xa.default)(e,"HH:mm:ss")}:t));l(t)}}),n.type===d.integer&&Object(nn.jsx)("input",{type:"number",defaultValue:r.answerInteger,onBlur:e=>{const t=null===o||void 0===o?void 0:o.map(((t,n)=>a===n?{...t,answerInteger:parseInt(e.target.value,10)}:t));l(t)}}),n.type===d.decimal&&Object(nn.jsx)("input",{type:"number",defaultValue:r.answerDecimal,onBlur:e=>{const t=null===o||void 0===o?void 0:o.map(((t,n)=>a===n?{...t,answerDecimal:parseFloat(e.target.value)}:t));l(t)}}),n.type===d.quantity&&Object(nn.jsx)("input",{type:"number",defaultValue:r.answerQuantity?r.answerQuantity.value:"",onBlur:e=>{var t,i;const r=(n.extension||[]).find((e=>e.url===v.questionnaireUnit)),s=r?null===(t=r.valueCoding)||void 0===t?void 0:t.system:"",d=r?null===(i=r.valueCoding)||void 0===i?void 0:i.code:"",c=null===o||void 0===o?void 0:o.map(((t,n)=>a===n?{...t,answerQuantity:{value:parseFloat(e.target.value),system:s,code:d}}:t));l(c)}}),(n.type===d.string||n.type===d.text)&&Object(nn.jsx)(hi,{defaultValue:r.answerString||"",onBlur:e=>{const t=null===o||void 0===o?void 0:o.map(((t,n)=>a===n?{...t,answerString:e.target.value}:t));l(t)}})]})};var nr=e=>{let{title:t,children:n}=e;return Object(nn.jsxs)("div",{className:"infobox",children:[Object(nn.jsx)("p",{children:t}),n]})};const ir={[p.exists]:"exists",[p.equal]:"is equal to",[p.notEqual]:"is not equal",[p.greaterThan]:"is greater than",[p.lessThan]:"is less than",[p.greaterThanOrEqual]:"is greater than or equal",[p.lessThanOrEqual]:"is less than or equal"};var ar=e=>{let{getItem:t,linkId:n,enableWhen:i,containedResources:a,enableBehavior:r}=e;const{t:o}=Object(In.a)(),s=(e,i)=>{if(!e.question)return Object(nn.jsx)("div",{},"".concat(n,"-empty-").concat(l()));if(!t(e.question))return console.warn(o("Error in enableWhen: item with linkId {0} does not exist").replace("{0}",e.question)),Object(nn.jsx)("div",{children:o("Error in enableWhen: item with linkId {0} does not exist").replace("{0}",e.question)},"".concat(n,"-").concat(e.question,"-").concat(e.operator,"-notfound"));let r;return r=e.hasOwnProperty("answerBoolean")?!0===e.answerBoolean?o("True"):o("Not true"):e.hasOwnProperty("answerDecimal")?e.answerDecimal.toString():e.hasOwnProperty("answerInteger")?e.answerInteger.toString():e.hasOwnProperty("answerDate")?Object(Xa.default)(new Date(e.answerDate),"dd.MM.yyyy"):e.hasOwnProperty("answerDateTime")?Object(Xa.default)(new Date(e.answerDateTime),"dd.MM.yyyy' 'HH:mm"):e.hasOwnProperty("answerTime")?e.answerTime:e.hasOwnProperty("answerString")?e.answerString:e.hasOwnProperty("answerCoding")?((e,n)=>{const i=t(e);let r;if(i.answerOption){var s;const e=i.answerOption.find((e=>{var t,i;return(null===(t=e.valueCoding)||void 0===t?void 0:t.system)===n.system&&(null===(i=e.valueCoding)||void 0===i?void 0:i.code)===n.code}));r=null===e||void 0===e||null===(s=e.valueCoding)||void 0===s?void 0:s.display}else if(i.answerValueSet&&a){const e=a.find((e=>"#".concat(e.id)===i.answerValueSet)),t=yn(e).find((e=>e.code===n.code&&e.system===n.system));r=null===t||void 0===t?void 0:t.display}return r||o("<not set>")})(e.question,e.answerCoding):e.hasOwnProperty("answerQuantity")?(e=>{let t="";if(e){const n=e.unit;t="".concat(e.value," ").concat(n||e.code)}return t})(e.answerQuantity):e.hasOwnProperty("answerReference")&&e.answerReference.reference||"",Object(nn.jsxs)("div",{children:[i&&Object(nn.jsx)("p",{children:i}),Object(nn.jsx)("strong",{children:t(e.question).text})," ",o(ir[e.operator])||o("<operator>")," ",Object(nn.jsx)("strong",{children:r})]},"".concat(n,"-").concat(e.question,"-").concat(e.operator,"-").concat(r))},d=r===Za.ALL?o("and"):o("or");return Object(nn.jsx)(nr,{title:o("Element will be shown if:"),children:i.map(((e,t)=>s(e,t>0?d:"")))})};var rr=e=>{const{t:t}=Object(In.a)();return Object(nn.jsx)(gi,{placeholder:t("Select an operator"),options:(i=e.conditionItem.type,i===d.boolean?wt:i===d.choice||i===d.openChoice?Ct:i===d.date||i===d.dateTime?St:It),value:(n=e.ew,p.exists&&!1===n.answerBoolean?p.notExists:n.operator),onChange:t=>{var n;const i=t.target.value,a=null===(n=e.thisItem.enableWhen)||void 0===n?void 0:n.map(((t,n)=>{let a={...t};return e.ewIndex!==n||i!==p.exists&&i!==p.notExists?e.ewIndex===n&&(a.operator=i,a.answerBoolean&&delete a.answerBoolean):a={question:t.question,operator:p.exists,answerBoolean:i===p.exists},a}));e.dispatchUpdateItemEnableWhen(a)}});var n,i};var or=e=>{let{getItem:t,conditionalArray:n,linkId:a,enableWhen:r,containedResources:o,itemValidationErrors:s}=e;const{t:l}=Object(In.a)(),{dispatch:c}=Object(i.useContext)(jn),m=e=>{c(qe(a,u.enableWhen,e))},h=e=>!(e===d.group||e===d.display||e===d.attachment||e===d.reference);return Object(nn.jsxs)("div",{children:[Object(nn.jsx)("p",{children:l("Set condition for display of element")}),r.map(((e,i)=>{const r=t(e.question),d=s.some((e=>"enableWhen"===e.errorProperty.substr(0,10)&&i===e.index));return Object(nn.jsxs)("div",{className:"enablewhen-box ".concat(d?"validation-error":""),children:[!e.question||(c=e.question,n.filter((e=>e.code===c)).length>0)?Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(li,{label:l("Select earlier question:"),children:Object(nn.jsx)(gi,{placeholder:l("Choose question:"),options:n,value:e.question,onChange:e=>{var n;const r=null===(n=t(a).enableWhen)||void 0===n?void 0:n.map(((t,n)=>i===n?{question:e.target.value,operator:p.equal}:t));m(r)}})}),!!r&&h(r.type)&&Object(nn.jsx)(li,{label:l("Show if answer is:"),children:Object(nn.jsxs)("div",{className:"enablewhen-condition",children:[Object(nn.jsx)(rr,{conditionItem:r,thisItem:t(a),ew:e,ewIndex:i,dispatchUpdateItemEnableWhen:m}),Object(nn.jsx)("div",{className:"enableWhen-condition__answer",children:e.operator!==p.exists&&Object(nn.jsx)(tr,{conditionItem:r,index:i,enableWhen:e,itemEnableWhen:t(a).enableWhen,containedResources:o,dispatchUpdateItemEnableWhen:m})})]})}),!!r&&!h(r.type)&&Object(nn.jsxs)("p",{children:["".concat(l("The form builder does not support enableWhen of type:")," "),Object(nn.jsx)("strong",{children:r.type})]})]}):Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("div",{children:l("This condition cannot be edited in the form builder:")}),Object(nn.jsx)("div",{children:JSON.stringify(e,void 0,2)})]}),Object(nn.jsx)(qn,{onClick:()=>{const e=t(a).enableWhen,n=null===e||void 0===e?void 0:e.filter(((e,t)=>t!==i));m(n)},variant:"secondary",icon:"ion-ios-trash",title:l("Remove condition")})]},"".concat(a,"-").concat(e.question,"-").concat(e.operator,"-").concat(i));var c})),Object(nn.jsx)(qn,{onClick:()=>{const e=t(a).enableWhen;m((e||[]).concat({}))},variant:"primary",icon:"ion-plus-round",title:l("Add a condition")}),r.length>1&&Object(nn.jsx)(Ya,{currentItem:t(a),dispatchUpdateItemEnableBehavior:e=>{c(qe(a,u.enableBehavior,e))}}),r.length>0&&Object(nn.jsx)(ar,{getItem:t,linkId:a,enableWhen:r,containedResources:o,enableBehavior:t(a).enableBehavior})]})};const sr="highlight",lr="inline",dr=[{code:"",display:"Display"},{code:sr,display:"Highlight"},{code:lr,display:"Expanded text"}];var cr=e=>{var t,n;let{item:a,parentArray:r}=e;const{t:o}=Object(In.a)(),{state:{qItems:s,qOrder:l},dispatch:c}=Object(i.useContext)(jn),p=[...r,a.linkId],m=ga(p,l),h=m.length>0?m[0].linkId:"",g=h?s[h]:void 0,b=null!==g&&void 0!==g&&null!==(t=g._text)&&void 0!==t&&t.extension&&(null===(n=g._text)||void 0===n?void 0:n.extension[0].valueMarkdown)||"",x=()=>T(a)?lr:N(a)?sr:"",y=e=>{e?L(a,e,c):R(a,v.itemControl,c),c(qe(a.linkId,u.type,d.display)),h&&c(Ie(h,[...r,a.linkId]))};return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(li,{label:o("Display type"),children:Object(nn.jsx)(mi,{onChange:e=>{if(e===lr){const e=j(f.inline),t=Ln();L(a,e,c),c(qe(a.linkId,u.type,d.text)),c(Se(t,[...r,a.linkId],0)),a.extension&&K(a.extension)&&L(t,W(K(a.extension)),c)}else if(e===sr){const e=j(f.highlight);y(e)}else y()},checked:x(),options:dr,name:"infotext-radio"})}),x()===lr&&Object(nn.jsx)(li,{label:o("Expanded text"),children:Object(nn.jsx)(pi,{data:b,onBlur:e=>{const t=B(e);c(qe(h,u._text,t)),c(qe(h,u.text,e))}})})]})};var ur=e=>{var t,n,a,r,o,s,l,c;let{item:p}=e;const{t:m}=Object(In.a)(),{dispatch:h}=Object(i.useContext)(jn),g=(null===p||void 0===p||null===(t=p.extension)||void 0===t||null===(n=t.find((e=>e.url===v.validationtext)))||void 0===n?void 0:n.valueString)||"",b=null===p||void 0===p||null===(a=p.extension)||void 0===a||null===(r=a.find((e=>e.url===v.minValue)))||void 0===r?void 0:r.valueInteger,f=null===p||void 0===p||null===(o=p.extension)||void 0===o||null===(s=o.find((e=>e.url===v.maxValue)))||void 0===s?void 0:s.valueInteger,j=null===p||void 0===p||null===(l=p.extension)||void 0===l||null===(c=l.find((e=>e.url===v.maxDecimalPlaces)))||void 0===c?void 0:c.valueInteger,x=(null===p||void 0===p?void 0:p.type)===d.decimal||(null===p||void 0===p?void 0:p.type)===d.quantity;return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsxs)("div",{className:"horizontal equal",children:[(null===p||void 0===p?void 0:p.type)!==d.quantity&&Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{label:m("Allow decimals"),value:x,onChange:()=>{const e=(null===p||void 0===p?void 0:p.type)===d.decimal?d.integer:d.decimal;var t;t=e,h(qe(p.linkId,u.type,t)),e===d.integer&&R(p,v.maxDecimalPlaces,h)}})}),x&&Object(nn.jsxs)(li,{children:[Object(nn.jsx)("label",{className:"#",children:m("Max number of decimals")}),Object(nn.jsx)("input",{type:"number",defaultValue:j,onBlur:e=>{if(e.target.value){const t={url:v.maxDecimalPlaces,valueInteger:parseInt(e.target.value)};L(p,t,h)}else R(p,v.maxDecimalPlaces,h)}})]})]}),Object(nn.jsxs)("div",{className:"horizontal equal",children:[Object(nn.jsx)(li,{label:m("Min value"),children:Object(nn.jsx)("input",{type:"number",defaultValue:b,onBlur:e=>{if(e.target.value){const t={url:v.minValue,valueInteger:parseInt(e.target.value)};L(p,t,h)}else R(p,v.minValue,h)}})}),Object(nn.jsx)(li,{label:m("Max value"),children:Object(nn.jsx)("input",{type:"number",defaultValue:f,onBlur:e=>{if(e.target.value){const t={url:v.maxValue,valueInteger:parseInt(e.target.value)};L(p,t,h)}else R(p,v.maxValue,h)}})})]}),Object(nn.jsx)(li,{label:m("Enter custom error message"),children:Object(nn.jsx)(hi,{defaultValue:g,placeholder:m("error message"),onBlur:e=>{if(e.target.value){const t={url:v.validationtext,valueString:e.target.value};L(p,t,h)}else R(p,v.validationtext,h)}})})]})};const pr="CUSTOM";var mr=e=>{var t,n,r,o,s,l;let{item:d}=e;const{t:c}=Object(In.a)(),{dispatch:p}=Object(i.useContext)(jn),m=[{display:c("Email"),code:"^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$"},{display:c("URL"),code:"^(http[s]?:\\/\\/(www\\.)?|ftp:\\/\\/(www\\.)?|www\\.){1}([0-9A-Za-z-\\.@:%_+~#=]+)+((\\.[a-zA-Z]{2,3})+)(/(.)*)?(\\?(.)*)?"},{display:c("National identity number"),code:"^((((0[1-9]|[12]\\d|3[01])([04][13578]|[15][02]))|((0[1-9]|[12]\\d|30)([04][469]|[15]1))|((0[1-9]|[12]\\d)([04]2)))|((([0-7][1-9]|[12]\\d|3[01])(0[13578]|1[02]))|(([0-7][1-9]|[12]\\d|30)(0[469]|11))|(([0-7][1-9]|[12]\\d)(02))))\\d{7}$"},{display:c("Telefonnummer"),code:"^((\\+|00)(\\d{1,3}))?\\d{5,12}$"},{display:c("Only norwegian characters"),code:"^[\xe6\xf8\xe5\xc6\xd8\xc5a-zA-Z ]*$"},{display:c("Only norwegian characters + hyphen and space (used for names)"),code:"^[\xe6\xf8\xe5\xc6\xd8\xc5a-zA-Z\\- ]*$"},{display:c("Only norwegian characters with line breaks"),code:"^(?:[\xe6\xf8\xe5\xc6\xd8\xc5a-zA-Z0-9,.!?@()+\\-\\/*]|[ \r\n\t])*$"},{display:c("Zip code"),code:"^(000[1-9]|0[1-9][0-9][0-9]|[1-9][0-9][0-9][0-8])$"}],h=e=>{const t={url:v.regEx,valueString:e};L(d,t,p)},g=(null===d||void 0===d||null===(t=d.extension)||void 0===t||null===(n=t.find((e=>e.url===v.validationtext)))||void 0===n?void 0:n.valueString)||"",b=(null===d||void 0===d||null===(r=d.extension)||void 0===r||null===(o=r.find((e=>e.url===v.regEx)))||void 0===o?void 0:o.valueString)||"",f=null===d||void 0===d||null===(s=d.extension)||void 0===s||null===(l=s.find((e=>e.url===v.minLength)))||void 0===l?void 0:l.valueInteger,j=!!b&&!m.find((e=>e.code===b)),[x,y]=a.a.useState(j);return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsxs)(li,{label:c("Answer should be:"),children:[Object(nn.jsx)(gi,{value:x?pr:b,options:[{display:c("No character validation"),code:""},...m,{display:c("Custom regular expression"),code:pr}],onChange:e=>{e.target.value?e.target.value===pr?(y(!0),R(d,v.regEx,p)):(y(!1),h(e.target.value)):(R(d,v.regEx,p),y(!1))}}),x&&Object(nn.jsx)("textarea",{defaultValue:b,placeholder:c("Enter custom regular expression"),onBlur:e=>{e.target.value?h(e.target.value):R(d,v.regEx,p)}})]}),Object(nn.jsx)(li,{label:c("Enter custom error message"),children:Object(nn.jsx)(hi,{defaultValue:g,onChange:e=>{if(e.target.value){const t={url:v.validationtext,valueString:e.target.value};L(d,t,p)}else R(d,v.validationtext,p)}})}),Object(nn.jsxs)("div",{className:"horizontal equal",children:[Object(nn.jsx)(li,{label:c("Minimum characters"),children:Object(nn.jsx)("input",{defaultValue:f,type:"number","aria-label":"minimum sign",onBlur:e=>{const t=parseInt(e.target.value);if(t){const e={url:v.minLength,valueInteger:t};L(d,e,p)}else R(d,v.minLength,p)}})}),Object(nn.jsx)(li,{label:c("Maksimum antall tegn"),children:Object(nn.jsx)("input",{defaultValue:d.maxLength||"",type:"number","aria-label":"maximum sign",onBlur:e=>{return t=parseInt(e.target.value.toString()),void p(qe(d.linkId,u.maxLength,t));var t}})})]})]})};let hr=function(e){return e.NOVALIDATION="no_validation",e.ABSOLUTE="abs",e.EXACT="exact",e.PLUSS="+",e.MINUS="-",e}({});const vr=e=>{const{t:t}=Object(In.a)();return Object(nn.jsxs)("div",{className:"horizontal",children:[Object(nn.jsx)("span",{children:"".concat(e.descriptionText," ").concat(t("is")," ")}),Object(nn.jsx)(gi,{options:[{code:hr.NOVALIDATION,display:t("<no validation>")},{code:hr.ABSOLUTE,display:t("a set date")},{code:hr.EXACT,display:t("today")},{code:hr.PLUSS,display:t("today plus")},{code:hr.MINUS,display:t("today minus")}],value:e.operatorValue,onChange:t=>{e.onChangeOperatorValue(t.target.value)}}),e.operatorValue===hr.ABSOLUTE&&Object(nn.jsx)(si,{selected:e.absoluteDateValue?Object($a.default)(e.absoluteDateValue,"yyyy-MM-dd",new Date):void 0,type:"date",disabled:!1,callback:t=>{const n=t?Object(Xa.default)(t,"yyyy-MM-dd"):"";e.onChangeAbsoluteValue(n)}}),(e.operatorValue===hr.PLUSS||e.operatorValue===hr.MINUS)&&Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("input",{type:"number",placeholder:t("number"),className:"date-validation-input",defaultValue:e.numberValue,onChange:t=>{e.onChangeNumberValue(t.target.value)}}),Object(nn.jsx)(gi,{placeholder:t("Unit"),options:[{code:"days",display:t("days")},{code:"weeks",display:t("weeks")},{code:"months",display:t("months")},{code:"years",display:t("year")}],value:e.unitValue,onChange:t=>{e.onChangeUnitValue(t.target.value)}})]})]})},gr=(e,t)=>{let n="";return e&&(n=e.split(" ")[1]),e&&!n&&(n=hr.EXACT),t&&!n&&(n=hr.ABSOLUTE),n||hr.NOVALIDATION},br=e=>e&&e.split(" ")[2]||"",fr=e=>e&&e.split(" ")[3]||"",jr=(e,t,n)=>e===hr.NOVALIDATION||e===hr.ABSOLUTE||""===e?"":e===hr.EXACT?"today()":"today() ".concat(e||""," ").concat(t||""," ").concat(n||"");var xr=e=>{var t,n,r,o,s,l,d,c,p,m;let{item:h}=e;const{t:g}=Object(In.a)(),{dispatch:b}=Object(i.useContext)(jn),f=(null===h||void 0===h||null===(t=h.extension)||void 0===t||null===(n=t.find((e=>e.url===v.validationtext)))||void 0===n?void 0:n.valueString)||"",j=null===h||void 0===h||null===(r=h.extension)||void 0===r||null===(o=r.find((e=>e.url===v.minValue)))||void 0===o?void 0:o.valueDate,x=null===h||void 0===h||null===(s=h.extension)||void 0===s||null===(l=s.find((e=>e.url===v.maxValue)))||void 0===l?void 0:l.valueDate,y=null===h||void 0===h||null===(d=h.extension)||void 0===d||null===(c=d.find((e=>e.url===v.fhirPathMinValue)))||void 0===c?void 0:c.valueString,O=null===h||void 0===h||null===(p=h.extension)||void 0===p||null===(m=p.find((e=>e.url===v.fhirPathMaxValue)))||void 0===m?void 0:m.valueString,[k,w]=a.a.useState(gr(y,j)),[C,S]=a.a.useState(br(y)),[I,q]=a.a.useState(fr(y)),[N,D]=a.a.useState(gr(O,x)),[T,A]=a.a.useState(br(O)),[E,P]=a.a.useState(fr(O)),V=(e,t)=>{if(e){L(h,{url:t,valueDate:e},b)}else R(h,t,b)},F=(e,t,n)=>{const i=e?[...n,{url:t,valueString:e}]:n;b(qe(h.linkId,u.extension,i))},M=(e,t,n)=>{const i=jr(e,t,n),a=(h.extension||[]).filter((e=>e.url!==v.fhirPathMinValue&&e.url!==v.minValue));F(i,v.fhirPathMinValue,a)},B=(e,t,n)=>{const i=jr(e,t,n),a=(h.extension||[]).filter((e=>e.url!==v.fhirPathMaxValue&&e.url!==v.maxValue));F(i,v.fhirPathMaxValue,a)};return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(li,{label:g("Enter custom error message"),children:Object(nn.jsx)(hi,{defaultValue:f,onBlur:e=>{if(e.target.value){const t={url:v.validationtext,valueString:e.target.value};L(h,t,b)}else R(h,v.validationtext,b)}})}),Object(nn.jsxs)(li,{children:[Object(nn.jsx)(vr,{descriptionText:g("Min date"),numberValue:C,unitValue:I,operatorValue:k,absoluteDateValue:j,onChangeAbsoluteValue:e=>{V(e,v.minValue)},onChangeNumberValue:e=>{S(e),M(k,e,I)},onChangeUnitValue:e=>{q(e),M(k,C,e)},onChangeOperatorValue:e=>{w(e),M(e,C,I)}}),Object(nn.jsx)(vr,{descriptionText:g("Max date"),numberValue:T,unitValue:E,operatorValue:N,absoluteDateValue:x,onChangeAbsoluteValue:e=>{V(e,v.maxValue)},onChangeNumberValue:e=>{A(e),B(N,e,E)},onChangeUnitValue:e=>{P(e),B(N,T,e)},onChangeOperatorValue:e=>{D(e),B(e,T,E)}})]})]})};var yr=e=>{var t,n;let{item:a}=e;const{t:r}=Object(In.a)(),{dispatch:o}=Object(i.useContext)(jn),s=(null===(t=a.extension)||void 0===t||null===(n=t.find((e=>e.url===v.maxSize)))||void 0===n?void 0:n.valueDecimal)||"";return Object(nn.jsx)(li,{label:r("Max file size in MB"),children:Object(nn.jsx)("input",{defaultValue:s,type:"number","aria-label":"maximum filesize",onBlur:e=>function(e){const t={url:v.maxSize,valueDecimal:e};L(a,t,o)}(parseFloat(e.target.value))})})};var Or=e=>{let{item:t}=e;return Object(nn.jsx)(nn.Fragment,{children:(e=>{switch(e){case d.attachment:return Object(nn.jsx)(yr,{item:t});case d.date:case d.dateTime:return Object(nn.jsx)(xr,{item:t});case d.string:case d.text:return Object(nn.jsx)(mr,{item:t});case d.integer:case d.decimal:case d.quantity:return Object(nn.jsx)(ur,{item:t})}})(t.type)})};var kr=e=>{var t;let{linkId:n,itemValidationErrors:a}=e;const{t:r}=Object(In.a)(),{state:o,dispatch:s}=Object(i.useContext)(jn),d=null===(t=o.qItems[n].code)||void 0===t?void 0:t.map((e=>({...e,id:e.id||l()}))),u=(e,t,i)=>{s(((e,t,n,i)=>({type:Y,linkId:e,index:t,property:n,value:i}))(n,e,t,i))};return Object(nn.jsxs)("div",{className:"codes",children:[d&&d.map(((e,t)=>((e,t)=>{const i=a.some((e=>"code"===e.errorProperty.substr(0,4)&&t===e.index));return Object(nn.jsxs)("div",{className:"code-section ".concat(i?"validation-error":""),children:[Object(nn.jsxs)("div",{className:"horizontal equal",children:[Object(nn.jsx)(li,{label:r("Display"),children:Object(nn.jsx)(hi,{defaultValue:e.display,onBlur:e=>u(t,c.display,e.target.value)})}),Object(nn.jsx)(li,{label:r("Code"),children:Object(nn.jsx)(hi,{defaultValue:e.code,onBlur:e=>u(t,c.code,e.target.value)})})]}),Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:r("System"),children:Object(nn.jsx)(ta,{value:e.system,onBlur:e=>u(t,c.system,e.target.value)})})}),Object(nn.jsx)("div",{className:"center-text",children:Object(nn.jsx)(qn,{title:"- ".concat(r("Remove Code")),type:"button",onClick:()=>s(ke(n,t)),variant:"secondary"})}),Object(nn.jsx)("hr",{style:{margin:"24px 0px"}})]},"".concat(e.id))})(e,t))),Object(nn.jsx)("div",{className:"center-text",children:Object(nn.jsx)(qn,{title:"+ ".concat(r("Add Code")),type:"button",onClick:()=>{s(Oe(n,{code:"",display:"",system:gt(),id:l()}))},variant:"primary"})})]})};n(544);var wr=e=>{var t;let{item:n}=e;const{t:a}=Object(In.a)(),{dispatch:r}=Object(i.useContext)(jn),o=(e,t,i)=>{var a;const o=null===n||void 0===n||null===(a=n.extension)||void 0===a?void 0:a.map((n=>{var a;return(null===(a=n.valueReference)||void 0===a?void 0:a.id)===i?{url:n.url,valueReference:{...n.valueReference,[e]:t}}:n}));o&&r(qe(n.linkId,u.extension,o))},s=null===(t=n.extension)||void 0===t?void 0:t.filter((e=>e.url===v.optionReference));return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(ea.a,{onDragEnd:e=>{if(!e.source||!e.destination||!e.draggableId)return;const t=e.source.index,i=e.destination.index;if(t!==i){const e=n.extension?[...n.extension]:[],a=e.filter((e=>e.url!==v.optionReference)),o=((e,t,n)=>{const i=e.splice(n,1);return e.splice(t,0,i[0]),e})(e.filter((e=>e.url===v.optionReference)),i,t);r(qe(n.linkId,u.extension,[...a,...o]))}},children:Object(nn.jsx)(ea.c,{droppableId:"droppable-".concat(n.linkId,"-option-reference"),children:(e,t)=>{return Object(nn.jsxs)("div",{ref:e.innerRef,style:(l=t.isDraggingOver,{background:l?"lightblue":"transparent"}),children:[null===s||void 0===s?void 0:s.map(((e,t)=>{var l,d;return Object(nn.jsx)(ea.b,{draggableId:(null===(d=e.valueReference)||void 0===d?void 0:d.id)||"1",index:t,children:(t,l)=>{var d,c,p,m,h;return Object(i.createElement)("div",{ref:t.innerRef,...t.draggableProps,style:(m=l.isDragging,h=t.draggableProps.style,{userSelect:"none",background:m?"lightgreen":"transparent",cursor:"pointer",...h}),key:null===(d=e.valueReference)||void 0===d?void 0:d.id},Object(nn.jsxs)("div",{className:"option-reference align-everything",children:[Object(nn.jsx)("span",{...t.dragHandleProps,className:"reorder-icon","aria-label":"reorder element"}),Object(nn.jsx)(hi,{name:"beskrivelse",placeholder:a("Select recipient.."),defaultValue:null===(c=e.valueReference)||void 0===c?void 0:c.display,onBlur:t=>{var n;return o("display",t.target.value,null===(n=e.valueReference)||void 0===n?void 0:n.id)}}),Object(nn.jsx)(hi,{name:"verdi",placeholder:a("Select endpoint.."),defaultValue:null===(p=e.valueReference)||void 0===p?void 0:p.reference,onBlur:t=>{var n;return o("reference",t.target.value,null===(n=e.valueReference)||void 0===n?void 0:n.id)}}),s.length>2&&Object(nn.jsx)("button",{type:"button",name:"Fjern element",className:"align-everything",onClick:()=>{var t;return(e=>{if(e){var t;const i=(null===(t=n.extension)||void 0===t?void 0:t.filter((t=>{var n;return(null===(n=t.valueReference)||void 0===n?void 0:n.id)!==e})))||[];r(qe(n.linkId,u.extension,[...i]))}})(null===(t=e.valueReference)||void 0===t?void 0:t.id)}})]}))}},null===(l=e.valueReference)||void 0===l?void 0:l.id)})),e.placeholder]});var l}})}),Object(nn.jsx)("div",{className:"center-text new-option-reference",children:Object(nn.jsx)(qn,{type:"button",variant:"secondary",onClick:()=>(()=>{const e=[{url:v.optionReference,valueReference:{reference:"",display:"",id:l()}}];n.linkId&&r(qe(n.linkId,u.extension,[...n.extension||[],...e]))})(),title:a("+ Add recipient")})})]})};var Cr=e=>{const{t:t}=Object(In.a)(),{dispatch:n}=Object(i.useContext)(jn),a=()=>{var t,n;return null===(t=e.item.extension)||void 0===t||null===(n=t.find((e=>e.url===v.questionnaireUnit)))||void 0===n?void 0:n.valueCoding},r=(t,i)=>{const r=a();let o;o=r?{...r,[t]:i.target.value}:{[t]:i.target.value};const s={url:v.questionnaireUnit,valueCoding:o};L(e.item,s,n)},o=(()=>{const e=a();if(!e)return yt;const{code:n="",display:i="",system:r=""}=e;return kt.some((e=>e.code!==Ot&&e.code===n&&t(e.display)===i&&e.system===r))?n:Ot})(),s=o===Ot,l=a(),{code:d,display:c,system:u}=l||{code:"",display:"",system:""};return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(li,{label:t("Select unit"),children:Object(nn.jsx)(gi,{options:kt,onChange:i=>{const{target:{value:a}}=i;if(a===yt)R(e.item,v.questionnaireUnit,n);else{const i=a===Ot?{code:"",display:"",system:gt()}:(e=>{const n=kt.find((t=>{let{code:n}=t;return n===e}));return n?{code:n.code,display:t(n.display),system:n.system}:n})(a),r={url:v.questionnaireUnit,valueCoding:i};L(e.item,r,n)}},value:o})}),s&&Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsxs)("div",{className:"horizontal equal",children:[Object(nn.jsx)(li,{label:t("Display"),children:Object(nn.jsx)(hi,{defaultValue:c,onBlur:e=>r("display",e)})}),Object(nn.jsx)(li,{label:t("Code"),children:Object(nn.jsx)(hi,{defaultValue:d,onBlur:e=>r("code",e)})})]}),Object(nn.jsx)("div",{className:"horizontal full",children:Object(nn.jsx)(li,{label:t("System"),children:Object(nn.jsx)(ta,{value:u,onBlur:e=>r("system",e)})})})]})]})};const Sr="dayTime",Ir=e=>{let{item:t,dispatch:n}=e;const{t:i}=Object(In.a)();return Object(nn.jsx)(li,{label:i("Date type"),children:Object(nn.jsx)(mi,{onChange:e=>{e===Sr?(R(t,v.itemControl,n),n(qe(t.linkId,u.type,d.dateTime))):(n(qe(t.linkId,u.type,d.date)),e?(e=>{const i=j(e);L(t,i,n)})(e):R(t,v.itemControl,n))},checked:(()=>{if(t.type===d.dateTime)return Sr;{var e,n,i,a;const r=null===t||void 0===t||null===(e=t.extension)||void 0===e?void 0:e.find((e=>e.url===v.itemControl));return(null===r||void 0===r||null===(n=r.valueCodeableConcept)||void 0===n||null===(i=n.coding)||void 0===i||null===(a=i.find((e=>!!e.code)))||void 0===a?void 0:a.code)||""}})(),options:[{code:Sr,display:i("Time, day, month and year")},{code:"",display:i("Day, month and year")},{code:f.yearMonth,display:i("Month and year")},{code:f.year,display:i("Year")}],name:"date-type-radio"})})};var qr=e=>{var t;const{t:i}=Object(In.a)(),[r,o]=a.a.useState(!!e.item._text),s=e.item.code?"(".concat(e.item.code.filter((e=>!(e.system===h.renderOptionsCodeSystem))).length,")"):"(0)",l=n(545),c=(t,n)=>{e.dispatch(qe(e.item.linkId,t,n))},p=()=>{let t="";var n,i,a;r&&(t=(null===(n=e.item._text)||void 0===n||null===(i=n.extension)||void 0===i||null===(a=i.find((e=>e.url===v.markdown)))||void 0===a?void 0:a.valueMarkdown)||"");return t||e.item.text||""},m=e=>{const t=B(e);c(u._text,t),c(u.text,(e=>{let t=l(e);return t=t.replaceAll("\\",""),t=t.replaceAll(/([ \n])+/g," "),t})(e))},g=e.item.enableWhen&&e.item.enableWhen.length>0?"(".concat(null===(t=e.item.enableWhen)||void 0===t?void 0:t.length,")"):"";return Object(nn.jsxs)("div",{className:"question",id:e.item.linkId,children:[Object(nn.jsxs)("div",{className:"question-form",children:[Object(nn.jsx)("h2",{className:"question-type-header",children:i((b=e.item,w(b)?"Recipient component":Ft(b)?"Recipient list":T(b)||N(b)||b.type===d.display?"Information text":b.type===d.string||b.type===d.text?"Text":b.type===d.group?"Group":b.type===d.date||b.type===d.dateTime?"Date":b.type===d.time?"Time":b.type===d.attachment?"Attachment":b.type===d.boolean?"Confirmation":b.type===d.choice||b.type===d.openChoice?"Choice":b.type===d.decimal||b.type===d.integer||b.type===d.quantity?"Number":""))}),Object(nn.jsxs)("div",{className:"horizontal",children:[Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{label:i("Text formatting"),value:r,onChange:()=>{const t=!r;o(t),t?m(e.item.text||""):c(u._text,void 0)}})}),_n(e.item)&&Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{label:i("Mandatory"),value:e.item.required||!1,onChange:()=>c(u.required,!e.item.required)})})]}),Object(nn.jsx)(li,{label:i("Text"),children:r?Object(nn.jsx)(pi,{data:p(),onBlur:m}):Object(nn.jsx)("textarea",{defaultValue:p(),onBlur:e=>{c(u.text,e.target.value)}})}),Bn(e.item)&&Object(nn.jsx)(li,{label:i("Sublabel"),isOptional:!0,children:Object(nn.jsx)(pi,{data:(()=>{var t,n;return(null===(t=e.item.extension)||void 0===t||null===(n=t.find((e=>e.url===v.sublabel)))||void 0===n?void 0:n.valueMarkdown)||""})(),onBlur:t=>{if(t){const n={url:v.sublabel,valueMarkdown:t};L(e.item,n,e.dispatch)}else R(e.item,v.sublabel,e.dispatch)}})}),w(e.item)?Object(nn.jsx)("div",{children:i("Recipient component is configured in Helsenorge admin")}):T(e.item)||N(e.item)||e.item.type===d.display?Object(nn.jsx)(cr,{item:e.item,parentArray:e.parentArray}):Ft(e.item)?Object(nn.jsx)(wr,{item:e.item}):e.item.type===d.date||e.item.type===d.dateTime?Object(nn.jsx)(Ir,{item:e.item,dispatch:e.dispatch}):e.item.type===d.choice||e.item.type===d.openChoice?Object(nn.jsx)(Ja,{item:e.item}):e.item.type===d.quantity?Object(nn.jsx)(Cr,{item:e.item}):e.item.type===d.string||e.item.type===d.text?Object(nn.jsx)(li,{children:Object(nn.jsx)(Ki,{label:i("Multi-line textfield"),value:e.item.type===d.text,onChange:()=>{e.item.type===d.text?c(u.type,d.string):c(u.type,d.text)}})}):Object(nn.jsx)(nn.Fragment,{})]}),Object(nn.jsxs)("div",{className:"question-addons",children:[Mn(e.item)&&Object(nn.jsx)(ii,{title:i("Add validation"),children:Object(nn.jsx)(Or,{item:e.item})}),Object(nn.jsx)(ii,{title:"".concat(i("Enable when")," ").concat(g),children:Object(nn.jsx)(or,{getItem:e.getItem,conditionalArray:e.conditionalArray,linkId:e.item.linkId,enableWhen:e.item.enableWhen||[],containedResources:e.containedResources,itemValidationErrors:e.itemValidationErrors})}),Object(nn.jsx)(ii,{title:"".concat(i("Code")," ").concat(s),children:Object(nn.jsx)(kr,{linkId:e.item.linkId,itemValidationErrors:e.itemValidationErrors})}),Object(nn.jsx)(ii,{title:i("Advanced settings"),children:Object(nn.jsx)(Ua,{item:e.item,parentArray:e.parentArray,conditionalArray:e.conditionalArray,getItem:e.getItem})})]})]});var b};var Nr=e=>{var t,n,a,r;let{validationErrors:o}=e;const{t:s}=Object(In.a)(),{state:l,dispatch:c}=Object(i.useContext)(jn),{previous:u,next:p,hasNext:m,hasPrevious:h}=(()=>{const{state:e,dispatch:t}=Object(i.useContext)(jn),{qCurrentItem:n,qItems:a,qOrder:r}=e,o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const i=t?a[t[t.length-1]]:void 0;return e.filter((e=>!k(a[e.linkId],i))).forEach((e=>{const i={linkId:e.linkId,path:[...t]};n.push(i),e.items&&o(e.items,[...t,e.linkId],n)})),n},s=o(r);function l(){return s.findIndex((e=>e.linkId===(null===n||void 0===n?void 0:n.linkId)))}return{next:()=>{const e=l();if(e<s.length-1){const n=s[e+1];t(ye(n.linkId,n.path))}},previous:()=>{const e=l();if(e>0){const n=s[e-1];t(ye(n.linkId,n.path))}},hasNext:()=>l()<s.length-1,hasPrevious:()=>l()>0}})(),v=()=>{setTimeout((()=>{c(ye())}),100)},g=!(null!==(t=l.qCurrentItem)&&void 0!==t&&t.linkId),b=Object(i.useRef)(null);Bi(b,v,g),Wi("ArrowLeft",u,g),Wi("ArrowRight",p,g),Wi("Escape",v,g);const f=null!==(n=l.qCurrentItem)&&void 0!==n&&n.linkId?l.qItems[null===(a=l.qCurrentItem)||void 0===a?void 0:a.linkId]:void 0,j=(null===(r=l.qCurrentItem)||void 0===r?void 0:r.parentArray)||[],x=f?((e,t,n,i)=>{if(!t||0===t.length)return ba(e,n,i);let a=n,r="",o="";return t.forEach((e=>{var t;r=ba(e,a,i,r,o),a=(null===(t=a.find((t=>t.linkId===e)))||void 0===t?void 0:t.items)||[],o=e})),ba(e,a,i,r,o)})(f.linkId,j,l.qOrder,l.qItems):void 0,y=x?"Element ".concat(x):"",O=o.filter((e=>e.linkId===(null===f||void 0===f?void 0:f.linkId)));return Object(nn.jsxs)(zi,{visible:!!f,position:"right",hide:v,title:y,children:[Object(nn.jsxs)("div",{className:"item-button-row",children:[Object(nn.jsx)("div",{className:"item-button-wrapper",children:h()&&Object(nn.jsx)(Nn,{type:"back",title:s("Previous (left arrow)"),onClick:u,color:"black"})}),Object(nn.jsx)("div",{className:"item-button-wrapper",children:m()&&Object(nn.jsx)(Nn,{type:"forward",title:s("Next (right arrow)"),onClick:p,color:"black"})}),f&&Object(nn.jsx)("div",{className:"pull-right",children:Xn(s,f,j,!0,c)})]}),O.length>0&&Object(nn.jsxs)("div",{className:"item-validation-error-summary",children:[Object(nn.jsx)("div",{children:s("Validation errors:")}),Object(nn.jsx)("ul",{children:O.map(((e,t)=>Object(nn.jsx)("li",{children:e.errorReadableText},t)))})]}),f&&Object(nn.jsx)(qr,{item:f,formExtensions:l.qMetadata.extension,parentArray:j,conditionalArray:(w=j,C=f.linkId,((e,t,n)=>{const i=(t,n,i)=>{const a=e.qItems[t];if(q(a)||N(a)||D(a)||T(a)||a.type===d.display)return[];const r="".concat("\xa0".repeat(4*n.length)).concat(a.text||"Ikke definert tittel"),o=r.length>120?"".concat(null===r||void 0===r?void 0:r.substr(0,120),"..."):r;return[{code:t,display:"".concat([...n,i+1].join(".")," ").concat(o)}]},a=(e,t)=>e.items.reduce(((e,n,r)=>[...e,...i(n.linkId,t,r),...a(n,[...t,r+1])]),[]),r=(e,t,n)=>{if(0===t.length)return[];const o=t[0],s=e.findIndex((e=>e.linkId===o)),l=t.length>1?s+1:s;return e.slice(0,l).reduce(((e,t,r)=>{const s=t.linkId===o?[]:a(t,[...n,r+1]);return[...e,...i(t.linkId,n,r),...s]}),[]).concat(r(e[s].items,t.slice(1),[...n,s+1]))};return r(e.qOrder,[...t,n],[])})(l,w,C)),getItem:e=>l.qItems[e],containedResources:l.qContained,dispatch:c,itemValidationErrors:O},"".concat(f.linkId))]});var w,C};n(546);var Dr=e=>{var t;let{option:n,translation:a,onBlur:r}=e;const[o,s]=Object(i.useState)(a);return Object(nn.jsxs)("div",{className:"translation-row",children:[Object(nn.jsx)(li,{children:Object(nn.jsx)(hi,{value:null===(t=n.valueCoding)||void 0===t?void 0:t.display,disabled:!0})}),Object(nn.jsx)(li,{children:Object(nn.jsx)(hi,{value:o,onChange:e=>{s(e.target.value)},onBlur:e=>r(e.target.value)})})]})};var Tr=e=>{let{targetLanguage:t,item:n,itemHeading:a}=e;const{t:r}=Object(In.a)(),{state:o,dispatch:s}=Object(i.useContext)(jn),l=o.qAdditionalLanguages||{},c=l&&l[t].items[n.linkId]||{},[u,p]=Object(i.useState)(c.text||""),m=!!n._text;function h(e,i){s(we(t,n.linkId,i,e))}function g(e,i){i&&s(((e,t,n,i)=>({type:ee,languageCode:e,linkId:t,text:n,optionCode:i}))(t,n.linkId,e,i))}function b(e,i,a,r){const o=ct(t,l,n.linkId,a);return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("div",{className:"translation-group-header",children:e}),Object(nn.jsxs)("div",{className:"translation-row",children:[Object(nn.jsx)(li,{children:r?Object(nn.jsx)(pi,{data:i,disabled:!0}):Object(nn.jsx)("textarea",{defaultValue:i,disabled:!0})}),Object(nn.jsx)(li,{children:r?Object(nn.jsx)(pi,{data:o,onBlur:e=>h(e,a)}):Object(nn.jsx)("textarea",{defaultValue:o,onBlur:e=>h(e.target.value,a)})})]})]})}return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("div",{className:"translation-group-header",children:a}),Object(nn.jsxs)("div",{className:"translation-row",children:[Object(nn.jsx)(li,{children:function(){if(m){var e,t,i;const a=null===(e=n._text)||void 0===e||null===(t=e.extension)||void 0===t||null===(i=t.find((e=>e.url===v.markdown)))||void 0===i?void 0:i.valueMarkdown;return Object(nn.jsx)(pi,{data:a||n.text||"",disabled:!0})}return Object(nn.jsx)("textarea",{defaultValue:n.text,disabled:!0})}()}),Object(nn.jsx)(li,{children:m?Object(nn.jsx)(pi,{data:u,onBlur:e=>h(e,Ee.text)}):Object(nn.jsx)("textarea",{value:u,onChange:e=>p(e.target.value),onBlur:e=>h(e.target.value,Ee.text)})})]}),Dt(n)&&b(r("Sublabel"),Dt(n),Ee.sublabel,!0),Tt(n)&&b(r("Repeat button text"),Tt(n),Ee.repeatsText,!1),At(n)&&b(r("Error message for validation error"),At(n),Ee.validationText,!1),Et(n)&&b(r("Placeholder text"),Et(n),Ee.entryFormatText,!1),Nt(n)&&b(r("Prefix"),Nt(n),Ee.prefix,!1),(n.type===d.text||n.type===d.string)&&qt(n)&&b(r("Initial value"),qt(n),Ee.initial,!1),n.answerOption&&Object(nn.jsx)(nn.Fragment,{children:n.answerOption.map((e=>function(e){var i;if(null!==(i=e.valueCoding)&&void 0!==i&&i.code){const i=c.answerOptions&&c.answerOptions[e.valueCoding.code]||"";return Object(nn.jsx)(Dr,{option:e,translation:i,onBlur:t=>{var n;return g(t,null===(n=e.valueCoding)||void 0===n?void 0:n.code)}},"".concat(t,"-").concat(n.linkId,"-").concat(e.valueCoding.code))}return null}(e)))})]})};var Ar=e=>{let{dispatch:t,metadataProperty:n,state:a,targetLanguage:r}=e;const{t:o}=Object(In.a)(),{propertyName:s,label:l,markdown:d,validate:c}=n,u=a.qMetadata[s],p=a.qAdditionalLanguages&&a.qAdditionalLanguages[r]?a.qAdditionalLanguages[r].metaData:{},[m,h]=Object(i.useState)(p[s]),v=c?o(c(m,a,r)):"",g=e=>{v||t(((e,t,n)=>({type:te,languageCode:e,propertyName:t,translation:n}))(r,s,e))};return Object(nn.jsxs)("div",{children:[Object(nn.jsx)("div",{className:"translation-group-header",children:o(l)}),Object(nn.jsxs)("div",{className:"translation-row",children:[Object(nn.jsx)(li,{children:Object(nn.jsxs)(nn.Fragment,{children:[d&&Object(nn.jsx)(pi,{data:u||"",disabled:!0}),!d&&Object(nn.jsx)("textarea",{defaultValue:u,disabled:!0})]})}),Object(nn.jsxs)(li,{children:[Object(nn.jsx)(nn.Fragment,{children:d?Object(nn.jsx)(pi,{data:m,onBlur:e=>{g(e)},placeholder:o("Enter translation..")}):Object(nn.jsx)("textarea",{defaultValue:m,onBlur:e=>{g(e.target.value)},onChange:e=>{h(e.target.value)},placeholder:o("Enter translation..")})}),v&&Object(nn.jsx)("div",{className:"msg-error","aria-live":"polite",children:v})]})]})]},"".concat(r,"-").concat(s))};var Er=e=>{let{state:t,targetLanguage:n,dispatch:i}=e;const{t:a}=Object(In.a)();return Object(nn.jsxs)("div",{className:"translation-group",children:[Object(nn.jsx)("div",{className:"translation-section-header",children:a("Questionnaire details")}),lt.map((e=>Object(nn.jsx)(Ar,{dispatch:i,metadataProperty:e,state:t,targetLanguage:n},e.propertyName)))]})};var Pr=e=>{let{qContained:t,targetLanguage:n,translations:i,dispatch:a}=e;const{t:r}=Object(In.a)(),o=i[n].contained,s=e=>{const t=yn(e),{id:i}=e;return t&&i?Object(nn.jsx)("div",{children:t.map((e=>{var t;const{code:r,display:s}=e;if(!r)return Object(nn.jsx)(nn.Fragment,{});const l=null===(t=o[i])||void 0===t?void 0:t.concepts[r];return Object(nn.jsxs)("div",{className:"translation-row",children:[Object(nn.jsx)(li,{children:Object(nn.jsx)("textarea",{defaultValue:s,disabled:!0})}),Object(nn.jsx)(li,{children:Object(nn.jsx)("textarea",{defaultValue:l,onBlur:e=>{var t,o,s,l;a((t=n,o=i,s=r,l=e.target.value,{type:ie,languageCode:t,valueSetId:o,conceptId:s,translation:l}))}})})]},"".concat(n,"-").concat(r))}))}):(console.error("ValueSet ".concat(e.title," doesn't contain concepts")),Object(nn.jsx)(nn.Fragment,{}))};return t?Object(nn.jsxs)("div",{children:[Object(nn.jsx)("div",{className:"translation-section-header",children:r("Predefined valuesets")}),t.map((e=>Object(nn.jsxs)("div",{className:"translation-group",children:[Object(nn.jsx)("div",{className:"translation-group-header",children:e.title}),s(e)]},"".concat(n,"-").concat(e.id))))]}):null};var Vr=e=>{let{targetLanguage:t,translations:n,items:i,dispatch:a}=e;const{t:r}=Object(In.a)(),o=Object.values(i).filter((e=>D(e)));if(!o||o.length<1)return null;const s=n[t].sidebarItems,l=(e,n)=>{a(((e,t,n)=>({type:ae,languageCode:e,linkId:t,value:n}))(t,e,n))};return Object(nn.jsxs)("div",{children:[Object(nn.jsx)("div",{className:"translation-section-header",children:r("Sidebar")}),o.map((e=>{if(!e.code||!e._text||!e._text.extension)return null;const{code:n,display:i}=e.code[0],{valueMarkdown:a}=e._text.extension[0];return Object(nn.jsxs)("div",{className:"translation-group",children:[Object(nn.jsxs)("div",{className:"translation-group-header",children:[i," (",n,")"]}),Object(nn.jsxs)("div",{className:"translation-row",children:[Object(nn.jsx)(li,{children:Object(nn.jsx)(pi,{data:a||"",disabled:!0})}),Object(nn.jsx)(li,{children:Object(nn.jsx)(pi,{data:(r=e.linkId,s[r]&&s[r].markdown||""),onBlur:t=>l(e.linkId,t)})})]})]},"".concat(t,"-").concat(e.linkId));var r}))]})};var Fr=e=>{let{targetLanguage:t,translations:n,extensions:i,dispatch:a}=e;const{t:r}=Object(In.a)(),o=n[t].settings,s=(e,n)=>{a(((e,t,n)=>({type:ne,languageCode:e,extension:t,translatedValue:n}))(t,e,n))};return Object(nn.jsxs)("div",{children:[Object(nn.jsx)("div",{className:"translation-section-header",children:r("Questionnaire settings")}),Object.values(dt).map((e=>{if(!e)return;const n=(i||[]).find((t=>t.url===e.extension));let a;n&&(a=e.getValue(n));const l=(d=e.extension,o[d]);var d;let c;return l&&(c=e.getValue(l)),Object(nn.jsxs)("div",{className:"translation-group",children:[Object(nn.jsx)("div",{className:"translation-group-header",children:r(e.label)}),Object(nn.jsxs)("div",{className:"translation-row",children:[Object(nn.jsx)(li,{children:Object(nn.jsx)("textarea",{defaultValue:a,disabled:!0})}),Object(nn.jsx)(li,{children:Object(nn.jsx)("textarea",{defaultValue:c,onBlur:t=>{const n=e.generate(t.target.value);s(e.extension,t.target.value?n:null)},placeholder:r("Enter translation..")})})]})]},"".concat(t,"-").concat(e))}))]})};var Lr=e=>{var t;const{t:n}=Object(In.a)(),{state:a,dispatch:r}=Object(i.useContext)(jn),{qItems:o,qOrder:s,qAdditionalLanguages:l,qMetadata:d,qContained:c}=a,[u,p]=Object(i.useState)([]),[m,h]=Object(i.useState)(20),g=Object.values(o).filter((e=>(e=>{var t;return!(null!==(t=e.extension)&&void 0!==t&&t.some((e=>e.url===v.hidden&&e.valueBoolean)))&&!D(e)})(e))),b=Ai(a),f=null===(t=a.qContained)||void 0===t?void 0:t.filter((e=>e.id&&(null===b||void 0===b?void 0:b.includes(e.id))&&e)),j=t=>{if(!l)return null;const n=o[t];return n?Object(nn.jsx)(Tr,{targetLanguage:e.targetLanguage,item:n,itemHeading:"Expanded text"}):null},x=t=>{if(!l)return null;const i=E(o[t]),a=ct(e.targetLanguage,l,t,Ee.text);return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("div",{className:"translation-group-header",children:n("Help text")}),Object(nn.jsxs)("div",{className:"translation-row",children:[Object(nn.jsx)(li,{children:Object(nn.jsx)(pi,{data:i,disabled:!0})}),Object(nn.jsx)(li,{children:Object(nn.jsx)(pi,{data:a,onBlur:n=>r(we(e.targetLanguage,t,Ee.text,n))})})]})]})};Object(i.useEffect)((()=>{const e=(t,n,i)=>{let a=1;t.filter((e=>!D(o[e.linkId]))).forEach((t=>{var r;const s=t.items.find((e=>q(o[e.linkId]))),l=T(o[t.linkId])?null===(r=t.items[0])||void 0===r?void 0:r.linkId:void 0,d="".concat(n,".").concat(a),c={linkId:t.linkId,path:d};s&&(c.helpItemLinkId=s.linkId),l&&(c.inlineItemLinkId=l),q(o[t.linkId])||(i.push(c),a++),t.items&&!T(o[t.linkId])&&e(t.items,d,i)}))};(()=>{const t=[];s.filter((e=>!k(o[e.linkId]))).forEach(((n,i)=>{var a;const r="".concat(i+1),s={linkId:n.linkId,path:r},l=n.items.find((e=>q(o[e.linkId])));l&&(s.helpItemLinkId=l.linkId);const d=T(o[n.linkId])?null===(a=n.items[0])||void 0===a?void 0:a.linkId:void 0;d&&(s.inlineItemLinkId=d),t.push(s),n.items&&!d&&e(n.items,r,t)})),p([...t])})();const t={root:document.getElementById("translation-modal"),rootMargin:"63px 0px 0px 0px",threshold:[0,.5,1]},n=new IntersectionObserver((e=>{1===e[0].intersectionRatio&&h((e=>e+25))}),t),i=document.getElementById("bottom-translation-modal");return i&&n.observe(i),function(){n.disconnect()}}),[o,s]);return Object(nn.jsx)("div",{className:"translation-modal",children:Object(nn.jsxs)(Dn,{close:e.close,title:n("Translate questionnaire"),id:"translation-modal",bottomCloseText:n("Close"),children:[(()=>{var t,n;return Object(nn.jsx)("div",{className:"sticky-header",children:d.language&&Object(nn.jsxs)("div",{className:"horizontal equal",children:[Object(nn.jsx)("div",{children:Object(nn.jsx)("label",{children:null===(t=rt(d.language))||void 0===t?void 0:t.display})}),Object(nn.jsx)("div",{children:Object(nn.jsx)("label",{children:null===(n=rt(e.targetLanguage))||void 0===n?void 0:n.display})})]})})})(),Object(nn.jsx)("div",{style:{position:"relative"},children:Object(nn.jsx)(nn.Fragment,{children:l&&Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(Er,{state:a,targetLanguage:e.targetLanguage,dispatch:r}),Object(nn.jsx)(Fr,{targetLanguage:e.targetLanguage,translations:l,extensions:d.extension,dispatch:r}),Object(nn.jsx)(Vr,{targetLanguage:e.targetLanguage,translations:l,items:o,dispatch:r}),!!c&&(null===c||void 0===c?void 0:c.length)>0&&Object(nn.jsx)(Pr,{qContained:f,targetLanguage:e.targetLanguage,translations:l,dispatch:r}),Object(nn.jsxs)("div",{children:[Object(nn.jsx)("div",{className:"translation-section-header",children:n("Elements")}),(y=u.filter(((e,t)=>t<=m)),g&&l?y.map((t=>{const i=g.find((e=>e.linkId===t.linkId));return i?Object(nn.jsx)("div",{children:Object(nn.jsxs)("div",{className:"translation-item",children:[Object(nn.jsx)(Tr,{item:i,targetLanguage:e.targetLanguage,itemHeading:"".concat(n("Element")," ").concat(t.path)}),t.helpItemLinkId&&x(t.helpItemLinkId),t.inlineItemLinkId&&j(t.inlineItemLinkId)]})},"".concat(e.targetLanguage,"-").concat(i.linkId)):null})):[])]}),Object(nn.jsx)("div",{id:"bottom-translation-modal",style:{height:1,position:"absolute",bottom:500}})]})})})]})});var y},Rr=n(46),Mr=n(88),Br=n(432);const _r=e=>"en-GB"===e?{deleteButtonText:"Delete",validationSummaryHeader:"Check that the following are filled in correctly:",validationFileMax:"File size must be less than 25MB",validationFileType:"The file type must be jpeg, png, or pdf",supportedFileFormats:"Valid file formats are jpeg, png and pdf",selectDefaultPlaceholder:"Select one of the options.",resetTime:"Reset time",errorAfterMaxDate:"Date cannot be after maximum date",errorBeforeMinDate:"Date cannot be before minimum date",dateRequired:"Select date, or enter date as follows: dd.mm.yyyy.",oppgiTid:" Enter time",ugyldigTid:"Invalid time",ugyldigDatoTid:"Invalid date and time",oppgiVerdi:"Select one of the options.",oppgiGyldigVerdi:"Please enter a valid value",formCancel:"Cancel",formSend:"Submit",formSave:"Show QuestionnaireResponse",formError:"Check that everything is filled in correctly.",formOptional:"(optional)",formRequired:"(required)",repeatButtonText:"Add",avsluttSkjema:"Discard changes",fortsett:"Continue editing",confirmDeleteButtonText:"Delete row",confirmDeleteCancelButtonText:"Discard changes",confirmDeleteHeading:"There are unsaved changes",confirmDeleteDescription:"If you delete the row, your changes will be discarded.",minutePlaceholder:"mm",hourPlaceholder:"hh",ikkeBesvart:"Not answered",uploadButtonText:"Upload file",filterDateCalendarButton:"Select date",filterDateNavigateBackward:"Back",filterDateNavigateForward:"Forward",filterDateErrorDateFormat:"The date is entered in the wrong format",filterDateErrorBeforeMinDate:"From date can not be earlier than before date",filterDateErrorAfterMaxDate:"From date can not be later than to date",validationNotAllowed:"is not allowed",formRequiredErrorMessage:"This field is required",deleteAttachmentText:"Delete",autoSuggestLoadError:"Technical error",autosuggestNoSuggestions:'No results found for "{0}". Try another word or check for spelling errors.',stringOverMaxLengthError:"You have typed too many characters. Make the text shorter.",maxLengthText:"Maximum {0} characters",chooseFilesText:"Select files",skipLinkText:"Go to navigator",clearDate:"Remove date",calendarLabel:"Calendar",closeDatePicker:"Close",focusStartDate:"Use the calendar and select a date",jumpToPrevMonth:"Go backward to last month",jumpToNextMonth:"Go forward to next month",keyboardShortcuts:"Keyboard shortcuts",showKeyboardShortcutsPanel:"Open the keyboard shortcuts panel",hideKeyboardShortcutsPanel:"Close the keyboard shortcut panel",enterKey:"Enter key",leftArrowRightArrow:"Right and left arrow keys",upArrowDownArrow:"Up and down arrow keys",pageUpPageDown:"Page up and Page down key",homeEnd:"Home and End key",escape:"Escape key",questionMark:"Question mark",openThisPanel:"Open this panel",selectFocusedDate:"Select the date that has focus",moveFocusByOneDay:"Move one day backward (left) and forward (right)",moveFocusByOneWeek:"Move one week backward (up) and forward (down)",moveFocusByOneMonth:"Change month",moveFocustoStartAndEndOfWeek:"Go to the first or last day of the week",returnFocusToInput:"Return to the date in the input field",year_field_invalid:"Enter a valid value for the year field",year_field_maxdate:"The latest year you can choose is",year_field_mindate:"The earliest year you can choose is",year_field_required:"Year is required",yearmonth_field_invalid:"Invalid value",yearmonth_field_invalid_year:"You must enter a valid year",yearmonth_field_maxdate:"The latest time you can choose is",yearmonth_field_mindate:"The earliest time you can choose is",yearmonth_field_month_placeholder:"Choose month",yearmonth_field_required:"Year and month is required",yearmonth_field_year_placeholder:"Choose year",adresseKomponent_header:"Who is the recipient?",adresseKomponent_skjemaSendesTil:"Questionnaire will be sent to:",adresseKomponent_sublabel:"You must select recipient before submitting the questionnaire.",adresseKomponent_velgAvdeling:"Select department",adresseKomponent_velgHelseforetak:"Select health company",adresseKomponent_velgHelseregion:"Select health region",adresseKomponent_velgSykehus:"Select hospital",adresseKomponent_velgKlinikk:"Select clinic",adresseKomponent_velgSeksjon:"Select section",adresseKomponent_velgSengepost:"Select bed post",adresseKomponent_velgPoliklinikk:"Select polyclinic",adresseKomponent_velgTjeneste:"Select place of treatment",adresseKomponent_feilmelding:"You must select a recipient.",adresseKomponent_loadError:"Technical error. Could not load recipients.",linkOpensInNewTab:"Opens in new tab",nextStep:"Next",previousStep:"Previous",openChoiceOption:"Other"}:"fr-FR"===e?{deleteButtonText:"Supprimer",validationSummaryHeader:"V\xe9rifiez que les \xe9l\xe9ments suivants sont bien remplis:",validationFileMax:"La taille des fichiers doit \xeatre inf\xe9rieure \xe0 25MB",validationFileType:"Le type de fichier doit \xeatre jpeg, png, or pdf",supportedFileFormats:"Les formats de fichier valides sont jpeg, png and pdf",selectDefaultPlaceholder:"S\xe9lectionnez une des options.",resetTime:"Temps de r\xe9initialisation",errorAfterMaxDate:"La date ne peut pas \xeatre apr\xe8s la date maximum",errorBeforeMinDate:"La date ne peut pas \xeatre avant la date minimum",dateRequired:"S\xe9lectionnez une date, ou entrez la date comme suit: jj.mm.aaaa.",oppgiTid:" Entrez l'heure",ugyldigTid:"Heure invalide",ugyldigDatoTid:"Date et heure invalides",oppgiVerdi:"S\xe9lectionnez une des options.",oppgiGyldigVerdi:"Merci de entrer une valeur valide",formCancel:"Annuler",formSend:"Valider",formSave:"Afficher QuestionnaireResponse",formError:"V\xe9rifiez que tout soit rempli correctement.",formOptional:"(optionnel)",formRequired:"(requis)",repeatButtonText:"Ajouter",avsluttSkjema:"Annuler les modifications",fortsett:"Continuer l'\xe9dition",confirmDeleteButtonText:"Supprimer la ligne",confirmDeleteCancelButtonText:"Annuler les modifications",confirmDeleteHeading:"Il y a des modifications non sauvegard\xe9es",confirmDeleteDescription:"Si vous supprimez la ligne, vos modifications seront annu\xe9les.",minutePlaceholder:"mm",hourPlaceholder:"hh",ikkeBesvart:"Non r\xe9pondu",uploadButtonText:"Charger un fichier",filterDateCalendarButton:"S\xe9lectionner une date",filterDateNavigateBackward:"Pr\xe9c\xe9dent",filterDateNavigateForward:"Suivant",filterDateErrorDateFormat:"Le format de la date est incorrect",filterDateErrorBeforeMinDate:"La date ne peut pas \xeatre une date situ\xe9e avant la date minimale",filterDateErrorAfterMaxDate:"La date ne peut pas \xeatre une date situ\xe9e apr\xe8s la date maximale",validationNotAllowed:"n'est pas permis",formRequiredErrorMessage:"Ce champ est requis",deleteAttachmentText:"Supprimer",autoSuggestLoadError:"Erreur technique",autosuggestNoSuggestions:'Pas de r\xe9sultat pour "{0}". Essayez un autre mot ou v\xe9rifiez son orthographe.',stringOverMaxLengthError:"Vous avez entr\xe9 trop de caract\xe8res. R\xe9duisez le texte.",maxLengthText:"Maximum {0} caract\xe8res",chooseFilesText:"Selectionnez les fichiers",skipLinkText:"Allez au navigateur",clearDate:"Supprimer la date",calendarLabel:"Calendrier",closeDatePicker:"Fermer",focusStartDate:"Utilisez le calendrier et s\xe9lectionnez une date",jumpToPrevMonth:"Aller au mois pr\xe9c\xe9dent",jumpToNextMonth:"Aller au mois suivant",keyboardShortcuts:"Raccourcis clavier",showKeyboardShortcutsPanel:"Ouvrir le menu des raccourcis clavier",hideKeyboardShortcutsPanel:"Fermer le menu des raccourcis clavier",enterKey:"Entrez la touche",leftArrowRightArrow:"Fl\xe8ches gauche et droite",upArrowDownArrow:"Fl\xe8ches haut et bas",pageUpPageDown:"Touches page haut/bas",homeEnd:"Touche fin",escape:"Touche \xe9chap",questionMark:"Point d'interrogation",openThisPanel:"Ouvrir ce menu",selectFocusedDate:"Selectionnez la date choisie",moveFocusByOneDay:"Reculer (gauche) ou avancer (droite) d'un jour",moveFocusByOneWeek:"Reculer (haut) ou avancer (bas) d'une semaine",moveFocusByOneMonth:"Changer de mois",moveFocustoStartAndEndOfWeek:"Aller au premier ou dernier jour de la semaine",returnFocusToInput:"Retourner \xe0 la date saisie",year_field_invalid:"Entrez une valeur valide pour l'ann\xe9e",year_field_maxdate:"Le dernier choix d'ann\xe9e possible est",year_field_mindate:"Le premier choix d'ann\xe9e possible est",year_field_required:"L'ann\xe9e est requise",yearmonth_field_invalid:"Valeur invalide",yearmonth_field_invalid_year:"Vous devez entrer une ann\xe9e valide",yearmonth_field_maxdate:"La derni\xe8re heure que vous pouvez choisir est",yearmonth_field_mindate:"La premi\xe8re heure que vous pouvez choisir est",yearmonth_field_month_placeholder:"Choisissez le mois",yearmonth_field_required:"L'ann\xe9e et le mois sont requis",yearmonth_field_year_placeholder:"Choisissez l'ann\xe9e'",adresseKomponent_header:"Qui est le destinataire ?",adresseKomponent_skjemaSendesTil:"Le Questionnaire sera envoy\xe9 \xe0 :",adresseKomponent_sublabel:"Vous devez s\xe9lectionner un destinataire avant d'envoyer le questionnaire.",adresseKomponent_velgAvdeling:"S\xe9lectionnez le d\xe9partement",adresseKomponent_velgHelseforetak:"S\xe9lectionnez l'entreprise",adresseKomponent_velgHelseregion:"S\xe9lectionnez la r\xe9gion",adresseKomponent_velgSykehus:"S\xe9lectionnez l'hopital",adresseKomponent_velgKlinikk:"S\xe9lectionnez la clinique",adresseKomponent_velgSeksjon:"S\xe9lectionnez la section",adresseKomponent_velgSengepost:"S\xe9lectionnez le lit",adresseKomponent_velgPoliklinikk:"S\xe9lectionnez la polyclinique",adresseKomponent_velgTjeneste:"S\xe9lectionnez le lieu de soin",adresseKomponent_feilmelding:"Vous devez s\xe9lectionner un destinataire.",adresseKomponent_loadError:"Erreur technique. Impossible de charger les destinataires.",linkOpensInNewTab:"S'ouvre dans un nouvel onglet",nextStep:"Suivant",previousStep:"Pr\xe9c\xe9dent",openChoiceOption:"Autre"}:{deleteButtonText:"Slett",validationSummaryHeader:"Sjekk at f\xf8lgende er riktig utfylt:",validationFileMax:"Filst\xf8rrelsen m\xe5 v\xe6re mindre enn 25MB",validationFileType:"Filtypen m\xe5 v\xe6re jpeg, png, eller pdf",supportedFileFormats:"Gyldige filformater er jpeg, png og pdf",selectDefaultPlaceholder:"Velg...",resetTime:"Nullstill tidspunkt",errorAfterMaxDate:"Dato kan ikke v\xe6re etter maksimum dato",errorBeforeMinDate:"Dato kan ikke v\xe6re f\xf8r minimums dato",dateRequired:"Oppgi en dato",oppgiTid:" Oppgi tid",ugyldigTid:"Ugyldig tid",oppgiDatoTid:"oppgi dato og tid",ugyldigDatoTid:"Ugyldig dato og tid",oppgiVerdi:"Oppgi en verdi",oppgiGyldigVerdi:"Oppgi en gyldig verdi",formCancel:"Avbryt",formSend:"Fullf\xf8r",formSave:"Vis QuestionnaireResponse",formError:"Sjekk at alt er riktig utfylt.",formOptional:"(valgfritt)",formRequired:"(m\xe5 fylles ut)",repeatButtonText:"Legg til",avsluttSkjema:"Avslutt skjema",fortsett:"Fortsett",confirmDeleteButtonText:"Forkast endringer",confirmDeleteCancelButtonText:"Avbryt",confirmDeleteHeading:"Det finnes endringer",confirmDeleteDescription:"Hvis du sletter, vil du miste endringene.",minutePlaceholder:"mm",hourPlaceholder:"tt",ikkeBesvart:"Ikke besvart",uploadButtonText:"Last opp fil",filterDateCalendarButton:"Velg dato",filterDateNavigateBackward:"Tilbake",filterDateNavigateForward:"Fram",filterDateErrorDateFormat:"Datoen er oppgitt p\xe5 feil format",filterDateErrorBeforeMinDate:"Fra-dato kan ikke v\xe6re senere enn til-dato",filterDateErrorAfterMaxDate:"Fra-dato kan ikke v\xe6re senere enn til-dato",validationNotAllowed:"er ikke tillatt",formRequiredErrorMessage:"Du m\xe5 fylle ut dette feltet",deleteAttachmentText:"Slett",autoSuggestLoadError:"Teknisk feil",autosuggestNoSuggestions:'Ingen treff p\xe5 "{0}". Pr\xf8v med et annet ord eller sjekk for skrivefeil.',stringOverMaxLengthError:"Du har skrevet for mange tegn. Gj\xf8r teksten kortere.",maxLengthText:"Maksimum {0} tegn",chooseFilesText:"Velg filer",skipLinkText:"Hopp til navigator",clearDate:"Fjern dato",calendarLabel:"Kalender",closeDatePicker:"Lukk",focusStartDate:"Bruk kalenderen og velg dato.",jumpToPrevMonth:"G\xe5 bakover til forrige m\xe5ned",jumpToNextMonth:"G\xe5 fremover til neste m\xe5ned",keyboardShortcuts:"Tastatursnarveier",showKeyboardShortcutsPanel:"\xc5pne panelet med tastatursnarveier",hideKeyboardShortcutsPanel:"Lukk panelet med tastatursnarveier",enterKey:"Enter tast",leftArrowRightArrow:"H\xf8yre og venstre piltast",upArrowDownArrow:"Opp og ned piltast",pageUpPageDown:"Side opp og Side ned tast",homeEnd:"Hjem og Slutt tast",escape:"Escape tast",questionMark:"Sp\xf8rsm\xe5lstegn",openThisPanel:"\xc5pne dette panelet",selectFocusedDate:"Velg datoen som har fokus",moveFocusByOneDay:"Flytt en dag bakover (venstre) og fremover (h\xf8yre)",moveFocusByOneWeek:"Flytt en uke bakover (opp) og fremover (ned)",moveFocusByOneMonth:"Skifte m\xe5ned",moveFocustoStartAndEndOfWeek:"G\xe5 til f\xf8rste eller siste dag av uken",returnFocusToInput:"G\xe5 tilbake til datoen i inputfeltet",year_field_invalid:"Du m\xe5 skrive inn et gyldig \xe5rstall",year_field_maxdate:"\xc5rstall er etter det eldste tillatte \xe5r",year_field_mindate:"\xc5rstall er f\xf8r det minste tillatte \xe5r",year_field_required:"\xc5rstall er p\xe5krevd",yearmonth_field_invalid:"Ugyldig verdi",yearmonth_field_invalid_year:"Du m\xe5 skrive inn et gyldig \xe5rstall",yearmonth_field_maxdate:"Tidspunkt er etter eldste tillatte tidspunkt",yearmonth_field_mindate:"Tidspunkt er f\xf8r minste tillatte tidspunkt",yearmonth_field_month_placeholder:"Velg m\xe5ned",yearmonth_field_required:"\xc5rstall og m\xe5ned er p\xe5krevd",yearmonth_field_year_placeholder:"Velg \xe5r",adresseKomponent_header:"Hvem er mottaker av skjemaet?",adresseKomponent_skjemaSendesTil:"Skjemaet sendes til:",adresseKomponent_sublabel:"Du m\xe5 velge mottaker f\xf8r du sender skjemaet.",adresseKomponent_velgAvdeling:"Velg avdeling",adresseKomponent_velgHelseforetak:"Velg helseforetak",adresseKomponent_velgHelseregion:"Velg helseregion",adresseKomponent_velgSykehus:"Velg sykehus",adresseKomponent_velgKlinikk:"Velg klinikk",adresseKomponent_velgSeksjon:"Velg seksjon",adresseKomponent_velgSengepost:"Velg sengepost",adresseKomponent_velgPoliklinikk:"Velg poliklinikk",adresseKomponent_velgTjeneste:"Velg behandlingssted",adresseKomponent_feilmelding:"Du m\xe5 velge en mottaker",adresseKomponent_loadError:"Teknisk feil: kunne ikke laste liste over mottakere",linkOpensInNewTab:"\xc5pnes i ny fane",nextStep:"Neste",previousStep:"Forrige",openChoiceOption:"Annet"};var zr=n(426),Ur=n.n(zr),Hr=n(430),Wr=n(27);const Kr=(e,t)=>t.length>0?Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("h2",{children:e}),Object(nn.jsx)("div",{children:t.map(((e,t)=>Object(nn.jsx)("p",{dangerouslySetInnerHTML:{__html:e}},t)))})]}):null;var Gr=e=>{let{questionnaire:t}=e;const[n,i]=a.a.useState(!1),r=(e=>{const t=Object(Wr.getSidebarSections)(e),n={"SOT-1":[],"SOT-2":[],"SOT-3":[]};return t.forEach((e=>{e.item.code&&e.item.code.length>0&&e.item.code[0].code&&n[e.item.code[0].code]&&n[e.item.code[0].code].push(e.markdownText)})),n})(t);return Object(nn.jsxs)("div",{style:{position:"fixed",top:"70px",bottom:0,right:0,padding:8,backgroundColor:"#fff",zIndex:90,transition:"transform .5s ease,-webkit-transform .5s ease",width:"27.5rem",borderLeft:"2px #AAA solid",transform:n?"translateX(0)":"translateX(100%)"},children:[Object(nn.jsx)("button",{className:"formFillerSidebar-button",onClick:()=>i(!n),children:"?"}),n&&Object(nn.jsxs)("div",{className:"formFillerSidebar-content",children:[Kr("Alternativer for utfylling",r["SOT-1"]),Kr("Veiledning og ansvarlig",r["SOT-2"]),Kr("Behandling hos mottaker",r["SOT-3"])]})]})},Qr=n(105);var Jr=e=>{let{showFormFiller:t,language:n,state:a}=e;const r=Object(Mr.createStore)(Ur.a,Object(Mr.applyMiddleware)(Br.a)),{t:o}=Object(In.a)(),s=st(a),[l,d]=Object(i.useState)(n||a.qMetadata.language||it.code),[c,u]=Object(i.useState)(""),[p,m]=Object(i.useState)(""),h=JSON.parse(JSON.stringify(((e,t,n,i)=>{const{qAdditionalLanguages:a}=e,r=t&&a&&a[t]?Ti(e,t,a):Di(e),o=[];return n&&o.push({expression:"iif(%patient.gender.empty() or %patient.gender = 'other' or %patient.gender = 'unknown', 'Ukjent', iif(%patient.gender = 'female', 'Kvinne', 'Mann'))",initialValue:{valueString:n}}),i&&o.push({expression:"Patient.extension.where(url = 'http://helsenorge.no/fhir/StructureDefinition/sdf-age').value",initialValue:{valueInteger:parseInt(i)}}),Pi(r.item||[],o),r})(a,l,c,p),ji)),[v,g]=Object(i.useState)(),[b,f]=Object(i.useState)(!1),[j,x]=Object(i.useState)("123");return Object(i.useEffect)((()=>{x(Math.random().toString())}),[l,c,p]),Object(nn.jsx)(Rr.Provider,{store:r,children:Object(nn.jsx)("div",{className:"overlay",children:Object(nn.jsxs)("div",{className:"preview-window",children:[Object(nn.jsxs)("div",{className:"title align-everything",children:[Object(nn.jsx)(Nn,{type:"x",title:o("Close"),onClick:t}),Object(nn.jsx)("h1",{children:o("Preview")}),Object(nn.jsxs)("div",{className:"pull-right",children:[Object(nn.jsx)(gi,{value:c,options:[{code:"",display:o("Gender")},{code:"Kvinne",display:o("Female")},{code:"Mann",display:o("Male")},{code:"Ukjent",display:o("Unknown")}],onChange:e=>{u(e.target.value)},compact:!0}),Object(nn.jsx)(gi,{value:p,options:[{code:"",display:o("Age")},...Array.from(Array(120),((e,t)=>({code:t.toString(),display:t.toString()})))],onChange:e=>{m(e.target.value)},compact:!0}),Object(nn.jsx)(gi,{value:l,options:s,onChange:e=>{d(e.target.value)},compact:!0})]})]}),Object(nn.jsx)(Gr,{questionnaire:h}),Object(nn.jsx)("div",{className:"referoContainer-div",children:b?Object(nn.jsxs)("div",{children:[Object(nn.jsx)("p",{children:JSON.stringify(v)}),Object(nn.jsx)(Qr.a,{onClick:()=>f(!1),children:"Tilbake til skjemautfyller"})]}):Object(nn.jsx)("div",{className:"page_refero",children:Object(nn.jsx)(Hr.ReferoContainer,{store:r,questionnaire:h,onCancel:t,onSave:e=>{g(e),f(!0)},onPause:()=>console.log("onPause"),onSubmit:()=>console.log("onSubmit"),authorized:!0,resources:_r(n||""),sticky:!0,saveButtonDisabled:!1,loginButton:Object(nn.jsx)(Qr.a,{children:"Login"}),syncQuestionnaireResponse:!0,validateScriptInjection:!0},j)})})]})})})};n(790),n(791);var Zr=e=>{const{isVisible:t,setIsDeleteConfirmationModalVisible:n,handleOnMultipleDelete:i}=e;if(!t)return null;return Object(nn.jsx)(Dn,{title:"Delete Selected Nodes",children:Object(nn.jsxs)("div",{className:"delete-confirmation-modal",children:[Object(nn.jsx)("div",{className:"heading",children:"Are you sure you want to delete all the selected nodes?"}),Object(nn.jsx)("p",{children:Object(nn.jsx)("li",{children:"If you proceed, all the selected nodes and their children will be permanently deleted. This action cannot be undone."})}),Object(nn.jsxs)("div",{className:"modal-btn-bottom",children:[Object(nn.jsx)("button",{type:"button",className:"primary regular-btn save-btn",onClick:()=>{i()},children:"Delete"}),Object(nn.jsx)("button",{className:"secondary regular-btn cancel-btn",onClick:()=>{n(!1)},children:"Cancel"})]})]})})};var Yr=()=>{const{state:e,dispatch:t}=Object(i.useContext)(jn),{t:n}=Object(In.a)(),[r,o]=Object(i.useState)(!1),[s,l]=Object(i.useState)(!1),[d,c]=Object(i.useState)([]),[u,p]=Object(i.useState)([]),[m,h]=Object(i.useState)(""),[v,g]=a.a.useState([]),[b,f]=Object(i.useState)(!1),j=Object(i.useCallback)((()=>{o(!r)}),[r]);return Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)(va,{showFormFiller:()=>l(!s),validationErrors:d,setValidationErrors:c,translationErrors:u,setTranslationErrors:p}),v.length>0&&Object(nn.jsxs)("div",{className:"header-wrapper ".concat(""),children:[Object(nn.jsxs)("div",{className:"title",children:[Object(nn.jsx)("i",{className:"cross-icon",onClick:()=>g([])}),Object(nn.jsxs)("span",{className:"items-selected",children:[v.length," selected"]})]}),Object(nn.jsxs)("div",{className:"delete-multiple p-2",onClick:()=>f(!0),children:[Object(nn.jsx)("i",{className:"delete-icon"}),"Delete"]})]}),Object(nn.jsxs)("div",{className:"editor",children:[Object(nn.jsx)(ei,{dispatch:t,qOrder:e.qOrder,qItems:e.qItems,qCurrentItem:e.qCurrentItem,validationErrors:d,selectedNodes:v,setSelectedNodes:g}),s&&Object(nn.jsx)(Jr,{showFormFiller:()=>l(!s),language:e.qMetadata.language,state:e}),m&&Object(nn.jsx)(Lr,{close:()=>h(""),targetLanguage:m})]}),Object(nn.jsxs)("div",{className:"page-wrapper",children:[Object(nn.jsx)("div",{className:"details-button",children:Object(nn.jsx)(Nn,{type:"info",title:n("Questionnaire details"),color:"black",onClick:j,size:"large"})}),Object(nn.jsx)(Yi,{setTranslateLang:e=>{h(e),j()},closeDrawer:j,isOpen:r}),Object(nn.jsx)(Nr,{validationErrors:d}),Object(nn.jsx)(Zr,{isVisible:b,setIsDeleteConfirmationModalVisible:f,handleOnMultipleDelete:()=>{v.map((e=>{(e=>{for(const t of e)if(v.some((e=>e.node.title===t)))return!1;return!0})(e.path.slice(-2,-1))&&t(Ie(e.node.title,(e=>{const t=[...e];return t.splice(-1),t})(e.path)))})),g([]),f(!1)}})]})]})};n(792);var $r=()=>{const{t:e}=Object(In.a)(),{dispatch:t}=Object(i.useContext)(jn),[n,a]=Object(i.useState)(),[r,o]=Object(i.useState)(!1),[s,l]=Object(i.useState)(!1),d=Object(i.useRef)(null);Object(i.useEffect)((()=>{c()}),[]);const c=async()=>{const e=await(async()=>{const e=await vt();if(e){const t=e.transaction(ht,"readonly"),n=t.objectStore(ht),i=await n.get(1);return await t.done,e.close(),i}return Promise.reject("No questionnaire found in IndexedDB")})();a(e)},u=e=>{var n;if(null!==(n=e.target)&&void 0!==n&&n.result){const n=Sn(JSON.parse(e.target.result));t(Ne(n)),o(!1),l(!0),d.current&&(d.current.value="")}},p=!(null===n||void 0===n||!n.qItems)&&Object.keys(n.qItems).length>0,m=()=>{t(Ne()),a(void 0)};return Object(nn.jsxs)(nn.Fragment,{children:[p&&Object(nn.jsx)(Dn,{title:e("Restore questionnaire..."),close:m,children:Object(nn.jsxs)("div",{children:[Object(nn.jsx)("p",{children:e("It looks like you have previously worked with a questionnaire:")}),Object(nn.jsxs)("div",{className:"key-value",children:[Object(nn.jsx)("div",{children:e("Title")}),Object(nn.jsx)("div",{children:null===n||void 0===n?void 0:n.qMetadata.title})]}),Object(nn.jsxs)("div",{className:"key-value",children:[Object(nn.jsx)("div",{children:e("Technical name")}),Object(nn.jsx)("div",{children:null===n||void 0===n?void 0:n.qMetadata.name})]}),Object(nn.jsxs)("div",{className:"key-value",children:[Object(nn.jsx)("div",{children:e("Version")}),Object(nn.jsx)("div",{children:null===n||void 0===n?void 0:n.qMetadata.version})]}),Object(nn.jsx)("p",{children:e("Do you wish to open this questionnaire?")}),Object(nn.jsx)("div",{className:"modal-btn-bottom",children:Object(nn.jsxs)("div",{className:"center-text",children:[Object(nn.jsx)(qn,{title:e("Yes"),type:"button",variant:"primary",onClick:()=>{t(Ne(n)),a(void 0),l(!0)}})," ",Object(nn.jsx)(qn,{title:e("No"),type:"button",variant:"secondary",onClick:m})]})})]})}),r&&Object(nn.jsxs)(Dn,{children:[Object(nn.jsx)("div",{className:"align-everything",children:Object(nn.jsx)(Tn,{})}),Object(nn.jsx)("p",{className:"center-text",children:e("Loading questionnaire...")})]}),s?Object(nn.jsx)(Yr,{}):Object(nn.jsxs)(nn.Fragment,{children:[Object(nn.jsx)("header",{children:Object(nn.jsx)("div",{className:"form-title",children:Object(nn.jsx)("h1",{children:e("Form builder")})})}),Object(nn.jsxs)("div",{className:"frontpage",children:[Object(nn.jsx)("h2",{children:e("What would you like to do?")}),Object(nn.jsx)("div",{className:"frontpage__infotext",children:e("You can start a new questionnaire, or upload an existing one.")}),Object(nn.jsx)("input",{type:"file",ref:d,onChange:e=>{o(!0);const t=new FileReader;t.onload=u,e.target.files&&e.target.files[0]&&t.readAsText(e.target.files[0])},accept:"application/JSON",style:{display:"none"}}),Object(nn.jsx)(qn,{onClick:()=>{l(!0)},title:e("New questionnaire"),variant:"primary"})," ",Object(nn.jsx)(qn,{onClick:()=>{var e;null===(e=d.current)||void 0===e||e.click()},title:e("Upload questionnaire"),variant:"secondary"})]})]})]})};function Xr(){return Object(nn.jsx)(o.c,{children:Object(nn.jsx)(o.a,{path:"/",exact:!0,children:Object(nn.jsx)(xn,{children:Object(nn.jsx)($r,{})})})})}var eo=function(){return Object(nn.jsx)(r.a,{children:Object(nn.jsx)(Xr,{})})},to=n(41),no=n.n(to);const io=Object(i.createContext)(void 0),ao=e=>{let{children:t}=e;const[n,a]=Object(i.useState)("en_US");return Object(nn.jsx)(io.Provider,{value:{locale:n,setLocale:a},children:t})};var ro=n(289),oo=n(189);const so={"nb-NO":{translation:n(433)},"fr-FR":{translation:n(434)}};ro.a.use(oo.e).init({resources:so,lng:localStorage.getItem("editor_language")||"en-US",nsSeparator:!1,keySeparator:!1,interpolation:{escapeValue:!1}});ro.a;const lo=document.getElementById("root");null===lo||void 0===lo||lo.classList.add("root"),no.a.render(Object(nn.jsx)(a.a.StrictMode,{children:Object(nn.jsx)(ao,{children:Object(nn.jsx)(eo,{})})}),lo),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{e.unregister()})).catch((e=>{console.error(e.message)}))}},[[794,1,2]]]);